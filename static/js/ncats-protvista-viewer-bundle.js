/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={676:t=>{window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var i=n(14),r=n(15),s=n(5),o=n(16);t.exports=function(t){return i(t)||r(t)||s(t)||o()}},function(t,e,n){var i=n(17);function r(e,n,s){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var s=Object.getOwnPropertyDescriptor(r,e);return s.get?s.get.call(n):s.value}},r(e,n,s||e)}t.exports=r},function(t,e,n){var i=n(6);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}},function(t,e,n){var i=n(11),r=n(12),s=n(5),o=n(13);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()}},function(t,e,n){var i=n(18);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(19),r=n(20);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){t.exports=n(21)},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var i=n(6);t.exports=function(t){if(Array.isArray(t))return i(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var i=n(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){"use strict";n.r(e),n.d(e,"Region",(function(){return N})),n.d(e,"TrackHighlighter",(function(){return T})),n.d(e,"ColorScaleParser",(function(){return O})),n.d(e,"String2Object",(function(){return P})),n.d(e,"ScrollFilter",(function(){return R})),n.d(e,"withMargin",(function(){return j}));var i=n(7),r=n.n(i),s=n(0),o=n.n(s),a=n(1),h=n.n(a),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,i=void 0===n?-1/0:n,r=e.max,s=void 0===r?1/0:r;o()(this,t),this.segments=[],this.max=s,this.min=i,this.regionString=null}return h()(t,[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var i=n.start,r=n.end;if(e)return"".concat(i,":").concat(r);var s=i===t.min?"":i,o=r===t.max?"":r;return"".concat(s,":").concat(o)})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=t.split(":"),i=r()(n,3),s=i[0],o=i[1];if(void 0!==i[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=s?Number(s):e.min,h=o?Number(o):e.max;if(a>h){var l=[h,a];a=l[0],h=l[1]}if(a<e.min&&(a=e.min),h>e.max&&(h=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(s," is NaN. Region: ").concat(t));if(Number.isNaN(h))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));return{start:a,end:h}})):this.segments=[]}}]),t}(),u=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,i=e.min,r=e.max;o()(this,t),this.element=n,this.region=new l({min:i,max:r}),this.fixedHighlight=null}return h()(t,[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(u(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(u(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(u(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}]),t}();function f(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var p=function(t){return t},d=function(){function t(e){o()(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}return h()(t,[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),i=n.height,r=n.width,s=n.x,o=n.y;return t>s&&e<s+r&&e>o&&e<o+i}},{key:"wheel",value:function(t){var e=t.x,n=t.y,i=t.timeStamp;this.isWheelEventInsideElement(e,n)?i<this.timeStampWheelOutside+400?this.blockScroll(i):this.setElementScrollable(!0):this.blockScroll(i)}}]),t}(),g=n(3),m=n.n(g),y=n(4),v=n.n(y),_=n(8),b=n.n(_),w=n(9),x=n.n(w),A=n(2),L=n.n(A);function S(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=L()(t);if(e){var r=L()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return x()(this,n)}}var k=["left","right","top","bottom"],C=k.map((function(t){return"margin".concat(t)})),N=l,T=c,O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var i=t.split(",").map((function(t){return t.split(":")}));if(i.length<2)throw new Error("There should be at least 2 points to create a scale");e=i.map((function(t){var e=t[0].trim().toUpperCase();if(!f(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=i.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,i=void 0===n?p:n,r=e.valueFormatter,s=void 0===r?p:r;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var o=t.split(",").map((function(t){return t.split(":")})),a={};return o.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));a[i(t[0])]=s(t[1])})),a}return{}},R=d,j=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},i=function(t){b()(i,t);var e=E(i);function i(){var t;return o()(this,i),(t=e.call(this)).margin=n.initialValue,t}return h()(i,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&C.includes(t)&&(this[t]=n),v()(L()(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(m()(v()(L()(i),"observedAttributes",this)),m()(C))}}]),i}(t),r=S(k);try{var s=function(){var t=e.value;Object.defineProperty(i.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(r.s();!(e=r.n()).done;)s()}catch(t){r.e(t)}finally{r.f()}return i}}])},13:(t,e,n)=>{"use strict";const i="length",r="displaystart",s="displayend",o="highlight";class a extends HTMLElement{constructor(){super(),this.protvistaElements=new Set,this.attributeValues=new Map,this.propertyValues=new Map,this.mouseOver=!1}static get observedAttributes(){return["attributes",i,r,s,o]}set length(t){this.attributeValues.set(i,t)}get length(){return this.attributeValues.get(i)}set displaystart(t){this.attributeValues.set(r,t)}get displaystart(){return this.attributeValues.get(r)}set displayend(t){this.attributeValues.set(s,t)}get displayend(){return this.attributeValues.get(s)}set highlight(t){this.attributeValues.set(o,t)}get highlight(){return this.attributeValues.get(o)}attributeChangedCallback(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((t=>!a.observedAttributes.includes(t))).map((t=>[t,null])))}else t===i&&(this.length=n),t===r&&(this.displaystart=n),t===s&&(this.displayend=n),t===o&&(this.highlight=n);this.applyAttributes()}}register(t){this.protvistaElements.add(t),this.applyAttributes()}unregister(t){this.protvistaElements.delete(t)}_polyfillElementClosest(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=t=>{let e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}applyAttributes(){this.protvistaElements.forEach((t=>{this.attributeValues.forEach(((e,n)=>{!1===e||null==e?t.removeAttribute(n):t.setAttribute(n,"boolean"==typeof e?"":e)}))}))}applyProperties(t){if(t){const e=this.querySelector(`#${t}`);this.propertyValues.forEach(((t,n)=>{e[n]=t}))}else this.protvistaElements.forEach((t=>{this.propertyValues.forEach(((e,n)=>{t[n]=e}))}))}isRegisteredAttribute(t){return[...this.attributeValues.keys()].includes(t)||a.observedAttributes.includes(t)}_changeListener(t){switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((e=>{this.isRegisteredAttribute(e)&&this.attributeValues.set(e,t.detail[e])})),this.applyAttributes()}}connectedCallback(){this.addEventListener("change",this._changeListener)}}const h=a;function l(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var u,c;const f=(1===(u=l).length&&(c=u,u=function(t,e){return l(c(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;u(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;u(t[r],e)>0?i=r:n=r+1}return n}}).right;var p=Array.prototype,d=(p.slice,p.map,Math.sqrt(50)),g=Math.sqrt(10),m=Math.sqrt(2);function y(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=d?10:s>=g?5:s>=m?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=d?10:s>=g?5:s>=m?2:1)}var v=Array.prototype.slice;function _(t){return t}var b=1e-6;function w(t){return"translate("+(t+.5)+",0)"}function x(t){return"translate(0,"+(t+.5)+")"}function A(t){return function(e){return+t(e)}}function L(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function S(){return!this.__axis}function M(t,e){var n=[],i=null,r=null,s=6,o=6,a=3,h=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",u=1===t||3===t?w:x;function c(c){var f=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):_:r,d=Math.max(s,0)+a,g=e.range(),m=+g[0]+.5,y=+g[g.length-1]+.5,v=(e.bandwidth?L:A)(e.copy()),w=c.selection?c.selection():c,x=w.selectAll(".domain").data([null]),M=w.selectAll(".tick").data(f,e).order(),E=M.exit(),k=M.enter().append("g").attr("class","tick"),C=M.select("line"),N=M.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(k),C=C.merge(k.append("line").attr("stroke","currentColor").attr(l+"2",h*s)),N=N.merge(k.append("text").attr("fill","currentColor").attr(l,h*d).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),c!==w&&(x=x.transition(c),M=M.transition(c),C=C.transition(c),N=N.transition(c),E=E.transition(c).attr("opacity",b).attr("transform",(function(t){return isFinite(t=v(t))?u(t):this.getAttribute("transform")})),k.attr("opacity",b).attr("transform",(function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:v(t))}))),E.remove(),x.attr("d",4===t||2==t?o?"M"+h*o+","+m+"H0.5V"+y+"H"+h*o:"M0.5,"+m+"V"+y:o?"M"+m+","+h*o+"V0.5H"+y+"V"+h*o:"M"+m+",0.5H"+y),M.attr("opacity",1).attr("transform",(function(t){return u(v(t))})),C.attr(l+"2",h*s),N.attr(l,h*d).text(p),w.filter(S).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each((function(){this.__axis=v}))}return c.scale=function(t){return arguments.length?(e=t,c):e},c.ticks=function(){return n=v.call(arguments),c},c.tickArguments=function(t){return arguments.length?(n=null==t?[]:v.call(t),c):n.slice()},c.tickValues=function(t){return arguments.length?(i=null==t?null:v.call(t),c):i&&i.slice()},c.tickFormat=function(t){return arguments.length?(r=t,c):r},c.tickSize=function(t){return arguments.length?(s=o=+t,c):s},c.tickSizeInner=function(t){return arguments.length?(s=+t,c):s},c.tickSizeOuter=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c}function E(t){return M(3,t)}var k={value:function(){}};function C(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new N(i)}function N(t){this._=t}function T(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function O(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function P(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=k,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}N.prototype=C.prototype={constructor:N,on:function(t,e){var n,i=this._,r=T(t+"",i),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=P(i[n],t.name,e);else if(null==e)for(n in i)i[n]=P(i[n],t.name,null);return this}for(;++s<o;)if((n=(t=r[s]).type)&&(n=O(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new N(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};const R=C;function j(){}function z(t){return null==t?j:function(){return this.querySelector(t)}}function F(){return[]}function H(t){return null==t?F:function(){return this.querySelectorAll(t)}}function q(t){return function(){return this.matches(t)}}function $(t){return new Array(t.length)}function V(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Q(t,e,n,i,r,s){for(var o,a=0,h=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new V(t,s[a]);for(;a<h;++a)(o=e[a])&&(r[a]=o)}function W(t,e,n,i,r,s,o){var a,h,l,u={},c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(h=e[a])&&(p[a]=l="$"+o.call(h,h.__data__,a,e),l in u?r[a]=h:u[l]=h);for(a=0;a<f;++a)(h=u[l="$"+o.call(t,s[a],a,s)])?(i[a]=h,h.__data__=s[a],u[l]=null):n[a]=new V(t,s[a]);for(a=0;a<c;++a)(h=e[a])&&u[p[a]]===h&&(r[a]=h)}function I(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}V.prototype={constructor:V,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var U="http://www.w3.org/1999/xhtml";const D={svg:"http://www.w3.org/2000/svg",xhtml:U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),D.hasOwnProperty(e)?{space:D[e],local:t}:t}function Z(t){return function(){this.removeAttribute(t)}}function X(t){return function(){this.removeAttributeNS(t.space,t.local)}}function G(t,e){return function(){this.setAttribute(t,e)}}function Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function K(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function J(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function et(t){return function(){this.style.removeProperty(t)}}function nt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function it(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function rt(t,e){return t.style.getPropertyValue(e)||tt(t).getComputedStyle(t,null).getPropertyValue(e)}function st(t){return function(){delete this[t]}}function ot(t,e){return function(){this[t]=e}}function at(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ht(t){return t.trim().split(/^|\s+/)}function lt(t){return t.classList||new ut(t)}function ut(t){this._node=t,this._names=ht(t.getAttribute("class")||"")}function ct(t,e){for(var n=lt(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ft(t,e){for(var n=lt(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function pt(t){return function(){ct(this,t)}}function dt(t){return function(){ft(this,t)}}function gt(t,e){return function(){(e.apply(this,arguments)?ct:ft)(this,t)}}function mt(){this.textContent=""}function yt(t){return function(){this.textContent=t}}function vt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function _t(){this.innerHTML=""}function bt(t){return function(){this.innerHTML=t}}function wt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function xt(){this.nextSibling&&this.parentNode.appendChild(this)}function At(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===U&&e.documentElement.namespaceURI===U?e.createElement(t):e.createElementNS(n,t)}}function St(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Mt(t){var e=B(t);return(e.local?St:Lt)(e)}function Et(){return null}function kt(){var t=this.parentNode;t&&t.removeChild(this)}function Ct(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}ut.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Tt={},Ot=null;function Pt(t,e,n){return t=Rt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Rt(t,e,n){return function(i){var r=Ot;Ot=i;try{t.call(this,this.__data__,e,n)}finally{Ot=r}}}function jt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function zt(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Ft(t,e,n){var i=Tt.hasOwnProperty(t.type)?Pt:Rt;return function(r,s,o){var a,h=this.__on,l=i(e,s,o);if(h)for(var u=0,c=h.length;u<c;++u)if((a=h[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},h?h.push(a):this.__on=[a]}}function Ht(t,e,n,i){var r=Ot;t.sourceEvent=Ot,Ot=t;try{return e.apply(n,i)}finally{Ot=r}}function qt(t,e,n){var i=tt(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function $t(t,e){return function(){return qt(this,t,e)}}function Vt(t,e){return function(){return qt(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Tt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Qt=[null];function Wt(t,e){this._groups=t,this._parents=e}function It(){return new Wt([[document.documentElement]],Qt)}Wt.prototype=It.prototype={constructor:Wt,select:function(t){"function"!=typeof t&&(t=z(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o,a=e[r],h=a.length,l=i[r]=new Array(h),u=0;u<h;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),l[u]=o);return new Wt(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=H(t));for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o,a=e[s],h=a.length,l=0;l<h;++l)(o=a[l])&&(i.push(t.call(o,o.__data__,l,a)),r.push(o));return new Wt(i,r)},filter:function(t){"function"!=typeof t&&(t=q(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,h=i[r]=[],l=0;l<a;++l)(s=o[l])&&t.call(s,s.__data__,l,o)&&h.push(s);return new Wt(i,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var n,i=e?W:Q,r=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),h=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=s[u],p=f.length,d=t.call(c,c&&c.__data__,u,r),g=d.length,m=h[u]=new Array(g),y=a[u]=new Array(g);i(c,f,m,y,l[u]=new Array(p),d,e);for(var v,_,b=0,w=0;b<g;++b)if(v=m[b]){for(b>=w&&(w=b+1);!(_=y[w])&&++w<g;);v._next=_||null}}return(a=new Wt(a,r))._enter=h,a._exit=l,a},enter:function(){return new Wt(this._enter||this._groups.map($),this._parents)},exit:function(){return new Wt(this._exit||this._groups.map($),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var h,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<i;++a)o[a]=e[a];return new Wt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=I);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,a=n[s],h=a.length,l=r[s]=new Array(h),u=0;u<h;++u)(o=a[u])&&(l[u]=o);l.sort(e)}return new Wt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var n=B(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?X:Z:"function"==typeof e?n.local?J:K:n.local?Y:G)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?et:"function"==typeof e?it:nt)(t,e,null==n?"":n)):rt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?st:"function"==typeof e?at:ot)(t,e)):this.node()[t]},classed:function(t,e){var n=ht(t+"");if(arguments.length<2){for(var i=lt(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?gt:e?pt:dt)(n,e))},text:function(t){return arguments.length?this.each(null==t?mt:("function"==typeof t?vt:yt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?_t:("function"==typeof t?wt:bt)(t)):this.node().innerHTML},raise:function(){return this.each(xt)},lower:function(){return this.each(At)},append:function(t){var e="function"==typeof t?t:Mt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Mt(t),i=null==e?Et:"function"==typeof e?e:z(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(kt)},clone:function(t){return this.select(t?Nt:Ct)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=jt(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Ft:zt,null==n&&(n=!1),i=0;i<o;++i)this.each(a(s[i],e,n));return this}var a=this.node().__on;if(a)for(var h,l=0,u=a.length;l<u;++l)for(i=0,h=a[l];i<o;++i)if((r=s[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?Vt:$t)(t,e))}};const Ut=It;function Dt(t){return"string"==typeof t?new Wt([[document.querySelector(t)]],[document.documentElement]):new Wt([[t]],Qt)}function Bt(){Ot.preventDefault(),Ot.stopImmediatePropagation()}function Zt(t){var e=t.document.documentElement,n=Dt(t).on("dragstart.drag",Bt,!0);"onselectstart"in e?n.on("selectstart.drag",Bt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xt(t,e){var n=t.document.documentElement,i=Dt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Bt,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Gt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Kt(){}var Jt=.7,te=1/Jt,ee="\\s*([+-]?\\d+)\\s*",ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",re=/^#([0-9a-f]{3,8})$/,se=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),oe=new RegExp("^rgb\\("+[ie,ie,ie]+"\\)$"),ae=new RegExp("^rgba\\("+[ee,ee,ee,ne]+"\\)$"),he=new RegExp("^rgba\\("+[ie,ie,ie,ne]+"\\)$"),le=new RegExp("^hsl\\("+[ne,ie,ie]+"\\)$"),ue=new RegExp("^hsla\\("+[ne,ie,ie,ne]+"\\)$"),ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fe(){return this.rgb().formatHex()}function pe(){return this.rgb().formatRgb()}function de(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=re.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ge(e):3===n?new _e(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?me(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?me(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=se.exec(t))?new _e(e[1],e[2],e[3],1):(e=oe.exec(t))?new _e(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ae.exec(t))?me(e[1],e[2],e[3],e[4]):(e=he.exec(t))?me(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=le.exec(t))?Ae(e[1],e[2]/100,e[3]/100,1):(e=ue.exec(t))?Ae(e[1],e[2]/100,e[3]/100,e[4]):ce.hasOwnProperty(t)?ge(ce[t]):"transparent"===t?new _e(NaN,NaN,NaN,0):null}function ge(t){return new _e(t>>16&255,t>>8&255,255&t,1)}function me(t,e,n,i){return i<=0&&(t=e=n=NaN),new _e(t,e,n,i)}function ye(t){return t instanceof Kt||(t=de(t)),t?new _e((t=t.rgb()).r,t.g,t.b,t.opacity):new _e}function ve(t,e,n,i){return 1===arguments.length?ye(t):new _e(t,e,n,null==i?1:i)}function _e(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function be(){return"#"+xe(this.r)+xe(this.g)+xe(this.b)}function we(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function xe(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ae(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Se(t,e,n,i)}function Le(t){if(t instanceof Se)return new Se(t.h,t.s,t.l,t.opacity);if(t instanceof Kt||(t=de(t)),!t)return new Se;if(t instanceof Se)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,h=(s+r)/2;return a?(o=e===s?(n-i)/a+6*(n<i):n===s?(i-e)/a+2:(e-n)/a+4,a/=h<.5?s+r:2-s-r,o*=60):a=h>0&&h<1?0:o,new Se(o,a,h,t.opacity)}function Se(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Me(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ee(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function ke(t){return function(){return t}}function Ce(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ke(isNaN(t)?e:t)}Gt(Kt,de,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fe,formatHex:fe,formatHsl:function(){return Le(this).formatHsl()},formatRgb:pe,toString:pe}),Gt(_e,ve,Yt(Kt,{brighter:function(t){return t=null==t?te:Math.pow(te,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Jt:Math.pow(Jt,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:be,formatHex:be,formatRgb:we,toString:we})),Gt(Se,(function(t,e,n,i){return 1===arguments.length?Le(t):new Se(t,e,n,null==i?1:i)}),Yt(Kt,{brighter:function(t){return t=null==t?te:Math.pow(te,t),new Se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Jt:Math.pow(Jt,t),new Se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new _e(Me(t>=240?t-240:t+120,r,i),Me(t,r,i),Me(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ne=function t(e){var n=function(t){return 1==(t=+t)?Ce:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):ke(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=ve(t)).r,(e=ve(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),o=Ce(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function Te(t){return function(e){var n,i,r=e.length,s=new Array(r),o=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=ve(e[n]),s[n]=i.r||0,o[n]=i.g||0,a[n]=i.b||0;return s=t(s),o=t(o),a=t(a),i.opacity=1,function(t){return i.r=s(t),i.g=o(t),i.b=a(t),i+""}}}function Oe(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),o=new Array(i);for(n=0;n<r;++n)s[n]=$e(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=s[n](t);return o}}function Pe(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Re(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function je(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=$e(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}Te((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return Ee((n-i/e)*e,o,r,s,a)}})),Te((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],o=t[(i+1)%e],a=t[(i+2)%e];return Ee((n-i/e)*e,r,s,o,a)}}));var ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fe=new RegExp(ze.source,"g");function He(t,e){var n,i,r,s=ze.lastIndex=Fe.lastIndex=0,o=-1,a=[],h=[];for(t+="",e+="";(n=ze.exec(t))&&(i=Fe.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,h.push({i:o,x:Re(n,i)})),s=Fe.lastIndex;return s<e.length&&(r=e.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)a[(n=h[i]).i]=n.x(t);return a.join("")})}function qe(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function $e(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?ke(e):("number"===r?Re:"string"===r?(n=de(e))?(e=n,Ne):He:e instanceof de?Ne:e instanceof Date?Pe:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?Oe:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?je:Re:qe))(t,e)}function Ve(){for(var t,e=Ot;t=e.sourceEvent;)e=t;return e}function Qe(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function We(t,e,n){arguments.length<3&&(n=e,e=Ve().changedTouches);for(var i,r=0,s=e?e.length:0;r<s;++r)if((i=e[r]).identifier===n)return Qe(t,i);return null}function Ie(t){var e=Ve();return e.changedTouches&&(e=e.changedTouches[0]),Qe(t,e)}var Ue,De,Be=0,Ze=0,Xe=0,Ge=0,Ye=0,Ke=0,Je="object"==typeof performance&&performance.now?performance:Date,tn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function en(){return Ye||(tn(nn),Ye=Je.now()+Ke)}function nn(){Ye=0}function rn(){this._call=this._time=this._next=null}function sn(t,e,n){var i=new rn;return i.restart(t,e,n),i}function on(){Ye=(Ge=Je.now())+Ke,Be=Ze=0;try{!function(){en(),++Be;for(var t,e=Ue;e;)(t=Ye-e._time)>=0&&e._call.call(null,t),e=e._next;--Be}()}finally{Be=0,function(){for(var t,e,n=Ue,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ue=e);De=t,hn(i)}(),Ye=0}}function an(){var t=Je.now(),e=t-Ge;e>1e3&&(Ke-=e,Ge=t)}function hn(t){Be||(Ze&&(Ze=clearTimeout(Ze)),t-Ye>24?(t<1/0&&(Ze=setTimeout(on,t-Je.now()-Ke)),Xe&&(Xe=clearInterval(Xe))):(Xe||(Ge=Je.now(),Xe=setInterval(an,1e3)),Be=1,tn(on)))}function ln(t,e,n){var i=new rn;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i}rn.prototype=sn.prototype={constructor:rn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?en():+n)+(null==e?0:+e),this._next||De===this||(De?De._next=this:Ue=this,De=this),this._call=t,this._time=n,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};var un=R("start","end","cancel","interrupt"),cn=[];function fn(t,e,n,i,r,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(h){var l,u,c,f;if(1!==n.state)return a();for(l in r)if((f=r[l]).name===n.name){if(3===f.state)return ln(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(ln((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(h))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),l=0,u=-1;l<c;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),s=-1,o=i.length;++s<o;)i[s].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=sn((function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:un,tween:cn,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function pn(t,e){var n=gn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function dn(t,e){var n=gn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function gn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function mn(t,e){var n,i,r,s=t.__transition,o=!0;if(s){for(r in e=null==e?null:e+"",s)(n=s[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]):o=!1;o&&delete t.__transition}}var yn,vn,_n,bn,wn=180/Math.PI,xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function An(t,e,n,i,r,s){var o,a,h;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(h=t*n+e*i)&&(n-=t*h,i-=e*h),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,h/=a),t*i<e*n&&(t=-t,e=-e,h=-h,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*wn,skewX:Math.atan(h)*wn,scaleX:o,scaleY:a}}function Ln(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],h=[];return s=t(s),o=t(o),function(t,i,r,s,o,a){if(t!==r||i!==s){var h=o.push("translate(",null,e,null,n);a.push({i:h-4,x:Re(t,r)},{i:h-2,x:Re(i,s)})}else(r||s)&&o.push("translate("+r+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,h),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Re(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,o.rotate,a,h),function(t,e,n,s){t!==e?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Re(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,o.skewX,a,h),function(t,e,n,i,s,o){if(t!==n||e!==i){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Re(t,n)},{i:a-2,x:Re(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,h),s=o=null,function(t){for(var e,n=-1,i=h.length;++n<i;)a[(e=h[n]).i]=e.x(t);return a.join("")}}}var Sn=Ln((function(t){return"none"===t?xn:(yn||(yn=document.createElement("DIV"),vn=document.documentElement,_n=document.defaultView),yn.style.transform=t,t=_n.getComputedStyle(vn.appendChild(yn),null).getPropertyValue("transform"),vn.removeChild(yn),An(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Mn=Ln((function(t){return null==t?xn:(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",t),(t=bn.transform.baseVal.consolidate())?An((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):xn)}),", ",")",")");function En(t,e){var n,i;return function(){var r=dn(this,t),s=r.tween;if(s!==n)for(var o=0,a=(i=n=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function kn(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=dn(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},h=0,l=r.length;h<l;++h)if(r[h].name===e){r[h]=a;break}h===l&&r.push(a)}s.tween=r}}function Cn(t,e,n){var i=t._id;return t.each((function(){var t=dn(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return gn(t,i).value[e]}}function Nn(t,e){var n;return("number"==typeof e?Re:e instanceof de?Ne:(n=de(e))?(e=n,Ne):He)(t,e)}function Tn(t){return function(){this.removeAttribute(t)}}function On(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pn(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===i?r:r=e(i=o,n)}}function Rn(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i?r:r=e(i=o,n)}}function jn(t,e,n){var i,r,s;return function(){var o,a,h=n(this);if(null!=h)return(o=this.getAttribute(t))===(a=h+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,h));this.removeAttribute(t)}}function zn(t,e,n){var i,r,s;return function(){var o,a,h=n(this);if(null!=h)return(o=this.getAttributeNS(t.space,t.local))===(a=h+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,h));this.removeAttributeNS(t.space,t.local)}}function Fn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Hn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qn(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Hn(t,r)),n}return r._value=e,r}function $n(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Fn(t,r)),n}return r._value=e,r}function Vn(t,e){return function(){pn(this,t).delay=+e.apply(this,arguments)}}function Qn(t,e){return e=+e,function(){pn(this,t).delay=e}}function Wn(t,e){return function(){dn(this,t).duration=+e.apply(this,arguments)}}function In(t,e){return e=+e,function(){dn(this,t).duration=e}}function Un(t,e){if("function"!=typeof e)throw new Error;return function(){dn(this,t).ease=e}}function Dn(t,e,n){var i,r,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?pn:dn;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}var Bn=Ut.prototype.constructor;function Zn(t){return function(){this.style.removeProperty(t)}}function Xn(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Gn(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Xn(t,s,n)),i}return s._value=e,s}function Yn(t){return function(e){this.textContent=t.call(this,e)}}function Kn(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Yn(i)),e}return i._value=t,i}var Jn=0;function ti(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ei(){return++Jn}var ni=Ut.prototype;ti.prototype=function(t){return Ut().transition(t)}.prototype={constructor:ti,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=z(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a,h,l=i[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f])&&(h=t.call(a,a.__data__,f,l))&&("__data__"in a&&(h.__data__=a.__data__),c[f]=h,fn(c[f],e,n,f,c,gn(a,n)));return new ti(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=H(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var h,l=i[a],u=l.length,c=0;c<u;++c)if(h=l[c]){for(var f,p=t.call(h,h.__data__,c,l),d=gn(h,n),g=0,m=p.length;g<m;++g)(f=p[g])&&fn(f,e,n,g,p,d);s.push(p),o.push(h)}return new ti(s,o,e,n)},filter:function(t){"function"!=typeof t&&(t=q(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,h=i[r]=[],l=0;l<a;++l)(s=o[l])&&t.call(s,s.__data__,l,o)&&h.push(s);return new ti(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var h,l=e[a],u=n[a],c=l.length,f=o[a]=new Array(c),p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<i;++a)o[a]=e[a];return new ti(o,this._parents,this._name,this._id)},selection:function(){return new Bn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ei(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],h=a.length,l=0;l<h;++l)if(o=a[l]){var u=gn(o,e);fn(o,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ti(i,this._parents,t,n)},call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:function(t,e){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(t):this.each(Dn(n,t,e))},attr:function(t,e){var n=B(t),i="transform"===n?Mn:Nn;return this.attrTween(t,"function"==typeof e?(n.local?zn:jn)(n,i,Cn(this,"attr."+t,e)):null==e?(n.local?On:Tn)(n):(n.local?Rn:Pn)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=B(t);return this.tween(n,(i.local?qn:$n)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Sn:Nn;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var s=rt(this,t),o=(this.style.removeProperty(t),rt(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}(t,i)).on("end.style."+t,Zn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,s;return function(){var o=rt(this,t),a=n(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=rt(this,t)),o===h?null:o===i&&h===r?s:(r=h,s=e(i=o,a))}}(t,i,Cn(this,"style."+t,e))).each(function(t,e){var n,i,r,s,o="style."+e,a="end."+o;return function(){var h=dn(this,t),l=h.on,u=null==h.value[o]?s||(s=Zn(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(a,r=u),h.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,s=n+"";return function(){var o=rt(this,t);return o===s?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Gn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Cn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Kn(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=gn(this.node(),n).tween,s=0,o=r.length;s<o;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?En:kn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vn:Qn)(e,t)):gn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wn:In)(e,t)):gn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Un(e,t)):gn(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(s,o){var a={value:o},h={value:function(){0==--r&&s()}};n.each((function(){var n=dn(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),n.on=e}))}))}};var ii={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ri(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ii.time=en(),ii;return n}function si(t){return function(){return t}}function oi(t,e,n){this.target=t,this.type=e,this.selection=n}function ai(){Ot.stopImmediatePropagation()}function hi(){Ot.preventDefault(),Ot.stopImmediatePropagation()}Ut.prototype.interrupt=function(t){return this.each((function(){mn(this,t)}))},Ut.prototype.transition=function(t){var e,n;t instanceof ti?(e=t._id,t=t._name):(e=ei(),(n=ii).time=en(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],h=a.length,l=0;l<h;++l)(o=a[l])&&fn(o,t,e,l,a,n||ri(o,e));return new ti(i,this._parents,t,e)};var li={name:"drag"},ui={name:"space"},ci={name:"handle"},fi={name:"center"};function pi(t){return[+t[0],+t[1]]}function di(t){return[pi(t[0]),pi(t[1])]}function gi(t){return function(e){return We(e,Ot.touches,t)}}var mi={name:"x",handles:["w","e"].map(Ai),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},yi={name:"y",handles:["n","s"].map(Ai),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},vi=(["n","w","e","s","nw","ne","sw","se"].map(Ai),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),_i={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},bi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},wi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},xi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ai(t){return{type:t}}function Li(){return!Ot.ctrlKey&&!Ot.button}function Si(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Mi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ei(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ki(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}Math.cos,Math.sin,Math.PI,Math.max,Array.prototype.slice;var Ci="$";function Ni(){}function Ti(t,e){var n=new Ni;if(t instanceof Ni)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,s=t.length;if(null==e)for(;++r<s;)n.set(r,t[r]);else for(;++r<s;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Oi(){}Ni.prototype=Ti.prototype={constructor:Ni,has:function(t){return Ci+t in this},get:function(t){return this[Ci+t]},set:function(t,e){return this[Ci+t]=e,this},remove:function(t){var e=Ci+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Ci&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Ci&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Ci&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Ci&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Ci&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ci)return!1;return!0},each:function(t){for(var e in this)e[0]===Ci&&t(this[e],e.slice(1),this)}};var Pi=Ti.prototype;function Ri(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ji(t){return(t=Ri(Math.abs(t)))?t[1]:NaN}Oi.prototype=function(t,e){var n=new Oi;if(t instanceof Oi)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:Oi,has:Pi.has,add:function(t){return this[Ci+(t+="")]=t,this},remove:Pi.remove,clear:Pi.clear,values:Pi.keys,size:Pi.size,empty:Pi.empty,each:Pi.each},Array.prototype.slice,Math.PI,Math.sqrt(5);var zi,Fi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hi(t){if(!(e=Fi.exec(t)))throw new Error("invalid format: "+t);var e;return new qi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function $i(t,e){var n=Ri(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Hi.prototype=qi.prototype,qi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Vi={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return $i(100*t,e)},r:$i,s:function(t,e){var n=Ri(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(zi=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ri(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Qi(t){return t}var Wi,Ii,Ui,Di=Array.prototype.map,Bi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zi(){return Math.random()}Wi=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Qi:(e=Di.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],o=0,a=e[0],h=0;r>0&&a>0&&(h+a+1>i&&(a=Math.max(1,i-h)),s.push(t.substring(r-=a,r+a)),!((h+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Qi:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Di.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=Hi(t)).fill,n=t.align,c=t.sign,f=t.symbol,p=t.zero,d=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Vi[v]||(void 0===m&&(m=12),y=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?r:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===f?s:/[%p]/.test(v)?h:"",w=Vi[v],x=/[defgprs%]/.test(v);function A(t){var r,s,h,f=_,A=b;if("c"===v)A=w(t)+A,t="";else{var L=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),L&&0==+t&&"+"!==c&&(L=!1),f=(L?"("===c?c:l:"-"===c||"("===c?"":c)+f,A=("s"===v?Bi[8+zi/3]:"")+A+(L&&"("===c?")":""),x)for(r=-1,s=t.length;++r<s;)if(48>(h=t.charCodeAt(r))||h>57){A=(46===h?o+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}g&&!p&&(t=i(t,1/0));var S=f.length+t.length+A.length,M=S<d?new Array(d-S+1).join(e):"";switch(g&&p&&(t=i(M+t,M.length?d-A.length:1/0),M=""),n){case"<":t=f+t+A+M;break;case"=":t=f+M+t+A;break;case"^":t=M.slice(0,S=M.length>>1)+f+t+A+M.slice(S);break;default:t=M+f+t+A}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),A.toString=function(){return t+""},A}return{format:c,formatPrefix:function(t,e){var n=c(((t=Hi(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(ji(e)/3))),r=Math.pow(10,-i),s=Bi[8+i/3];return function(t){return n(r*t)+s}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Ii=Wi.format,Ui=Wi.formatPrefix,function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Zi);const Xi=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var s;if(null!=i)s=i,i=null;else do{i=2*e()-1,s=2*e()-1,r=i*i+s*s}while(!r||r>1);return t+n*s*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(Zi),Gi=(function t(e){function n(){var t=Xi.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Zi),function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(Zi));(function t(e){function n(t){var n=Gi.source(e)(t);return function(){return n()/t}}return n.source=t,n})(Zi),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Zi);var Yi=Array.prototype,Ki=Yi.map,Ji=Yi.slice;function tr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function er(t){return+t}var nr=[0,1];function ir(t){return t}function rr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function sr(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function or(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=rr(r,i),s=n(o,s)):(i=rr(i,r),s=n(s,o)),function(t){return s(i(t))}}function ar(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=rr(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=f(t,e,1,i)-1;return s[n](r[n](e))}}function hr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lr(t,e){return function(){var t,e,n,i,r,s,o=nr,a=nr,h=$e,l=ir;function u(){return i=Math.min(o.length,a.length)>2?ar:or,r=s=null,c}function c(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),a,h)))(t(l(e)))}return c.invert=function(n){return l(e((s||(s=i(a,o.map(t),Re)))(n)))},c.domain=function(t){return arguments.length?(o=Ki.call(t,er),l===ir||(l=sr(o)),u()):o.slice()},c.range=function(t){return arguments.length?(a=Ji.call(t),u()):a.slice()},c.rangeRound=function(t){return a=Ji.call(t),h=tr,u()},c.clamp=function(t){return arguments.length?(l=t?sr(o):ir,c):l!==ir},c.interpolate=function(t){return arguments.length?(h=t,u()):h},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,i){return t=n,e=i,u()}}()(t,e)}function ur(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function cr(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,s,o,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=y(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++a<r;)s[a]=(t-a)/o;return i&&s.reverse(),s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var r,s=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=d?r*=10:s>=g?r*=5:s>=m&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Hi(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ji(e)/3)))-ji(Math.abs(t)))}(s,o))||(i.precision=r),Ui(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ji(e)-ji(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-ji(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return Ii(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),s=0,o=r.length-1,a=r[s],h=r[o];return h<a&&(i=a,a=h,h=i,i=s,s=o,o=i),(i=y(a,h,n))>0?i=y(a=Math.floor(a/i)*i,h=Math.ceil(h/i)*i,n):i<0&&(i=y(a=Math.ceil(a*i)/i,h=Math.floor(h*i)/i,n)),i>0?(r[s]=Math.floor(a/i)*i,r[o]=Math.ceil(h/i)*i,e(r)):i<0&&(r[s]=Math.ceil(a*i)/i,r[o]=Math.floor(h*i)/i,e(r)),t},t}function fr(){var t=lr(ir,ir);return t.copy=function(){return hr(t,fr())},ur.apply(t,arguments),cr(t)}var pr=Math.PI,dr=2*pr,gr=1e-6,mr=dr-gr;function yr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vr(){return new yr}yr.prototype=vr.prototype={constructor:yr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,o=this._y1,a=n-t,h=i-e,l=s-t,u=o-e,c=l*l+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>gr)if(Math.abs(u*a-h*l)>gr&&r){var f=n-s,p=i-o,d=a*a+h*h,g=f*f+p*p,m=Math.sqrt(d),y=Math.sqrt(c),v=r*Math.tan((pr-Math.acos((d+c-g)/(2*m*y)))/2),_=v/y,b=v/m;Math.abs(_-1)>gr&&(this._+="L"+(t+_*l)+","+(e+_*u)),this._+="A"+r+","+r+",0,0,"+ +(u*f>l*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(i),a=n*Math.sin(i),h=t+o,l=e+a,u=1^s,c=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+l:(Math.abs(this._x1-h)>gr||Math.abs(this._y1-l)>gr)&&(this._+="L"+h+","+l),n&&(c<0&&(c=c%dr+dr),c>mr?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=h)+","+(this._y1=l):c>gr&&(this._+="A"+n+","+n+",0,"+ +(c>=pr)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const _r=vr;function br(t){return function(){return t}}function wr(t){this._context=t}function xr(t){return new wr(t)}function Ar(t){return t[0]}function Lr(t){return t[1]}function Sr(){this._=null}function Mr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Er(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function kr(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Cr(t){for(;t.L;)t=t.L;return t}wr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Sr.prototype={constructor:Sr,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Cr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Er(this,n),n=(t=n).U),n.C=!1,i.C=!0,kr(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(kr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Er(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,s=t.L,o=t.R;if(n=s?o?Cr(o):s:o,r?r.L===t?r.L=n:r.R=n:this._=n,s&&o?(i=n.C,n.C=t.C,n.L=s,s.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Er(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,kr(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Er(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,kr(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Er(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,kr(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};const Nr=Sr;function Tr(t,e,n,i){var r=[null,null],s=es.push(r)-1;return r.left=t,r.right=e,n&&Pr(r,t,e,n),i&&Pr(r,e,t,i),Jr[t.index].halfedges.push(s),Jr[e.index].halfedges.push(s),r}function Or(t,e,n){var i=[e,n];return i.left=t,i}function Pr(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Rr(t,e,n,i,r){var s,o=t[0],a=t[1],h=o[0],l=o[1],u=0,c=1,f=a[0]-h,p=a[1]-l;if(s=e-h,f||!(s>0)){if(s/=f,f<0){if(s<u)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>u&&(u=s)}if(s=i-h,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>u&&(u=s)}else if(f>0){if(s<u)return;s<c&&(c=s)}if(s=n-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>u&&(u=s)}if(s=r-l,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<c&&(c=s)}return!(u>0||c<1)||(u>0&&(t[0]=[h+u*f,l+u*p]),c<1&&(t[1]=[h+c*f,l+c*p]),!0)}}}}}function jr(t,e,n,i,r){var s=t[1];if(s)return!0;var o,a,h=t[0],l=t.left,u=t.right,c=l[0],f=l[1],p=u[0],d=u[1],g=(c+p)/2,m=(f+d)/2;if(d===f){if(g<e||g>=i)return;if(c>p){if(h){if(h[1]>=r)return}else h=[g,n];s=[g,r]}else{if(h){if(h[1]<n)return}else h=[g,r];s=[g,n]}}else if(a=m-(o=(c-p)/(d-f))*g,o<-1||o>1)if(c>p){if(h){if(h[1]>=r)return}else h=[(n-a)/o,n];s=[(r-a)/o,r]}else{if(h){if(h[1]<n)return}else h=[(r-a)/o,r];s=[(n-a)/o,n]}else if(f<d){if(h){if(h[0]>=i)return}else h=[e,o*e+a];s=[i,o*i+a]}else{if(h){if(h[0]<e)return}else h=[i,o*i+a];s=[e,o*e+a]}return t[0]=h,t[1]=s,!0}function zr(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Fr(t,e){return e[+(e.left!==t.site)]}function Hr(t,e){return e[+(e.left===t.site)]}var qr,$r=[];function Vr(){Mr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,s=n.site;if(i!==s){var o=r[0],a=r[1],h=i[0]-o,l=i[1]-a,u=s[0]-o,c=s[1]-a,f=2*(h*c-l*u);if(!(f>=-is)){var p=h*h+l*l,d=u*u+c*c,g=(c*p-l*d)/f,m=(h*d-u*p)/f,y=$r.pop()||new Vr;y.arc=t,y.site=r,y.x=g+o,y.y=(y.cy=m+a)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,_=ts._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}ts.insert(v,y),v||(qr=y)}}}}function Wr(t){var e=t.circle;e&&(e.P||(qr=e.N),ts.remove(e),$r.push(e),Mr(e),t.circle=null)}var Ir=[];function Ur(){Mr(this),this.edge=this.site=this.circle=null}function Dr(t){var e=Ir.pop()||new Ur;return e.site=t,e}function Br(t){Wr(t),Kr.remove(t),Ir.push(t),Mr(t)}function Zr(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],s=t.P,o=t.N,a=[t];Br(t);for(var h=s;h.circle&&Math.abs(n-h.circle.x)<ns&&Math.abs(i-h.circle.cy)<ns;)s=h.P,a.unshift(h),Br(h),h=s;a.unshift(h),Wr(h);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<ns&&Math.abs(i-l.circle.cy)<ns;)o=l.N,a.push(l),Br(l),l=o;a.push(l),Wr(l);var u,c=a.length;for(u=1;u<c;++u)l=a[u],h=a[u-1],Pr(l.edge,h.site,l.site,r);h=a[0],(l=a[c-1]).edge=Tr(h.site,l.site,null,r),Qr(h),Qr(l)}function Xr(t){for(var e,n,i,r,s=t[0],o=t[1],a=Kr._;a;)if((i=Gr(a,o)-s)>ns)a=a.L;else{if(!((r=s-Yr(a,o))>ns)){i>-ns?(e=a.P,n=a):r>-ns?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Jr[t.index]={site:t,halfedges:[]}}(t);var h=Dr(t);if(Kr.insert(e,h),e||n){if(e===n)return Wr(e),n=Dr(e.site),Kr.insert(h,n),h.edge=n.edge=Tr(e.site,h.site),Qr(e),void Qr(n);if(n){Wr(e),Wr(n);var l=e.site,u=l[0],c=l[1],f=t[0]-u,p=t[1]-c,d=n.site,g=d[0]-u,m=d[1]-c,y=2*(f*m-p*g),v=f*f+p*p,_=g*g+m*m,b=[(m*v-p*_)/y+u,(f*_-g*v)/y+c];Pr(n.edge,l,d,b),h.edge=Tr(l,t,null,b),n.edge=Tr(t,d,null,b),Qr(e),Qr(n)}else h.edge=Tr(e.site,h.site)}}function Gr(t,e){var n=t.site,i=n[0],r=n[1],s=r-e;if(!s)return i;var o=t.P;if(!o)return-1/0;var a=(n=o.site)[0],h=n[1],l=h-e;if(!l)return a;var u=a-i,c=1/s-1/l,f=u/l;return c?(-f+Math.sqrt(f*f-2*c*(u*u/(-2*l)-h+l/2+r-s/2)))/c+i:(i+a)/2}function Yr(t,e){var n=t.N;if(n)return Gr(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Kr,Jr,ts,es,ns=1e-6,is=1e-12;function rs(t,e){return e[1]-t[1]||e[0]-t[0]}function ss(t,e){var n,i,r,s=t.sort(rs).pop();for(es=[],Jr=new Array(t.length),Kr=new Nr,ts=new Nr;;)if(r=qr,s&&(!r||s[1]<r.y||s[1]===r.y&&s[0]<r.x))s[0]===n&&s[1]===i||(Xr(s),n=s[0],i=s[1]),s=t.pop();else{if(!r)break;Zr(r.arc)}if(function(){for(var t,e,n,i,r=0,s=Jr.length;r<s;++r)if((t=Jr[r])&&(i=(e=t.halfedges).length)){var o=new Array(i),a=new Array(i);for(n=0;n<i;++n)o[n]=n,a[n]=zr(t,es[e[n]]);for(o.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[o[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var o=+e[0][0],a=+e[0][1],h=+e[1][0],l=+e[1][1];!function(t,e,n,i){for(var r,s=es.length;s--;)jr(r=es[s],t,e,n,i)&&Rr(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>ns||Math.abs(r[0][1]-r[1][1])>ns)||delete es[s]}(o,a,h,l),function(t,e,n,i){var r,s,o,a,h,l,u,c,f,p,d,g,m=Jr.length,y=!0;for(r=0;r<m;++r)if(s=Jr[r]){for(o=s.site,a=(h=s.halfedges).length;a--;)es[h[a]]||h.splice(a,1);for(a=0,l=h.length;a<l;)d=(p=Hr(s,es[h[a]]))[0],g=p[1],c=(u=Fr(s,es[h[++a%l]]))[0],f=u[1],(Math.abs(d-c)>ns||Math.abs(g-f)>ns)&&(h.splice(a,0,es.push(Or(o,p,Math.abs(d-t)<ns&&i-g>ns?[t,Math.abs(c-t)<ns?f:i]:Math.abs(g-i)<ns&&n-d>ns?[Math.abs(f-i)<ns?c:n,i]:Math.abs(d-n)<ns&&g-e>ns?[n,Math.abs(c-n)<ns?f:e]:Math.abs(g-e)<ns&&d-t>ns?[Math.abs(f-e)<ns?c:t,e]:null))-1),++l);l&&(y=!1)}if(y){var v,_,b,w=1/0;for(r=0,y=null;r<m;++r)(s=Jr[r])&&(b=(v=(o=s.site)[0]-t)*v+(_=o[1]-e)*_)<w&&(w=b,y=s);if(y){var x=[t,e],A=[t,i],L=[n,i],S=[n,e];y.halfedges.push(es.push(Or(o=y.site,x,A))-1,es.push(Or(o,A,L))-1,es.push(Or(o,L,S))-1,es.push(Or(o,S,x))-1)}}for(r=0;r<m;++r)(s=Jr[r])&&(s.halfedges.length||delete Jr[r])}(o,a,h,l)}this.edges=es,this.cells=Jr,Kr=ts=es=Jr=null}ss.prototype={constructor:ss,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Fr(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(s=(r=n.halfedges).length)for(var r,s,o,a,h,l,u=n.site,c=-1,f=e[r[s-1]],p=f.left===u?f.right:f.left;++c<s;)o=p,p=(f=e[r[c]]).left===u?f.right:f.left,o&&p&&i<o.index&&i<p.index&&(h=o,l=p,((a=u)[0]-l[0])*(h[1]-a[1])-(a[0]-h[0])*(l[1]-a[1])<0)&&t.push([u.data,o.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,s=this,o=s._found||0,a=s.cells.length;!(r=s.cells[o]);)if(++o>=a)return null;var h=t-r.site[0],l=e-r.site[1],u=h*h+l*l;do{r=s.cells[i=o],o=null,r.halfedges.forEach((function(n){var i=s.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var h=t-a[0],l=e-a[1],c=h*h+l*l;c<u&&(u=c,o=a.index)}}))}while(null!==o);return s._found=i,null==n||u<=n*n?r.site:null}};var os=Math.SQRT2;function as(t){return((t=Math.exp(t))+1/t)/2}function hs(t,e){var n,i,r=t[0],s=t[1],o=t[2],a=e[0],h=e[1],l=e[2],u=a-r,c=h-s,f=u*u+c*c;if(f<1e-12)i=Math.log(l/o)/os,n=function(t){return[r+t*u,s+t*c,o*Math.exp(os*t*i)]};else{var p=Math.sqrt(f),d=(l*l-o*o+4*f)/(2*o*2*p),g=(l*l-o*o-4*f)/(2*l*2*p),m=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);i=(y-m)/os,n=function(t){var e,n=t*i,a=as(m),h=o/(2*p)*(a*(e=os*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[r+h*u,s+h*c,o*a/as(os*n+m)]}}return n.duration=1e3*i,n}function ls(t){return function(){return t}}function us(t,e,n){this.target=t,this.type=e,this.transform=n}function cs(t,e,n){this.k=t,this.x=e,this.y=n}cs.prototype={constructor:cs,scale:function(t){return 1===t?this:new cs(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new cs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fs=new cs(1,0,0);function ps(){Ot.stopImmediatePropagation()}function ds(){Ot.preventDefault(),Ot.stopImmediatePropagation()}function gs(){return!Ot.ctrlKey&&!Ot.button}function ms(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ys(){return this.__zoom||fs}function vs(){return-Ot.deltaY*(1===Ot.deltaMode?.05:Ot.deltaMode?1:.002)}function _s(){return navigator.maxTouchPoints||"ontouchstart"in this}function bs(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}cs.prototype;const ws=function(t){return t!=t},xs=function(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):function(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}(t,ws,n)},As="object"==typeof global&&global&&global.Object===Object&&global;var Ls="object"==typeof self&&self&&self.Object===Object&&self;const Ss=As||Ls||Function("return this")(),Ms=Ss.Symbol;var Es=Object.prototype,ks=Es.hasOwnProperty,Cs=Es.toString,Ns=Ms?Ms.toStringTag:void 0;var Ts=Object.prototype.toString;var Os=Ms?Ms.toStringTag:void 0;const Ps=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Os&&Os in Object(t)?function(t){var e=ks.call(t,Ns),n=t[Ns];try{t[Ns]=void 0;var i=!0}catch(t){}var r=Cs.call(t);return i&&(e?t[Ns]=n:delete t[Ns]),r}(t):function(t){return Ts.call(t)}(t)},Rs=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},js=function(t){if(!Rs(t))return!1;var e=Ps(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},zs=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Fs=function(t){return null!=t&&zs(t.length)&&!js(t)},Hs=Array.isArray,qs=function(t){return null!=t&&"object"==typeof t},$s=function(t){return"symbol"==typeof t||qs(t)&&"[object Symbol]"==Ps(t)};var Vs=/^\s+|\s+$/g,Qs=/^[-+]0x[0-9a-f]+$/i,Ws=/^0b[01]+$/i,Is=/^0o[0-7]+$/i,Us=parseInt;const Ds=function(t){return t?Infinity===(t=function(t){if("number"==typeof t)return t;if($s(t))return NaN;if(Rs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Rs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Vs,"");var n=Ws.test(t);return n||Is.test(t)?Us(t.slice(2),n?2:8):Qs.test(t)?NaN:+t}(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Bs=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},Zs=function(t){return qs(t)&&"[object Arguments]"==Ps(t)};var Xs=Object.prototype,Gs=Xs.hasOwnProperty,Ys=Xs.propertyIsEnumerable;const Ks=Zs(function(){return arguments}())?Zs:function(t){return qs(t)&&Gs.call(t,"callee")&&!Ys.call(t,"callee")};var Js="object"==typeof exports&&exports&&!exports.nodeType&&exports,to=Js&&"object"==typeof module&&module&&!module.nodeType&&module,eo=to&&to.exports===Js?Ss.Buffer:void 0;const no=(eo?eo.isBuffer:void 0)||function(){return!1};var io=/^(?:0|[1-9]\d*)$/;const ro=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&io.test(t))&&t>-1&&t%1==0&&t<e};var so={};so["[object Float32Array]"]=so["[object Float64Array]"]=so["[object Int8Array]"]=so["[object Int16Array]"]=so["[object Int32Array]"]=so["[object Uint8Array]"]=so["[object Uint8ClampedArray]"]=so["[object Uint16Array]"]=so["[object Uint32Array]"]=!0,so["[object Arguments]"]=so["[object Array]"]=so["[object ArrayBuffer]"]=so["[object Boolean]"]=so["[object DataView]"]=so["[object Date]"]=so["[object Error]"]=so["[object Function]"]=so["[object Map]"]=so["[object Number]"]=so["[object Object]"]=so["[object RegExp]"]=so["[object Set]"]=so["[object String]"]=so["[object WeakMap]"]=!1;const oo=function(t){return function(e){return t(e)}};var ao="object"==typeof exports&&exports&&!exports.nodeType&&exports,ho=ao&&"object"==typeof module&&module&&!module.nodeType&&module,lo=ho&&ho.exports===ao&&As.process,uo=function(){try{return ho&&ho.require&&ho.require("util").types||lo&&lo.binding&&lo.binding("util")}catch(t){}}(),co=uo&&uo.isTypedArray;const fo=co?oo(co):function(t){return qs(t)&&zs(t.length)&&!!so[Ps(t)]};var po=Object.prototype.hasOwnProperty;const go=function(t,e){var n=Hs(t),i=!n&&Ks(t),r=!n&&!i&&no(t),s=!n&&!i&&!r&&fo(t),o=n||i||r||s,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],h=a.length;for(var l in t)!e&&!po.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ro(l,h))||a.push(l);return a};var mo=Object.prototype;const yo=(vo=Object.keys,_o=Object,function(t){return vo(_o(t))});var vo,_o,bo=Object.prototype.hasOwnProperty;const wo=function(t){if(!function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||mo)}(t))return yo(t);var e=[];for(var n in Object(t))bo.call(t,n)&&"constructor"!=n&&e.push(n);return e},xo=function(t){return Fs(t)?go(t):wo(t)},Ao=function(t){return null==t?[]:function(t,e){return Bs(e,(function(e){return t[e]}))}(t,xo(t))};var Lo=Math.max;const So=function(t,e,n,i){t=Fs(t)?t:Ao(t),n=n&&!i?function(t){var e=Ds(t),n=e%1;return e==e?n?e-n:e:0}(n):0;var r=t.length;return n<0&&(n=Lo(r+n,0)),function(t){return"string"==typeof t||!Hs(t)&&qs(t)&&"[object String]"==Ps(t)}(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&xs(t,e,n)>-1},Mo=Ss["__core-js_shared__"];var Eo,ko=(Eo=/[^.]+$/.exec(Mo&&Mo.keys&&Mo.keys.IE_PROTO||""))?"Symbol(src)_1."+Eo:"";var Co=Function.prototype.toString;const No=function(t){if(null!=t){try{return Co.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var To=/^\[object .+?Constructor\]$/,Oo=Function.prototype,Po=Object.prototype,Ro=Oo.toString,jo=Po.hasOwnProperty,zo=RegExp("^"+Ro.call(jo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Fo=function(t){return!(!Rs(t)||function(t){return!!ko&&ko in t}(t))&&(js(t)?zo:To).test(No(t))},Ho=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Fo(n)?n:void 0},qo=function(){try{var t=Ho(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$o=function(t,e,n,i){for(var r=-1,s=null==t?0:t.length;++r<s;){var o=t[r];e(i,o,n(o),t)}return i},Vo=function(t,e,n){for(var i=-1,r=Object(t),s=n(t),o=s.length;o--;){var a=s[++i];if(!1===e(r[a],a,r))break}return t},Qo=function(t,e){if(null==t)return t;if(!Fs(t))return function(t,e){return t&&Vo(t,e,xo)}(t,e);for(var n=t.length,i=-1,r=Object(t);++i<n&&!1!==e(r[i],i,r););return t},Wo=function(t,e,n,i){return Qo(t,(function(t,r,s){e(i,t,n(t),s)})),i},Io=function(t,e){return t===e||t!=t&&e!=e},Uo=function(t,e){for(var n=t.length;n--;)if(Io(t[n][0],e))return n;return-1};var Do=Array.prototype.splice;function Bo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Bo.prototype.clear=function(){this.__data__=[],this.size=0},Bo.prototype.delete=function(t){var e=this.__data__,n=Uo(e,t);return!(n<0||(n==e.length-1?e.pop():Do.call(e,n,1),--this.size,0))},Bo.prototype.get=function(t){var e=this.__data__,n=Uo(e,t);return n<0?void 0:e[n][1]},Bo.prototype.has=function(t){return Uo(this.__data__,t)>-1},Bo.prototype.set=function(t,e){var n=this.__data__,i=Uo(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const Zo=Bo,Xo=Ho(Ss,"Map"),Go=Ho(Object,"create");var Yo=Object.prototype.hasOwnProperty;var Ko=Object.prototype.hasOwnProperty;function Jo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Jo.prototype.clear=function(){this.__data__=Go?Go(null):{},this.size=0},Jo.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Jo.prototype.get=function(t){var e=this.__data__;if(Go){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Yo.call(e,t)?e[t]:void 0},Jo.prototype.has=function(t){var e=this.__data__;return Go?void 0!==e[t]:Ko.call(e,t)},Jo.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Go&&void 0===e?"__lodash_hash_undefined__":e,this};const ta=Jo,ea=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function na(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}na.prototype.clear=function(){this.size=0,this.__data__={hash:new ta,map:new(Xo||Zo),string:new ta}},na.prototype.delete=function(t){var e=ea(this,t).delete(t);return this.size-=e?1:0,e},na.prototype.get=function(t){return ea(this,t).get(t)},na.prototype.has=function(t){return ea(this,t).has(t)},na.prototype.set=function(t,e){var n=ea(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const ia=na;function ra(t){var e=this.__data__=new Zo(t);this.size=e.size}ra.prototype.clear=function(){this.__data__=new Zo,this.size=0},ra.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ra.prototype.get=function(t){return this.__data__.get(t)},ra.prototype.has=function(t){return this.__data__.has(t)},ra.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Zo){var i=n.__data__;if(!Xo||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ia(i)}return n.set(t,e),this.size=n.size,this};const sa=ra;function oa(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ia;++e<n;)this.add(t[e])}oa.prototype.add=oa.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},oa.prototype.has=function(t){return this.__data__.has(t)};const aa=oa,ha=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},la=function(t,e){return t.has(e)},ua=function(t,e,n,i,r,s){var o=1&n,a=t.length,h=e.length;if(a!=h&&!(o&&h>a))return!1;var l=s.get(t),u=s.get(e);if(l&&u)return l==e&&u==t;var c=-1,f=!0,p=2&n?new aa:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var d=t[c],g=e[c];if(i)var m=o?i(g,d,c,e,t,s):i(d,g,c,t,e,s);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!ha(e,(function(t,e){if(!la(p,e)&&(d===t||r(d,t,n,i,s)))return p.push(e)}))){f=!1;break}}else if(d!==g&&!r(d,g,n,i,s)){f=!1;break}}return s.delete(t),s.delete(e),f},ca=Ss.Uint8Array,fa=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},pa=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var da=Ms?Ms.prototype:void 0,ga=da?da.valueOf:void 0;const ma=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t};var ya=Object.prototype.propertyIsEnumerable,va=Object.getOwnPropertySymbols;const _a=va?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}(va(t),(function(e){return ya.call(t,e)})))}:function(){return[]},ba=function(t){return function(t,e,n){var i=e(t);return Hs(t)?i:ma(i,n(t))}(t,xo,_a)};var wa=Object.prototype.hasOwnProperty;const xa=Ho(Ss,"DataView"),Aa=Ho(Ss,"Promise"),La=Ho(Ss,"Set"),Sa=Ho(Ss,"WeakMap");var Ma="[object Map]",Ea="[object Promise]",ka="[object Set]",Ca="[object WeakMap]",Na="[object DataView]",Ta=No(xa),Oa=No(Xo),Pa=No(Aa),Ra=No(La),ja=No(Sa),za=Ps;(xa&&za(new xa(new ArrayBuffer(1)))!=Na||Xo&&za(new Xo)!=Ma||Aa&&za(Aa.resolve())!=Ea||La&&za(new La)!=ka||Sa&&za(new Sa)!=Ca)&&(za=function(t){var e=Ps(t),n="[object Object]"==e?t.constructor:void 0,i=n?No(n):"";if(i)switch(i){case Ta:return Na;case Oa:return Ma;case Pa:return Ea;case Ra:return ka;case ja:return Ca}return e});const Fa=za;var Ha="[object Arguments]",qa="[object Array]",$a="[object Object]",Va=Object.prototype.hasOwnProperty;const Qa=function(t,e,n,i,r,s){var o=Hs(t),a=Hs(e),h=o?qa:Fa(t),l=a?qa:Fa(e),u=(h=h==Ha?$a:h)==$a,c=(l=l==Ha?$a:l)==$a,f=h==l;if(f&&no(t)){if(!no(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new sa),o||fo(t)?ua(t,e,n,i,r,s):function(t,e,n,i,r,s,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new ca(t),new ca(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Io(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=fa;case"[object Set]":var h=1&i;if(a||(a=pa),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;i|=2,o.set(t,e);var u=ua(a(t),a(e),i,r,s,o);return o.delete(t),u;case"[object Symbol]":if(ga)return ga.call(t)==ga.call(e)}return!1}(t,e,h,n,i,r,s);if(!(1&n)){var p=u&&Va.call(t,"__wrapped__"),d=c&&Va.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,m=d?e.value():e;return s||(s=new sa),r(g,m,n,i,s)}}return!!f&&(s||(s=new sa),function(t,e,n,i,r,s){var o=1&n,a=ba(t),h=a.length;if(h!=ba(e).length&&!o)return!1;for(var l=h;l--;){var u=a[l];if(!(o?u in e:wa.call(e,u)))return!1}var c=s.get(t),f=s.get(e);if(c&&f)return c==e&&f==t;var p=!0;s.set(t,e),s.set(e,t);for(var d=o;++l<h;){var g=t[u=a[l]],m=e[u];if(i)var y=o?i(m,g,u,e,t,s):i(g,m,u,t,e,s);if(!(void 0===y?g===m||r(g,m,n,i,s):y)){p=!1;break}d||(d="constructor"==u)}if(p&&!d){var v=t.constructor,_=e.constructor;v==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,r,s))},Wa=function t(e,n,i,r,s){return e===n||(null==e||null==n||!qs(e)&&!qs(n)?e!=e&&n!=n:Qa(e,n,i,r,t,s))},Ia=function(t){return t==t&&!Rs(t)},Ua=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Da=function(t){var e=function(t){for(var e=xo(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ia(r)]}return e}(t);return 1==e.length&&e[0][2]?Ua(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,i){var r=n.length,s=r,o=!i;if(null==t)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){var h=(a=n[r])[0],l=t[h],u=a[1];if(o&&a[2]){if(void 0===l&&!(h in t))return!1}else{var c=new sa;if(i)var f=i(l,u,h,t,e,c);if(!(void 0===f?Wa(u,l,3,i,c):f))return!1}}return!0}(n,t,e)}};var Ba=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Za=/^\w*$/;const Xa=function(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!$s(t))||Za.test(t)||!Ba.test(t)||null!=e&&t in Object(e)};function Ga(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(Ga.Cache||ia),n}Ga.Cache=ia;var Ya=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ka=/\\(\\)?/g;const Ja=(th=Ga((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ya,(function(t,n,i,r){e.push(i?r.replace(Ka,"$1"):n||t)})),e}),(function(t){return 500===eh.size&&eh.clear(),t})),eh=th.cache,th);var th,eh,nh=Ms?Ms.prototype:void 0,ih=nh?nh.toString:void 0;const rh=function t(e){if("string"==typeof e)return e;if(Hs(e))return Bs(e,t)+"";if($s(e))return ih?ih.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},sh=function(t){return null==t?"":rh(t)},oh=function(t,e){return Hs(t)?t:Xa(t,e)?[t]:Ja(sh(t))},ah=function(t){if("string"==typeof t||$s(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},hh=function(t,e){for(var n=0,i=(e=oh(e,t)).length;null!=t&&n<i;)t=t[ah(e[n++])];return n&&n==i?t:void 0},lh=function(t,e){return null!=t&&e in Object(t)},uh=function(t,e){return null!=t&&function(t,e,n){for(var i=-1,r=(e=oh(e,t)).length,s=!1;++i<r;){var o=ah(e[i]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++i!=r?s:!!(r=null==t?0:t.length)&&zs(r)&&ro(o,r)&&(Hs(t)||Ks(t))}(t,e,lh)},ch=function(t,e){return Xa(t)&&Ia(e)?Ua(ah(t),e):function(n){var i=function(t,e,n){var i=null==t?void 0:hh(t,e);return void 0===i?n:i}(n,t);return void 0===i&&i===e?uh(n,t):Wa(e,i,3)}},fh=function(t){return t},ph=function(t){return Xa(t)?(e=ah(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return hh(e,t)}}(t);var e};var dh=Object.prototype.hasOwnProperty;const gh=(mh=function(t,e,n){dh.call(t,n)?t[n].push(e):function(t,e,n){"__proto__"==e&&qo?qo(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}(t,n,[e])},function(t,e){var n=Hs(t)?$o:Wo,i=yh?yh():{};return n(t,mh,function(t){return"function"==typeof t?t:null==t?fh:"object"==typeof t?Hs(t)?ch(t[0],t[1]):Da(t):ph(t)}(e),i)});var mh,yh,vh=Ms?Ms.isConcatSpreadable:void 0;const _h=function(t){return Hs(t)||Ks(t)||!!(vh&&t&&t[vh])},bh=function t(e,n,i,r,s){var o=-1,a=e.length;for(i||(i=_h),s||(s=[]);++o<a;){var h=e[o];n>0&&i(h)?n>1?t(h,n-1,i,r,s):ma(s,h):r||(s[s.length]=h)}return s},wh=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var xh=Math.max;const Ah=function(t){return function(){return t}},Lh=qo?function(t,e){return qo(t,"toString",{configurable:!0,enumerable:!1,value:Ah(e),writable:!0})}:fh;var Sh=Date.now;const Mh=function(t){var e=0,n=0;return function(){var i=Sh(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Lh),Eh=function(t,e){return Mh(function(t,e,n){return e=xh(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=xh(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),wh(t,this,a)}}(t,e,fh),t+"")},kh=function(t,e){return!(null==t||!t.length)&&xs(t,e,0)>-1},Ch=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1},Nh=La&&1/pa(new La([,-0]))[1]==1/0?function(t){return new La(t)}:function(){},Th=function(t){return qs(t)&&Fs(t)},Oh=Eh((function(t){return function(t,e,n){var i=-1,r=kh,s=t.length,o=!0,a=[],h=a;if(n)o=!1,r=Ch;else if(s>=200){var l=e?null:Nh(t);if(l)return pa(l);o=!1,r=la,h=new aa}else h=e?[]:a;t:for(;++i<s;){var u=t[i],c=e?e(u):u;if(u=n||0!==u?u:0,o&&c==c){for(var f=h.length;f--;)if(h[f]===c)continue t;e&&h.push(c),a.push(u)}else r(h,c,n)||(h!==a&&h.push(c),a.push(u))}return a}(bh(t,1,Th,!0))}));var Ph=Math.min;const Rh=function(t){return Th(t)?t:[]},jh=Eh((function(t){var e=Bs(t,Rh);return e.length&&e[0]===t[0]?function(t,e,n){for(var i=n?Ch:kh,r=t[0].length,s=t.length,o=s,a=Array(s),h=1/0,l=[];o--;){var u=t[o];o&&e&&(u=Bs(u,oo(e))),h=Ph(u.length,h),a[o]=!n&&(e||r>=120&&u.length>=120)?new aa(o&&u):void 0}u=t[0];var c=-1,f=a[0];t:for(;++c<r&&l.length<h;){var p=u[c],d=e?e(p):p;if(p=n||0!==p?p:0,!(f?la(f,d):i(l,d,n))){for(o=s;--o;){var g=a[o];if(!(g?la(g,d):i(t[o],d,n)))continue t}f&&f.push(d),l.push(p)}}return l}(e):[]}));class zh{constructor({min:t=-1/0,max:e=1/0}={}){this.segments=[],this.max=e,this.min=t,this.regionString=null}encode(t=!1){return this.segments.map((({start:e,end:n})=>t?`${e}:${n}`:`${e===this.min?"":e}:${n===this.max?"":n}`)).join(",")}decode(t){void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((t=>{const[e,n,i]=t.split(":");if(void 0!==i)throw new Error(`there should be at most 1 ':' per region. Region: ${t}`);let r=e?Number(e):this.min,s=n?Number(n):this.max;if(r>s&&([r,s]=[s,r]),r<this.min&&(r=this.min),s>this.max&&(s=this.max),Number.isNaN(r))throw new Error(`The parsed value of ${e} is NaN. Region: ${t}`);if(Number.isNaN(s))throw new Error(`The parsed value of ${n} is NaN. Region: ${t}`);return{start:r,end:s}})):this.segments=[]}}const Fh=(t,e)=>t?e?`${t},${e}`:t:e,Hh=["left","right","top","bottom"],qh=Hh.map((t=>`margin${t}`)),$h=(t,e={initialValue:{top:0,bottom:0,left:0,right:0}})=>{class n extends t{constructor(){super(),this.margin=e.initialValue}static get observedAttributes(){return[...super.observedAttributes,...qh]}attributeChangedCallback(t,e,n){e!==n&&qh.includes(t)&&(this[t]=n),super.attributeChangedCallback(t,e,n)}}for(const t of Hh)Object.defineProperty(n.prototype,`margin${t}`,{get(){return this.margin[t]||0},set(e){this.margin[t]=+e}});return n};var Vh=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),Qh="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Wh=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ih="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Wh):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},Uh=["top","right","bottom","left","width","height","size","weight"],Dh="undefined"!=typeof MutationObserver,Bh=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function s(){n&&(n=!1,t()),i&&a()}function o(){Ih(s)}function a(){var t=Date.now();if(n){if(t-r<2)return;i=!0}else n=!0,i=!1,setTimeout(o,20);r=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Qh&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Dh?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Qh&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Uh.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Zh=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Xh=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Wh},Gh=el(0,0,0,0);function Yh(t){return parseFloat(t)||0}function Kh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Yh(t["border-"+n+"-width"])}),0)}var Jh="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Xh(t).SVGGraphicsElement}:function(t){return t instanceof Xh(t).SVGElement&&"function"==typeof t.getBBox};function tl(t){return Qh?Jh(t)?function(t){var e=t.getBBox();return el(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Gh;var i=Xh(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],s=t["padding-"+r];e[r]=Yh(s)}return e}(i),s=r.left+r.right,o=r.top+r.bottom,a=Yh(i.width),h=Yh(i.height);if("border-box"===i.boxSizing&&(Math.round(a+s)!==e&&(a-=Kh(i,"left","right")+s),Math.round(h+o)!==n&&(h-=Kh(i,"top","bottom")+o)),!function(t){return t===Xh(t).document.documentElement}(t)){var l=Math.round(a+s)-e,u=Math.round(h+o)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(h-=u)}return el(r.left,r.top,a,h)}(t):Gh}function el(t,e,n,i){return{x:t,y:e,width:n,height:i}}var nl=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=el(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=tl(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),il=function(t,e){var n,i,r,s,o,a,h,l=(i=(n=e).x,r=n.y,s=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(a.prototype),Zh(h,{x:i,y:r,width:s,height:o,top:r,right:i+s,bottom:o+r,left:i}),h);Zh(this,{target:t,contentRect:l})},rl=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Vh,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Xh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new nl(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Xh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new il(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),sl="undefined"!=typeof WeakMap?new WeakMap:new Vh,ol=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Bh.getInstance(),i=new rl(e,n,this);sl.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){ol.prototype[t]=function(){var e;return(e=sl.get(this))[t].apply(e,arguments)}}));const al=void 0!==Wh.ResizeObserver?Wh.ResizeObserver:ol;class hl extends HTMLElement{constructor(){super(),hl._polyfillElementClosest(),this._updateScaleDomain=this._updateScaleDomain.bind(this),this._initZoom=this._initZoom.bind(this),this.zoomed=this.zoomed.bind(this),this._applyZoomTranslation=this.applyZoomTranslation.bind(this),this._resetEventHandler=this._resetEventHandler.bind(this);let t=!1;this.applyZoomTranslation=()=>{t||(t=!0,requestAnimationFrame((()=>{t=!1,this._applyZoomTranslation()})))},this._onResize=this._onResize.bind(this),this._listenForResize=this._listenForResize.bind(this),this.trackHighlighter=new class{constructor({element:t,min:e,max:n}){this.element=t,this.region=new zh({min:e,max:n}),this.fixedHighlight=null}set max(t){this.region.max=t}setAttributesInElement(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight=`${this.element._highlightstart}:${this.element._highlightend}`,this.region.decode(Fh(this.fixedHighlight,this.element._highlight))))}setFloatAttribute(t,e){const n=parseFloat(e);this.element[`_${t}`]=Number.isNaN(n)?e:n}changedCallBack(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":`${Math.max(this.region.min,this.element._highlightstart)}:${Math.min(this.region.max,this.element._highlightend)}`;break;default:this.element._highlight=e}this.region.decode(Fh(this.fixedHighlight,this.element._highlight)),this.element.refresh()}setFixedHighlight(t){this.fixedHighlight=t,this.region.decode(Fh(t,this.element._highlight)),this.element.refresh()}appendHighlightTo(t){this.highlighted=t.append("g").attr("class","highlighted")}updateHighlight(){const t=this.highlighted.selectAll("rect").data(this.region.segments);t.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(t).attr("height",this.element._height).attr("x",(t=>this.element.getXFromSeqPosition(t.start))).attr("width",(t=>this.element.getSingleBaseWidth()*(t.end-t.start+1))),t.exit().remove()}}({element:this,min:1}),this.scrollFilter=new class{constructor(t){this.element=t,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}setElementScrollable(t){this.element.setAttribute("scrollable",t)}startResetScrollableTimer(){this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((()=>{this.setElementScrollable(!0),this.resetScrollableTimeout=null}),400)}blockScroll(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}isWheelEventInsideElement(t,e){const{height:n,width:i,x:r,y:s}=this.element.getBoundingClientRect();return t>r&&e<r+i&&e>s&&e<s+n}wheel({x:t,y:e,timeStamp:n}){this.isWheelEventInsideElement(t,e)?n<this.timeStampWheelOutside+400?this.blockScroll(n):this.setElementScrollable(!0):this.blockScroll(n)}}(this),this.wheelListener=t=>this.scrollFilter.wheel(t)}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(t=>{console.error(t)})),this.addEventListener("click",this._resetEventHandler),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}disconnectedCallback(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler),document.removeEventListener("wheel",this.wheelListener)}get width(){return this._width}set width(t){this._width=t}set height(t){this._height=t}get height(){return this._height}set length(t){this._length=t,this.trackHighlighter.max=t}get length(){return this._length}get xScale(){return this._xScale}set xScale(t){this._xScale=t}get zoom(){return this._zoom}set svg(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}get svg(){return this._svg}set fixedHighlight(t){this.trackHighlighter.setFixedHighlight(t)}getWidthWithMargins(){return this.width?this.width-this.margin.left-this.margin.right:0}_updateScaleDomain(){this.xScale=fr().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}_initZoom(){this._zoom=function(){var t,e,n=gs,i=ms,r=bs,s=vs,o=_s,a=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],l=250,u=hs,c=R("start","zoom","end"),f=500,p=0;function d(t){t.property("__zoom",ys).on("wheel.zoom",w).on("mousedown.zoom",x).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",L).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(a[0],Math.min(a[1],e)))===t.k?t:new cs(e,t.x,t.y)}function m(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new cs(t.k,i,r)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,e,n){t.on("start.zoom",(function(){_(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,s=_(t,r),o=i.apply(t,r),a=null==n?y(o):"function"==typeof n?n.apply(t,r):n,h=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=t.__zoom,c="function"==typeof e?e.apply(t,r):e,f=u(l.invert(a).concat(h/l.k),c.invert(a).concat(h/c.k));return function(t){if(1===t)t=c;else{var e=f(t),n=h/e[2];t=new cs(n,a[0]-e[0]*n,a[1]-e[1]*n)}s.zoom(null,t)}}))}function _(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function w(){if(n.apply(this,arguments)){var t=_(this,arguments),e=this.__zoom,i=Math.max(a[0],Math.min(a[1],e.k*Math.pow(2,s.apply(this,arguments)))),o=Ie(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[o,e.invert(o)],mn(this),t.start()}ds(),t.wheel=setTimeout(l,150),t.zoom("mouse",r(m(g(e,i),t.mouse[0],t.mouse[1]),t.extent,h))}function l(){t.wheel=null,t.end()}}function x(){if(!e&&n.apply(this,arguments)){var t=_(this,arguments,!0),i=Dt(Ot.view).on("mousemove.zoom",l,!0).on("mouseup.zoom",u,!0),s=Ie(this),o=Ot.clientX,a=Ot.clientY;Zt(Ot.view),ps(),t.mouse=[s,this.__zoom.invert(s)],mn(this),t.start()}function l(){if(ds(),!t.moved){var e=Ot.clientX-o,n=Ot.clientY-a;t.moved=e*e+n*n>p}t.zoom("mouse",r(m(t.that.__zoom,t.mouse[0]=Ie(t.that),t.mouse[1]),t.extent,h))}function u(){i.on("mousemove.zoom mouseup.zoom",null),Xt(Ot.view,t.moved),ds(),t.end()}}function A(){if(n.apply(this,arguments)){var t=this.__zoom,e=Ie(this),s=t.invert(e),o=t.k*(Ot.shiftKey?.5:2),a=r(m(g(t,o),e,s),i.apply(this,arguments),h);ds(),l>0?Dt(this).transition().duration(l).call(v,a,e):Dt(this).call(d.transform,a)}}function L(){if(n.apply(this,arguments)){var e,i,r,s,o=Ot.touches,a=o.length,h=_(this,arguments,Ot.changedTouches.length===a);for(ps(),i=0;i<a;++i)s=[s=We(this,o,(r=o[i]).identifier),this.__zoom.invert(s),r.identifier],h.touch0?h.touch1||h.touch0[2]===s[2]||(h.touch1=s,h.taps=0):(h.touch0=s,e=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(h.taps<2&&(t=setTimeout((function(){t=null}),f)),mn(this),h.start())}}function S(){if(this.__zooming){var e,n,i,s,o=_(this,arguments),a=Ot.changedTouches,l=a.length;for(ds(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<l;++e)i=We(this,a,(n=a[e]).identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=i);if(n=o.that.__zoom,o.touch1){var u=o.touch0[0],c=o.touch0[1],f=o.touch1[0],p=o.touch1[1],d=(d=f[0]-u[0])*d+(d=f[1]-u[1])*d,y=(y=p[0]-c[0])*y+(y=p[1]-c[1])*y;n=g(n,Math.sqrt(d/y)),i=[(u[0]+f[0])/2,(u[1]+f[1])/2],s=[(c[0]+p[0])/2,(c[1]+p[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],s=o.touch0[1]}o.zoom("touch",r(m(n,i,s),o.extent,h))}}function M(){if(this.__zooming){var t,n,i=_(this,arguments),r=Ot.changedTouches,s=r.length;for(ps(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),f),t=0;t<s;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var o=Dt(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return d.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",ys),t!==i?v(t,e,n):i.interrupt().each((function(){_(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},d.scaleBy=function(t,e,n){d.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n)},d.scaleTo=function(t,e,n){d.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,o=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,a=s.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return r(m(g(s,l),o,a),t,h)}),n)},d.translateBy=function(t,e,n){d.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),h)}))},d.translateTo=function(t,e,n,s){d.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,a=null==s?y(t):"function"==typeof s?s.apply(this,arguments):s;return r(fs.translate(a[0],a[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,h)}),s)},b.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Ht(new us(d,t,this.that.__zoom),c.apply,c,[t,this.that,this.args])}},d.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:ls(+t),d):s},d.filter=function(t){return arguments.length?(n="function"==typeof t?t:ls(!!t),d):n},d.touchable=function(t){return arguments.length?(o="function"==typeof t?t:ls(!!t),d):o},d.extent=function(t){return arguments.length?(i="function"==typeof t?t:ls([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),d):i},d.scaleExtent=function(t){return arguments.length?(a[0]=+t[0],a[1]=+t[1],d):[a[0],a[1]]},d.translateExtent=function(t){return arguments.length?(h[0][0]=+t[0][0],h[1][0]=+t[1][0],h[0][1]=+t[0][1],h[1][1]=+t[1][1],d):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},d.constrain=function(t){return arguments.length?(r=t,d):r},d.duration=function(t){return arguments.length?(l=+t,d):l},d.interpolate=function(t){return arguments.length?(u=t,d):u},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,d):Math.sqrt(p)},d}().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter((()=>{if(!(Ot instanceof WheelEvent))return!0;if(this.hasAttribute("scroll-filter")){const t=this.getAttribute("scrollable");if(t)return"true"===t}return!this.hasAttribute("use-ctrl-to-zoom")||Ot.ctrlKey})).on("zoom",this.zoomed)}static get observedAttributes(){return["displaystart","displayend","length","highlight"]}setFloatAttribute(t,e){const n=parseFloat(e);this[`_${t}`]=Number.isNaN(n)?e:n}attributeChangedCallback(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}zoomed(){if(this.xScale=Ot.transform.rescaleX(this._originXScale),this.dontDispatch)return;const[t,e]=this.xScale.domain();this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,t),displayend:Math.min(this.length,Math.max(e-1,t+1))},bubbles:!0,cancelable:!0}))}applyZoomTranslation(){if(!this.svg||!this._originXScale)return;const t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,fs.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}_onResize(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}_listenForResize(){this._ro=new al(this._onResize),this._ro.observe(this)}_resetEventHandler(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}getXFromSeqPosition(t){return this.margin.left+this.xScale(t)}getSingleBaseWidth(){return this.xScale(2)-this.xScale(1)}static _getClickCoords(){return Ot?[Ot.pageX,Ot.pageY]:null}static _polyfillElementClosest(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=t=>{let e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}createEvent(t,e=null,n=!1,i=!1,r,s,o){e&&(e=e.feature?e.feature:e);const a={eventtype:t,coords:hl._getClickCoords(),feature:e,target:o};return n&&(e&&e.fragments?a.highlight=e.fragments.map((t=>`${t.start}:${t.end}`)).join(","):Ot&&Ot.shiftKey&&this._highlight?a.highlight=`${this._highlight},${r}:${s}`:a.highlight=r&&s?`${r}:${s}`:null),i&&(a.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:a,bubbles:!0,cancelable:!0})}bindEvents(t,e){t.on("mouseover",((t,n,i)=>{e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,i[n]))})).on("mouseout",(()=>{e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))})).on("click",((t,n,i)=>{e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,i[n]))}))}}const ll=$h(hl,{initialValue:{top:10,right:10,bottom:10,left:10}});class ul{getFeatureShape(t,e,n,i){return i=i||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+i]&&(i="rectangle"),this["_"+i]()}static isContinuous(t){return"bridge"!==t.toLowerCase()}_rectangle(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}_roundRectangle(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}_line(){return`M0,${this._ftHeight/2} L${this._ftWidth},${this._ftHeight/2}`}_bridge(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}_getMiddleLine(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}_diamond(){const t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}_chevron(){const t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_catFace(){const t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_triangle(){const t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_wave(){const t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getPolygon(t){let e="M ";const n=this._ftWidth/2;for(let i=0;i<t;i++)e+=5*Math.cos(2*Math.PI*i/t)+n+","+(5*Math.sin(2*Math.PI*i/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_hexagon(){return this._getPolygon(6)}_pentagon(){return this._getPolygon(5)}_circle(){const t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}_arrow(){const t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_doubleBar(){const t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getBrokenEnd(){const t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}_getBrokenStart(){const t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}_discontinuosStart(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuos(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuosEnd(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}_helix(){const t=2.5;let e=2.5;const n=Math.round(this._ftWidth/5);let i="";for(let r=0;r<n;r++)i+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+t+" "+e+", 0 C"+(e-t)+","+t+" "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5;return i}_strand(){let t=0;this._ftWidth>5&&(t=this._ftWidth-5);const e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+"M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z"}}class cl{constructor({layoutHeight:t,padding:e=1,minHeight:n=17}){this._padding=e,this._minHeight=n,this._layoutHeight=t}init(t){this._features=t}getFeatureYPos(){const t=this.getFeatureHeight();return this._layoutHeight/2-t/2}getFeatureHeight(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}class fl extends cl{constructor(t){super(t),this.featuresMap=new Map,this._rowHeight=0,this._rows=[],this._minHeight=15}init(t){t.forEach((t=>{const e=this._rows.findIndex((e=>!((t,e)=>e.some((e=>{return n=t,i=e,!(Number(i.start)>Number(n.end)||Number(i.end)<Number(n.start));var n,i})))(t,e)));e>=0?(this._rows[e].push(t),this.featuresMap.set(t,e)):(this._rows.push([t]),this.featuresMap.set(t,this._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}getOffset(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}getFeatureYPos(t){const e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}getFeatureHeight(){return this._rowHeight-2*this._padding}}const pl={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},dl=t=>{if(pl[t.toUpperCase()])return pl[t.toUpperCase()].shape;const e=Object.values(pl).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e?e.shape:"rectangle"},gl=t=>{if(pl[t.toUpperCase()])return pl[t.toUpperCase()].color;const e=Object.values(pl).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e||console.log(t),e?e.color:"black"};class ml extends ll{getLayout(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new fl({layoutHeight:this._height}):new cl({layoutHeight:this._height})}connectedCallback(){super.connectedCallback(),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new ul,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(t=>{So(this.children,t.target)&&(this.data=t.detail.payload)}))}static normalizeLocations(t){return t.map((t=>{const{locations:e,start:n,end:i}=t;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:i}]}]})}))}processData(t){this._originalData=ml.normalizeLocations(t)}set data(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}set filters(t){this._filters=t,this._applyFilters(),this._createTrack()}static get observedAttributes(){return ll.observedAttributes.concat(["highlight","color","shape","filters"])}_getFeatureColor(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?gl(t.type):t.feature&&t.feature.type?gl(t.feature.type):"black"}_getFeatureFillColor(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}_getShape(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?dl(t.type):t.feature&&t.feature.type?dl(t.feature.type):"rectangle"}_createTrack(){this._layoutObj.init(this._data),Dt(this).selectAll("div").remove(),this.svg=Dt(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(t=>`g_${t.accession}`)).selectAll("g.location-group").data((t=>t.locations.map((e=>Object.assign({},e,{feature:t}))))).enter().append("g").attr("class","location-group");const t=this.locations.selectAll("g.fragment-group").data((t=>t.fragments.map((e=>Object.assign({},e,{feature:t.feature}))))).enter().append("g").attr("class","fragment-group");t.append("path").attr("class",(t=>`${this._getShape(t)} feature`)).attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t)))).attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`)).attr("fill",(t=>this._getFeatureFillColor(t))).attr("stroke",(t=>this._getFeatureColor(t))).style("fill-opacity",(({feature:t})=>t.opacity?t.opacity:.9)).style("stroke-opacity",(({feature:t})=>t.opacity?t.opacity:.9)),t.append("rect").attr("class","outer-rectangle feature").attr("width",(t=>this.getSingleBaseWidth()*(t.end?t.end-t.start+1:1))).attr("height",(t=>this._layoutObj.getFeatureHeight(t))).attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`)).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this)}_applyFilters(){if(!this._filters||this._filters.length<=0)return void(this._data=this._originalData);const t=gh(this._filters,"category"),e=Object.values(t).map((t=>{const e=t.map((t=>t.filterFn(this._originalData)));return Oh(...e)})),n=jh(...e);this._data=n}refresh(){if(this.xScale&&this.seq_g){const t=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce(((t,e)=>t.concat(e.locations.reduce(((t,n)=>t.concat(n.fragments.map((t=>Object.assign({},t,{feature:e}))))),[]))),[]));t.selectAll("path.feature").attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t)))).attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`)),t.selectAll("rect.outer-rectangle").attr("width",(t=>this.getSingleBaseWidth()*(t.end?t.end-t.start+1:1))).attr("height",(t=>this._layoutObj.getFeatureHeight(t))).attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`)),this._updateHighlight()}}_updateHighlight(){this.trackHighlighter.updateHighlight()}}const yl=ml;class vl extends HTMLElement{constructor(){super(),this._x=null,this._padding=0,this.height=40,this.dontDispatch=!1}_refreshWidth(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth-this.margin.left-this.margin.right,this.width>0&&(this._padding=10)}connectedCallback(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._rulerstart=parseFloat(this.getAttribute("rulerStart"))||1,this._onResize=this._onResize.bind(this),this._createNavRuler()}disconnectedCallback(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}static get observedAttributes(){return["length","displaystart","displayend","highlightStart","highlightEnd","width","rulerstart"]}attributeChangedCallback(t,e,n){e!==n&&(this[`_${t}`]=parseFloat(n),this._updateNavRuler())}get width(){return this._width}set width(t){this._width=t}_createNavRuler(){this._x=fr().range([this._padding,this.width-this._padding]),this._x.domain([this._rulerstart,this._rulerstart+this._length-1]),this._container=Dt(this).append("div").attr("class","container"),this._svg=this._container.append("svg").attr("id","").attr("width",this.width).attr("height",this.height),this._xAxis=E(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",this.height-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",this.height-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=function(t){var e,n=Si,i=Li,r=Mi,s=!0,o=R("start","brush","end"),a=6;function h(e){var n=e.property("__brush",g).selectAll(".overlay").data([Ai("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",vi.overlay).merge(n).each((function(){var t=Ei(this).extent;Dt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Ai("selection")]).enter().append("rect").attr("class","selection").attr("cursor",vi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return vi[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Dt(this),e=Ei(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new c(t,e,n):i}function c(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function f(){if((!e||Ot.touches)&&i.apply(this,arguments)){var n,r,o,a,h,c,f,p,d,g,m,y=this,v=Ot.target.__data__.type,_="selection"===(s&&Ot.metaKey?v="overlay":v)?li:s&&Ot.altKey?fi:ci,b=t===yi?null:wi[v],w=t===mi?null:xi[v],x=Ei(y),A=x.extent,L=x.selection,S=A[0][0],M=A[0][1],E=A[1][0],k=A[1][1],C=0,N=0,T=b&&w&&s&&Ot.shiftKey,O=Ot.touches?gi(Ot.changedTouches[0].identifier):Ie,P=O(y),R=P,j=u(y,arguments,!0).beforestart();"overlay"===v?(L&&(d=!0),x.selection=L=[[n=t===yi?S:P[0],o=t===mi?M:P[1]],[h=t===yi?E:n,f=t===mi?k:o]]):(n=L[0][0],o=L[0][1],h=L[1][0],f=L[1][1]),r=n,a=o,c=h,p=f;var z=Dt(y).attr("pointer-events","none"),F=z.selectAll(".overlay").attr("cursor",vi[v]);if(Ot.touches)j.moved=q,j.ended=V;else{var H=Dt(Ot.view).on("mousemove.brush",q,!0).on("mouseup.brush",V,!0);s&&H.on("keydown.brush",Q,!0).on("keyup.brush",W,!0),Zt(Ot.view)}ai(),mn(y),l.call(y),j.start()}function q(){var t=O(y);!T||g||m||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?m=!0:g=!0),R=t,d=!0,hi(),$()}function $(){var t;switch(C=R[0]-P[0],N=R[1]-P[1],_){case ui:case li:b&&(C=Math.max(S-n,Math.min(E-h,C)),r=n+C,c=h+C),w&&(N=Math.max(M-o,Math.min(k-f,N)),a=o+N,p=f+N);break;case ci:b<0?(C=Math.max(S-n,Math.min(E-n,C)),r=n+C,c=h):b>0&&(C=Math.max(S-h,Math.min(E-h,C)),r=n,c=h+C),w<0?(N=Math.max(M-o,Math.min(k-o,N)),a=o+N,p=f):w>0&&(N=Math.max(M-f,Math.min(k-f,N)),a=o,p=f+N);break;case fi:b&&(r=Math.max(S,Math.min(E,n-C*b)),c=Math.max(S,Math.min(E,h+C*b))),w&&(a=Math.max(M,Math.min(k,o-N*w)),p=Math.max(M,Math.min(k,f+N*w)))}c<r&&(b*=-1,t=n,n=h,h=t,t=r,r=c,c=t,v in _i&&F.attr("cursor",vi[v=_i[v]])),p<a&&(w*=-1,t=o,o=f,f=t,t=a,a=p,p=t,v in bi&&F.attr("cursor",vi[v=bi[v]])),x.selection&&(L=x.selection),g&&(r=L[0][0],c=L[1][0]),m&&(a=L[0][1],p=L[1][1]),L[0][0]===r&&L[0][1]===a&&L[1][0]===c&&L[1][1]===p||(x.selection=[[r,a],[c,p]],l.call(y),j.brush())}function V(){if(ai(),Ot.touches){if(Ot.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Xt(Ot.view,d),H.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),F.attr("cursor",vi.overlay),x.selection&&(L=x.selection),ki(L)&&(x.selection=null,l.call(y)),j.end()}function Q(){switch(Ot.keyCode){case 16:T=b&&w;break;case 18:_===ci&&(b&&(h=c-C*b,n=r+C*b),w&&(f=p-N*w,o=a+N*w),_=fi,$());break;case 32:_!==ci&&_!==fi||(b<0?h=c-C:b>0&&(n=r-C),w<0?f=p-N:w>0&&(o=a-N),_=ui,F.attr("cursor",vi.selection),$());break;default:return}hi()}function W(){switch(Ot.keyCode){case 16:T&&(g=m=T=!1,$());break;case 18:_===fi&&(b<0?h=c:b>0&&(n=r),w<0?f=p:w>0&&(o=a),_=ci,$());break;case 32:_===ui&&(Ot.altKey?(b&&(h=c-C*b,n=r+C*b),w&&(f=p-N*w,o=a+N*w),_=fi):(b<0?h=c:b>0&&(n=r),w<0?f=p:w>0&&(o=a),_=ci),F.attr("cursor",vi[v]),$());break;default:return}hi()}}function p(){u(this,arguments).moved()}function d(){u(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=di(n.apply(this,arguments)),e.dim=t,e}return h.move=function(e,n){e.selection?e.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var e=this,i=e.__brush,r=u(e,arguments),s=i.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),a=$e(s,o);function h(t){i.selection=1===t&&null===o?null:a(t),l.call(e),r.brush()}return null!==s&&null!==o?h:h(1)})):e.each((function(){var e=this,i=arguments,r=e.__brush,s=t.input("function"==typeof n?n.apply(e,i):n,r.extent),o=u(e,i).beforestart();mn(e),r.selection=null===s?null:s,l.call(e),o.start().brush().end()}))},h.clear=function(t){h.move(t,null)},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Ht(new oi(h,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},h.extent=function(t){return arguments.length?(n="function"==typeof t?t:si(di(t)),h):n},h.filter=function(t){return arguments.length?(i="function"==typeof t?t:si(!!t),h):i},h.touchable=function(t){return arguments.length?(r="function"==typeof t?t:si(!!t),h):r},h.handleSize=function(t){return arguments.length?(a=+t,h):a},h.keyModifiers=function(t){return arguments.length?(s=!!t,h):s},h.on=function(){var t=o.on.apply(o,arguments);return t===o?h:t},h}(mi).extent([[this._padding,0],[this.width-this._padding,.51*this.height]]).on("brush",(()=>{Ot.selection&&(this._displaystart=Ii("d")(this._x.invert(Ot.selection[0])),this._displayend=Ii("d")(this._x.invert(Ot.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:Ot.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}_onResize(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,.51*this.height]]),this._brushG.call(this._viewport),this._updateNavRuler()}_updateNavRuler(){this._x&&(this._container.style("padding-left",`${this.margin.left}px`).style("padding-right",`${this.margin.right}px`).style("padding-top",`${this.margin.top}px`).style("padding-bottom",`${this.margin.bottom}px`),this._x.domain([this._rulerstart,this._rulerstart+this._length-1]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}_updateLabels(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}_updatePolygon(){this.polygon&&this.polygon.attr("points",`${this._x(this._displaystart)},${this.height/2}\n        ${this._x(this._displayend)},${this.height/2}\n        ${this.width},${this.height}\n        0,${this.height}`)}}const _l=$h(vl),bl=class extends ll{constructor(){super(),this.pathmap=function(){const t=new Map;return t.set("A","M 49.0934449093445 0 L 50.6276150627615 0 L 100 100 L 82.00836820083681 100 L 73.22175732217573 80.43478260869566 L 26.220362622036262 80.43478260869566 L 17.433751743375172 100 L 0 100 L 49.0934449093445 0 Z M 49.7907949790795 28.94021739130435 L 43.65411436541144 42.52717391304349 L 32.49651324965132 66.71195652173914 L 67.08507670850767 66.71195652173914 L 56.06694560669457 42.663043478260875 L 50.069735006973495 28.94021739130435 L 49.7907949790795 28.94021739130435 Z"),t.set("B","M 0 100 L 0 0 L 37.77777777777776 0 A 73.799 73.799 0 0 1 51.56363636363636 0.3972789115646259 Q 72.15959595959595 1.6911564625850337 80.20202020202018 7.210884353741498 A 17.604 17.604 0 0 1 90.70707070707068 24.546938775510203 A 21.528 21.528 0 0 1 90.70707070707068 24.62585034013605 Q 90.70707070707068 31.428571428571427 86.26262626262624 37.48299319727891 A 13.947 13.947 0 0 1 73.0181818181818 46.24353741496598 A 17.492 17.492 0 0 1 72.1212121212121 46.530612244897966 A 24.622 24.622 0 0 1 81.27070707070708 48.707482993197274 Q 86.59595959595958 50.41224489795918 90.34545454545452 52.881632653061224 A 13.825 13.825 0 0 1 93.23232323232321 55.10204081632653 A 16.945 16.945 0 0 1 99.9171717171717 67.71972789115645 A 21.299 21.299 0 0 1 100 69.52380952380952 A 34.707 34.707 0 0 1 99.16969696969696 76.96870748299321 A 25.162 25.162 0 0 1 95.95959595959596 84.76190476190476 A 13.18 13.18 0 0 1 89.48282828282828 90.91836734693878 Q 85.35757575757576 93.5374149659864 79.19191919191917 95.64625850340137 Q 66.46464646464645 100 42.42424242424242 100 L 0 100 Z M 22.22222222222222 87.2108843537415 L 45.45454545454545 87.2108843537415 A 35.401 35.401 0 0 0 53.77575757575758 86.91020408163264 Q 62.408080808080804 86.22721088435374 67.27676767676766 83.98775510204082 A 7.446 7.446 0 0 0 70.20202020202021 82.24489795918367 A 12.798 12.798 0 0 0 76.14343434343432 73.41224489795918 A 17.519 17.519 0 0 0 76.56565656565655 69.65986394557824 A 12.467 12.467 0 0 0 75.6262626262626 64.89931972789117 A 9.211 9.211 0 0 0 69.29292929292929 58.50340136054422 Q 64.07070707070706 55.670748299319726 54.99595959595959 54.872108843537404 A 29.575 29.575 0 0 0 47.27272727272725 54.5578231292517 L 22.22222222222222 54.5578231292517 L 22.22222222222222 87.2108843537415 Z M 22.22222222222222 42.44897959183674 L 41.41414141414141 42.44897959183674 Q 55.75757575757575 42.44897959183674 61.818181818181806 37.755102040816325 Q 67.87878787878788 33.06122448979592 67.87878787878788 25.85034013605442 A 9.195 9.195 0 0 0 65.59797979797978 19.476190476190474 Q 61.258585858585846 14.431292517006801 48.660606060606035 13.272108843537413 A 30.297 30.297 0 0 0 40.4040404040404 12.92517006802721 L 22.22222222222222 12.92517006802721 L 22.22222222222222 42.44897959183674 Z"),t.set("C","M 100 7.5596816976127315 L 91.4782608695652 20.822281167108756 A 21.018 21.018 0 0 0 74.08521739130433 14.396551724137932 A 29.942 29.942 0 0 0 63.82608695652172 13.660477453580903 A 24.03 24.03 0 0 0 46.775652173913016 16.303713527851464 A 23.311 23.311 0 0 0 42.08695652173911 18.169761273209552 Q 32.347826086956516 22.679045092838194 26.782608695652183 31.034482758620694 A 29.15 29.15 0 0 0 21.93565217391304 42.828912466843505 A 38.038 38.038 0 0 0 21.217391304347807 50.397877984084886 A 35.071 35.071 0 0 0 22.96521739130437 61.713527851458906 A 30.011 30.011 0 0 0 26.17391304347828 68.70026525198939 Q 31.130434782608702 76.92307692307693 40.695652173913054 81.6976127320955 A 21.88 21.88 0 0 0 56.14260869565219 86.07427055702918 A 28.642 28.642 0 0 0 63.47826086956522 86.47214854111405 A 31.517 31.517 0 0 0 89.01217391304345 81.57559681697614 A 38.523 38.523 0 0 0 93.04347826086956 79.84084880636605 L 98.78260869565219 92.44031830238727 A 9.915 9.915 0 0 1 96.1286956521739 93.91777188328913 Q 93.12000000000002 95.30901856763927 88.28521739130437 96.64456233421751 A 51.728 51.728 0 0 1 84.78260869565217 97.54641909814325 Q 74.60869565217394 100 64.17391304347827 100 A 42.874 42.874 0 0 1 46.753043478260885 98.51458885941646 A 33.543 33.543 0 0 1 29.826086956521745 93.23607427055704 Q 15.304347826086977 86.47214854111405 7.652173913043488 75.13262599469498 A 40.105 40.105 0 0 1 0.0678260869564996 52.6737400530504 A 47.113 47.113 0 0 1 0 50.13262599469497 A 42.878 42.878 0 0 1 2.6139130434782363 34.835543766578255 A 36.823 36.823 0 0 1 8.26086956521739 24.27055702917772 Q 16.52173913043478 12.864721485411144 31.478260869565208 6.43236074270557 Q 46.434782608695635 0 65.39130434782608 0 A 40.385 40.385 0 0 1 76.08869565217393 0.6007957559681699 A 34.213 34.213 0 0 1 81.30434782608695 1.3925729442970824 A 50.296 50.296 0 0 1 86.49391304347827 2.4933687002652523 Q 90.5217391304348 3.4575596816976137 93.56521739130436 4.575596816976128 A 36.336 36.336 0 0 1 95.76173913043478 5.421750663129974 Q 98.8191304347826 6.660477453580902 100 7.5596816976127315 Z"),t.set("D","M 0 100 L 0 0 L 30.72916666666665 0 A 73.62 73.62 0 0 1 49.569444444444436 1.0081632653061223 Q 72.68576388888887 3.7170068027210883 83.99305555555556 13.704761904761902 A 22.253 22.253 0 0 1 84.63541666666667 14.285714285714286 Q 100 28.571428571428573 100 48.29931972789116 A 46.952 46.952 0 0 1 96.6284722222222 66.86802721088435 A 42.727 42.727 0 0 1 93.40277777777776 73.6734693877551 A 30.31 30.31 0 0 1 76.1527777777778 90.25306122448981 A 37.863 37.863 0 0 1 71.61458333333334 92.6530612244898 A 33.329 33.329 0 0 1 55.600694444444414 97.865306122449 Q 45.060763888888864 100 31.770833333333304 100 L 0 100 Z M 19.444444444444425 86.53061224489795 L 33.85416666666667 86.53061224489795 A 38.204 38.204 0 0 0 46.84548611111112 85.60272108843537 Q 54.26041666666666 84.43945578231293 59.89062499999998 81.82312925170068 A 18.389 18.389 0 0 0 68.66319444444441 75.85034013605443 A 28.224 28.224 0 0 0 78.45486111111111 58.560544217687074 A 38.955 38.955 0 0 0 79.51388888888887 48.97959183673469 A 34.859 34.859 0 0 0 77.84548611111111 37.542857142857144 A 25.018 25.018 0 0 0 68.5763888888889 23.265306122448976 A 19.346 19.346 0 0 0 53.88194444444446 15.663945578231292 Q 48.2986111111111 14.134693877551019 41.41840277777778 13.60952380952381 A 44.941 44.941 0 0 0 33.85416666666667 13.333333333333332 L 19.444444444444425 13.333333333333332 L 19.444444444444425 86.53061224489795 Z"),t.set("E","M 0 100 L 0 0 L 90.70422535211264 0 L 90.70422535211264 13.333333333333332 L 31.26760563380272 13.333333333333332 L 31.26760563380272 40.95238095238095 L 79.15492957746469 40.95238095238095 L 79.15492957746469 54.5578231292517 L 31.26760563380272 54.5578231292517 L 31.26760563380272 86.53061224489795 L 100 86.53061224489795 L 100 100 L 0 100 Z"),t.set("F","M 0 100 L 0 0 L 100 0 L 100 13.197278911564624 L 32.17391304347816 13.197278911564624 L 32.17391304347816 41.49659863945578 L 84.92753623188409 41.49659863945578 L 84.92753623188409 54.82993197278911 L 32.17391304347816 54.82993197278911 L 32.17391304347816 100 L 0 100 Z"),t.set("G","M 92.66055045871558 7.6719576719576725 L 85.93272171253824 20.105820105820108 A 19.906 19.906 0 0 0 76.32874617737002 15.703703703703706 Q 72.0076452599388 14.460317460317459 66.73241590214066 13.915343915343916 A 48.605 48.605 0 0 0 57.951070336391425 13.492063492063492 A 30.851 30.851 0 0 0 47.18807339449541 14.510582010582011 A 24.123 24.123 0 0 0 36.69724770642203 18.121693121693124 Q 27.67584097859323 22.751322751322753 22.93577981651377 30.68783068783069 A 28.008 28.008 0 0 0 18.336391437308816 45.1031746031746 A 33.711 33.711 0 0 0 18.195718654434224 48.41269841269842 A 36.109 36.109 0 0 0 19.640672782874578 59.54629629629631 A 29.794 29.794 0 0 0 23.318042813455666 68.25396825396825 A 25.71 25.71 0 0 0 32.425076452599335 78.55555555555556 A 24.378 24.378 0 0 0 37.53822629969413 81.81216931216932 A 24.877 24.877 0 0 0 55.974006116207924 86.59788359788361 A 29.962 29.962 0 0 0 58.10397553516822 86.64021164021165 Q 65.29051987767585 86.64021164021165 71.86544342507648 85.11904761904762 A 20.745 20.745 0 0 0 78.46177370030577 82.92195767195767 A 17.037 17.037 0 0 0 83.02752293577977 80.29100529100529 L 83.02752293577977 61.50793650793651 L 59.938837920489306 61.50793650793651 L 59.938837920489306 47.88359788359789 L 100 47.88359788359789 L 100 85.97883597883599 A 20.936 20.936 0 0 1 93.74006116207953 91.05952380952381 Q 90.74617737003055 92.93783068783068 86.98623853211005 94.55291005291006 A 41.092 41.092 0 0 1 83.40978593272168 95.96560846560847 A 38.081 38.081 0 0 1 69.4418960244648 99.2830687830688 A 51.176 51.176 0 0 1 57.79816513761463 100 A 40.665 40.665 0 0 1 39.47400611620793 97.73015873015873 A 35.773 35.773 0 0 1 27.98165137614673 93.38624338624338 Q 14.831804281345553 86.77248677248677 7.415902140672733 75.19841269841271 A 39.01 39.01 0 0 1 0.1467889908256937 53.206349206349216 A 47.064 47.064 0 0 1 0 49.206349206349216 A 39.45 39.45 0 0 1 2.9266055045871373 32.76587301587302 A 35.719 35.719 0 0 1 7.49235474006113 23.941798941798947 Q 14.98470948012226 12.6984126984127 28.287461773700315 6.34920634920635 Q 41.59021406727829 0 58.25688073394492 0 Q 67.27828746177373 0 74.54128440366975 1.388888888888889 Q 79.76911314984709 2.388888888888889 83.61009174311927 3.593915343915344 A 26.244 26.244 0 0 1 86.39143730886853 4.563492063492064 Q 90.97859327217128 6.34920634920635 92.66055045871558 7.6719576719576725 Z"),t.set("H","M 0 100 L 0 0 L 23.188405797101538 0 L 23.188405797101538 40.816326530612244 L 76.81159420289858 40.816326530612244 L 76.81159420289858 0 L 100 0 L 100 100 L 76.81159420289858 100 L 76.81159420289858 53.605442176870746 L 23.188405797101538 53.605442176870746 L 23.188405797101538 100 L 0 100 Z"),t.set("I","M 0 0 L 100 0 L 100 9.931405967260027 L 63.70338905913407 9.931405967260027 L 63.70338905913407 90.06859403273998 L 100 90.06859403273998 L 100 100 L 0 100 L 0 90.06859403273998 L 35.556297217755386 90.06859403273998 L 35.556297217755386 9.931405967260027 L 0 9.931405967260027 L 0 0 Z"),t.set("J","M 0 93.82550335570471 L 13.235294117647058 80 A 12.93 12.93 0 0 0 19.988235294117793 82.8510067114094 A 11.06 11.06 0 0 0 25.147058823529612 84.22818791946308 A 10.436 10.436 0 0 0 32.02941176470584 85.24026845637583 Q 35.244117647059 85.53825503355705 38.94705882352963 85.61342281879196 A 19.469 19.469 0 0 0 41.47058823529419 85.63758389261746 A 14.305 14.305 0 0 0 47.32058823529428 85.46308724832214 Q 52.508823529411956 85.1302013422819 56.17647058823536 84.16107382550335 Q 60.891176470588164 82.91543624161073 63.617647058823515 79.9503355704698 A 11.422 11.422 0 0 0 64.5588235294119 78.79194630872483 Q 67.08235294117645 75.27651006711409 67.32647058823552 69.02147651006712 A 57.36 57.36 0 0 0 67.35294117647052 67.6510067114094 L 67.35294117647052 0 L 100 0 L 100 71.40939597315436 A 39.307 39.307 0 0 1 98.8264705882353 79.21342281879195 Q 95.82352941176482 88.35033557046981 85.14705882352955 93.22147651006712 Q 70.29411764705875 100 46.176470588235425 100 Q 33.8235294117647 100 21.17647058823543 98.59060402684564 Q 8.529411764705815 97.1812080536913 0 93.82550335570471 Z"),t.set("K","M 74.24812030075198 100 L 31.954887218045155 55.23809523809524 L 20.676691729323334 65.3061224489796 L 20.676691729323334 100 L 0 100 L 0 0 L 20.676691729323334 0 L 20.676691729323334 44.62585034013605 L 68.04511278195484 0 L 93.23308270676687 0 L 45.67669172932328 43.94557823129251 L 99.99999999999999 100 L 74.24812030075198 100 Z"),t.set("L","M 0 100 L 0 0 L 34.87654320987643 0 L 34.87654320987643 86.39455782312923 L 100 86.39455782312923 L 100 100 L 0 100 Z"),t.set("M","M 49.589683470105484 100 L 28.83939038686978 53.33333333333334 L 23.446658851113728 39.183673469387756 L 20.98475967174676 53.33333333333334 L 13.012895662368013 100 L 0 100 L 17.819460726846355 0 L 19.226260257913232 0 L 42.90738569753802 54.013605442176875 L 49.94138335287214 72.10884353741497 L 56.975381008206256 54.013605442176875 L 80.18757327080893 0 L 81.47713950762021 0 L 100.00000000000001 100 L 87.10433763188745 100 L 78.4290738569754 53.33333333333334 L 75.84994138335283 39.183673469387756 L 71.16060961313008 53.33333333333334 L 50.293083235638925 100 L 49.589683470105484 100 Z"),t.set("N","M 97.29241877256318 100 L 19.675090252707548 35.32608695652174 L 20.216606498195038 46.19565217391305 L 20.216606498195038 100 L 0 100 L 0 0 L 2.527075812274328 0 L 80.50541516245494 65.48913043478261 L 79.78339350180516 54.07608695652175 L 79.78339350180516 0.13586956521739144 L 100.00000000000001 0.13586956521739144 L 100.00000000000001 100 L 97.29241877256318 100 Z"),t.set("O","M 50.00000000000008 100 Q 36.44986449864508 100 25.00000000000004 93.85733157199473 Q 13.550135501355001 87.71466314398943 6.7750677506775006 76.35402906208719 A 36.784 36.784 0 0 1 0.5365853658537554 58.112285336856026 A 47.108 47.108 0 0 1 0 49.93394980184942 A 44.593 44.593 0 0 1 1.5894308943089441 36.13210039630119 A 35.208 35.208 0 0 1 6.7750677506775006 23.447820343461032 Q 13.550135501355001 12.153236459709383 25.00000000000004 6.07661822985469 Q 36.44986449864508 0 50.00000000000008 0 Q 63.55013550135508 0 74.99999999999996 6.07661822985469 Q 86.449864498645 12.153236459709383 93.2249322493225 23.447820343461032 A 36.279 36.279 0 0 1 99.3387533875338 40.82034346103039 A 47.19 47.19 0 0 1 100 49.93394980184942 Q 100 64.99339498018495 93.2249322493225 76.35402906208719 Q 86.449864498645 87.71466314398943 74.99999999999996 93.85733157199473 Q 63.55013550135508 100 50.00000000000008 100 Z M 50.00000000000008 86.65785997357992 Q 59.349593495935004 86.65785997357992 67.07317073170725 82.36459709379129 A 22.918 22.918 0 0 0 78.30487804878055 71.57463672391017 A 27.853 27.853 0 0 0 79.33604336043364 69.81505944517835 Q 83.87533875338758 61.55878467635404 83.87533875338758 50.066050198150606 Q 83.87533875338758 38.64861294583884 79.49593495934954 30.480845442536328 A 24.254 24.254 0 0 0 79.33604336043364 30.18494055482167 A 24.661 24.661 0 0 0 73.09485094850952 22.031704095112286 A 21.786 21.786 0 0 0 67.14092140921413 17.701453104359317 A 24.862 24.862 0 0 0 51.907859078590725 13.517833553500664 A 29.762 29.762 0 0 0 50.00000000000008 13.474240422721271 A 26.4 26.4 0 0 0 37.85501355013548 15.450462351387054 A 24.462 24.462 0 0 0 32.79132791327916 17.701453104359317 A 22.272 22.272 0 0 0 21.613821138211392 28.428005284015857 A 27.188 27.188 0 0 0 20.596205962059663 30.18494055482167 Q 16.24932249322502 38.21268163804492 16.128726287262886 49.42272126816381 A 46.367 46.367 0 0 0 16.124661246612575 50.066050198150606 A 37.307 37.307 0 0 0 17.006775067750723 59.50330250990755 A 27.067 27.067 0 0 0 20.731707317073244 69.81505944517835 A 24.719 24.719 0 0 0 27.63143631436319 78.4980184940555 A 22.506 22.506 0 0 0 33.13008130081304 82.36459709379129 Q 40.921409214092165 86.65785997357992 50.00000000000008 86.65785997357992 Z"),t.set("P","M 0 100 L 0 0 L 38.02816901408433 0 A 51.02 51.02 0 0 1 54.753521126760376 0.6299319727891154 Q 63.3403755868543 1.3346938775510204 70.22065727699524 2.8244897959183675 A 19.087 19.087 0 0 1 85.09389671361498 7.959183673469388 A 19.254 19.254 0 0 1 99.00938967136143 23.034013605442176 A 27.993 27.993 0 0 1 99.99999999999999 29.79591836734694 A 32.366 32.366 0 0 1 98.25586854460082 39.5265306122449 Q 95.57746478873236 46.37959183673469 88.78638497652572 51.331972789115646 A 19.51 19.51 0 0 1 83.80281690140825 54.42176870748299 Q 70.88967136150221 61.25578231292516 47.98122065727683 62.640816326530604 A 50.538 50.538 0 0 1 35.68075117370874 62.993197278911566 L 26.52582159624401 62.993197278911566 L 26.52582159624401 100 L 0 100 Z M 26.52582159624401 49.523809523809526 L 36.38497652582158 49.523809523809526 A 31.128 31.128 0 0 0 46.44835680751153 49.15238095238096 Q 59.215962441314524 48.119727891156465 65.25821596244117 44.21768707482993 Q 73.47417840375573 38.91156462585034 73.47417840375573 31.428571428571427 A 16.736 16.736 0 0 0 72.25586854460079 25.614965986394555 A 12.417 12.417 0 0 0 65.49295774647878 18.367346938775512 A 9.923 9.923 0 0 0 56.838028169013974 15.016326530612242 Q 53.0140845070421 14.129251700680273 48.19014084507039 13.710204081632654 A 27.25 27.25 0 0 0 38.73239436619716 13.333333333333332 L 26.52582159624401 13.333333333333332 L 26.52582159624401 49.523809523809526 Z"),t.set("Q","M 77.37127371273705 83.23424494649228 L 89.7018970189703 100 L 74.66124661246604 100 L 65.71815718157185 87.99048751486326 Q 57.99457994579943 90.01189060642092 50 90.01189060642092 Q 36.44986449864498 90.01189060642092 25.000000000000078 84.48275862068967 Q 13.550135501355022 78.95362663495838 6.775067750677511 68.72770511296076 A 36.784 36.784 0 0 1 0.5365853658536022 52.30796670630203 A 47.108 47.108 0 0 1 0 44.94649227110583 A 44.593 44.593 0 0 1 1.5894308943089466 32.52318668252081 A 35.208 35.208 0 0 1 6.775067750677511 21.105826397146256 Q 13.550135501355022 10.939357907253273 25.000000000000078 5.469678953626635 Q 36.44986449864498 0 50 0 Q 63.55013550135503 0 74.99999999999993 5.469678953626635 Q 86.44986449864498 10.939357907253273 93.22493224932249 21.105826397146256 A 36.279 36.279 0 0 1 99.3387533875338 36.74316290130797 A 47.19 47.19 0 0 1 100 44.94649227110583 A 44.079 44.079 0 0 1 98.37940379403805 57.39952437574317 A 35.833 35.833 0 0 1 93.90243902439023 67.6575505350773 Q 87.80487804878048 77.52675386444709 77.37127371273705 83.23424494649228 Z M 57.859078590786005 77.28894173602855 L 48.78048780487808 64.32818073721761 L 63.956639566395765 64.32818073721761 L 69.78319783197836 72.65160523186682 Q 76.42276422764245 68.48989298454222 80.14905149051508 61.47443519619501 A 28.642 28.642 0 0 0 83.2127371273714 52.568370986920335 A 38.887 38.887 0 0 0 83.87533875338771 45.06539833531511 Q 83.87533875338771 34.78834720570749 79.4959349593495 27.436385255648034 A 24.254 24.254 0 0 0 79.33604336043359 27.170035671819264 A 24.661 24.661 0 0 0 73.09485094850947 19.831153388822827 A 21.786 21.786 0 0 0 67.14092140921407 15.933412604042807 A 24.862 24.862 0 0 0 51.90785907859081 12.167657550535079 A 29.762 29.762 0 0 0 50 12.12841854934602 A 26.4 26.4 0 0 0 37.85501355013554 13.907253269916765 A 24.462 24.462 0 0 0 32.79132791327921 15.933412604042807 A 22.272 22.272 0 0 0 21.613821138211424 25.58858501783591 A 27.188 27.188 0 0 0 20.596205962059695 27.170035671819264 Q 16.24932249322489 34.39595719381688 16.12872628726291 44.48632580261594 A 46.367 46.367 0 0 0 16.124661246612444 45.06539833531511 A 37.307 37.307 0 0 0 17.00677506775075 53.560047562425694 A 27.067 27.067 0 0 0 20.731707317073123 62.84185493460167 A 24.719 24.719 0 0 0 27.63143631436323 70.65755053507729 A 22.506 22.506 0 0 0 33.13008130081309 74.13793103448276 Q 40.92140921409223 78.00237812128418 50 78.00237812128418 A 28.343 28.343 0 0 0 55.27913279132802 77.69560047562426 A 23.942 23.942 0 0 0 57.859078590786005 77.28894173602855 Z"),t.set("R","M 100 100 L 73.99193548387086 100 L 44.15322580645167 62.17687074829932 A 233.913 233.913 0 0 1 36.42338709677416 62.36326530612244 Q 32.88306451612883 62.42857142857143 29.701612903225666 62.44489795918367 A 137.33 137.33 0 0 1 27.620967741935498 62.44897959183673 L 21.975806451613025 62.44897959183673 L 21.975806451613025 100 L 0 100 L 0 0 L 33.66935483870968 0 A 50.558 50.558 0 0 1 51.59677419354844 1.0054421768707482 Q 65.47379032258074 2.67891156462585 75.80645161290329 7.142857142857143 Q 92.338709677419 14.285714285714286 92.338709677419 30.34013605442177 A 26.586 26.586 0 0 1 90.82258064516104 39.13197278911564 A 20.834 20.834 0 0 1 85.38306451612907 47.687074829931966 A 20.565 20.565 0 0 1 72.26209677419355 56.27619047619048 A 27.144 27.144 0 0 1 64.71774193548397 58.91156462585034 L 100 100 Z M 21.975806451613025 50.068027210884345 L 36.29032258064506 50.068027210884345 Q 53.26411290322586 50.068027210884345 61.08669354838688 45.80136054421769 A 8.824 8.824 0 0 0 63.40725806451604 44.28571428571428 A 15.031 15.031 0 0 0 70.76411290322548 30.7265306122449 A 18.948 18.948 0 0 0 70.76612903225815 30.476190476190474 A 13.738 13.738 0 0 0 68.27620967741919 22.265306122448976 Q 62.637096774193346 14.389115646258503 44.2217741935482 12.96734693877551 A 38.207 38.207 0 0 0 35.483870967742114 12.653061224489795 L 21.975806451613025 12.653061224489795 L 21.975806451613025 50.068027210884345 Z"),t.set("S","M 0 91.00529100529101 L 12.045454545454442 78.43915343915344 A 14.736 14.736 0 0 0 15.550000000000223 80.03042328042329 Q 19.3568181818183 81.5515873015873 25.0272727272726 83.14153439153439 A 53.074 53.074 0 0 0 26.931818181818493 83.66402116402116 A 23.826 23.826 0 0 0 36.23863636363622 85.61111111111111 A 18.05 18.05 0 0 0 46.36363636363657 86.37566137566138 A 18.409 18.409 0 0 0 54.775000000000254 85.91137566137566 Q 60.1477272727276 85.26984126984127 64.33636363636361 83.7420634920635 A 11.085 11.085 0 0 0 66.02272727272717 83.06878306878308 A 7.974 7.974 0 0 0 73.51363636363637 75.37962962962963 A 10.678 10.678 0 0 0 73.63636363636384 73.94179894179895 Q 73.63636363636384 69.44444444444444 69.54545454545486 66.13756613756614 Q 65.45454545454535 62.830687830687836 59.545454545454646 60.64814814814815 Q 53.636363636363946 58.46560846560847 42.72727272727263 55.2910052910053 A 193.031 193.031 0 0 1 36.84772727272719 53.58068783068783 Q 28.975000000000055 51.24338624338625 25.338636363636624 49.865079365079374 A 16.52 16.52 0 0 1 25 49.73544973544974 Q 3.9795454545454008 41.53835978835979 3.0022727272730454 27.32804232804233 A 26.466 26.466 0 0 1 2.954545454545351 25.92592592592593 A 22.86 22.86 0 0 1 4.645454545454765 17.982804232804234 A 16.061 16.061 0 0 1 17.272727272727582 6.67989417989418 A 22.59 22.59 0 0 1 40.50454545454572 0.6534391534391535 A 31.325 31.325 0 0 1 53.40909090909091 0 A 29.862 29.862 0 0 1 74.12045454545468 1.7724867724867726 A 25.184 25.184 0 0 1 93.18181818181819 7.804232804232805 L 81.13636363636374 19.841269841269842 A 12.078 12.078 0 0 0 76.68409090909087 17.666666666666668 Q 74.41818181818213 16.765873015873016 71.62500000000023 15.974867724867726 A 23.208 23.208 0 0 0 68.97727272727303 15.277777777777779 Q 61.136363636363846 13.35978835978836 52.27272727272727 13.35978835978836 A 17.935 17.935 0 0 0 45.18863636363645 13.695767195767194 Q 38.73409090909118 14.359788359788359 34.431818181818386 16.33597883597884 A 7.25 7.25 0 0 0 28.465909090909296 22.08465608465609 A 11.15 11.15 0 0 0 27.95454545454535 25.132275132275133 Q 27.95454545454535 29.232804232804234 32.04545454545485 32.473544973544975 A 17.078 17.078 0 0 0 40.670454545454504 37.408730158730165 A 19.754 19.754 0 0 0 42.386363636363846 38.095238095238095 Q 48.35000000000026 40.367724867724874 58.35227272727263 43.60449735449736 A 230.377 230.377 0 0 0 59.318181818182126 43.915343915343925 Q 69.54545454545486 47.22222222222223 75 49.140211640211646 Q 80.45454545454567 51.058201058201064 85.22727272727273 53.70370370370371 Q 91.81818181818203 57.142857142857146 95.909090909091 61.90476190476191 A 17.265 17.265 0 0 1 99.97954545454542 71.55952380952382 A 20.202 20.202 0 0 1 100 72.35449735449735 A 24.506 24.506 0 0 1 98.67272727272713 79.60317460317461 A 18.27 18.27 0 0 1 93.06818181818193 87.43386243386243 Q 86.13636363636384 93.65079365079366 73.97727272727262 96.82539682539684 A 27.202 27.202 0 0 1 56.599999999999994 99.6256613756614 A 34.682 34.682 0 0 1 46.36363636363657 100 Q 32.72727272727293 100 19.318181818181817 97.22222222222223 Q 5.909090909091219 94.44444444444446 0 91.00529100529101 Z"),t.set("T","M 38.44580777096098 100 L 38.44580777096098 13.333333333333332 L 0 13.333333333333332 L 0 0 L 100 0 L 100 13.333333333333332 L 61.145194274028704 13.333333333333332 L 61.145194274028704 100 L 38.44580777096098 100 Z"),t.set("U","M 0 56.51006711409396 L 0 0 L 21.374045801526766 0 L 21.374045801526766 56.77852348993289 Q 21.374045801526766 72.48322147651007 28.053435114503856 79.26174496644295 Q 34.356870229007875 85.66040268456375 48.31297709923662 86.02013422818793 A 24.177 24.177 0 0 0 50 86.04026845637586 Q 65.26717557251905 86.04026845637586 71.85114503816799 79.39597315436242 A 14.689 14.689 0 0 0 75.32251908396944 74.33288590604027 Q 77.74045801526724 69.22684563758389 78.28053435114491 61.457718120805374 A 71.582 71.582 0 0 0 78.43511450381692 56.77852348993289 L 78.43511450381692 0 L 100 0 L 100 56.51006711409396 A 60.376 60.376 0 0 1 98.77862595419829 68.71812080536913 Q 96.09351145038164 81.08724832214764 87.50000000000011 88.79194630872485 A 21.034 21.034 0 0 1 64.074427480916 98.95973154362417 A 33.011 33.011 0 0 1 50 100 Q 31.910305343511403 100 20.664122137404497 94.74362416107384 A 18.555 18.555 0 0 1 11.832061068702357 88.85906040268456 Q 3.080152671755782 80.61879194630873 0.8015267175573894 66.87114093959732 A 66.791 66.791 0 0 1 0 56.51006711409396 Z"),t.set("V","M 48.99135446685872 100 L 0 0 L 18.299711815562002 0 L 50 68.70748299319727 L 81.84438040345805 0 L 100 0 L 51.152737752161315 100 L 48.99135446685872 100 Z"),t.set("W","M 50.35035035035026 0 L 70.4704704704705 64.54668470906631 L 88.08808808808801 0.5412719891745603 L 100 0.5412719891745603 L 71.37137137137127 100 L 69.96996996997 100 L 49.949949949949996 35.588633288227335 L 30.03003003003 99.86468200270637 L 28.628628628628512 99.86468200270637 L 0 0.5412719891745603 L 11.911911911911993 0.5412719891745603 L 29.5295295295295 64.54668470906631 L 49.74974974974975 0 L 50.35035035035026 0 Z"),t.set("X","M 0 100 L 38.59348198970829 47.89115646258504 L 2.229845626072346 0 L 25.385934819897315 0 L 49.22813036020575 34.965986394557824 L 73.75643224699806 0 L 96.39794168096033 0 L 59.862778730703226 47.61904761904762 L 100 100 L 77.18696397941657 100 L 49.399656946826916 60.40816326530612 L 22.12692967409957 100 L 0 100 Z"),t.set("Y","M 41.06280193236706 100 L 41.06280193236706 53.33333333333334 L 0 0 L 21.578099838969504 0 L 50.080515297906715 39.45578231292517 L 78.58293075684355 0 L 100 0 L 59.098228663446 53.605442176870746 L 59.098228663446 100 L 41.06280193236706 100 Z"),t.set("Z","M 0 100 L 67.64705882352963 13.061224489795919 L 8.63970588235301 13.061224489795919 L 8.63970588235301 0 L 100 0 L 33.272058823529605 86.66666666666667 L 97.24264705882354 86.66666666666667 L 97.24264705882354 100 L 0 100 Z"),t}()}connectedCallback(){super.connectedCallback(),this.setSequence(),this.addEventListener("load",(t=>{this.data=t.detail.payload}))}static get observedAttributes(){return ll.observedAttributes.concat("highlightstart","highlightend","sequence","height")}setSequence(t){this.sequence=t||JSON.parse(this.getAttribute("sequence")),this.sequence&&(this.setAttribute("length",this.sequence.length),super.svg?this.refresh():this._createSequence())}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),"sequence"==t&&this.setSequence(JSON.parse(n))}get data(){return this.sequence}set data(t){let e;"string"==typeof t?e=t:"sequence"in t&&(e=t.sequence),this.setSequence(JSON.parse(e))}_createSequence(){this.margin.left=30,super.svg=Dt(this).append("div").attr("style",`height: ${this._height}px`).attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this.seq_bg=super.svg.append("g").attr("class","background"),this.seq_g=super.svg.append("g").attr("class","sequence").attr("transform",`translate(0,${this.standardOffset()})`),this.line_path=super.svg.append("g").attr("class","linePlot").attr("transform",`translate(0,${this.standardOffset()})`).append("path"),this.marginBlock=super.svg.append("rect").attr("height",this._height).attr("width",this.margin.left).attr("fill","white"),this.x_axis_g=super.svg.append("g").attr("class","x axis").attr("transform",`translate(${this.margin.left},${this._height-1})`),this.y_axis_g=super.svg.append("g").attr("class","y axis").attr("transform",`translate(${this.margin.left},-1)`).attr("style","background-color:white;"),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}standardOffset(){return.75*this._height}get heightFactor(){return this._height/this.maxBits}get maxBits(){return 4.322}get yScale(){return fr().domain([0,this.maxBits]).range([this.height,0])}refresh(){if(this.x_axis_g){const e=this.getSingleBaseWidth(),n=e-10,i=1-n,r=Math.round(Math.max(0,this._displaystart-2)),s=Math.round(Math.min(this.sequence.length,this._displayend+1)),o=[];let a=[];try{n>0&&this.sequence.slice(r,s).forEach(((t,e)=>{t.forEach(((n,i)=>{const s=i+1==t.length;o.push({start:1+r+e,end:1+r+e,aa:n.aa,bits:n.bits,yOffset:s?0:t.slice(i+1).map((t=>t.bits)).reduce(((t,e)=>t+e))})}))})),i>0&&(a=this.sequence.slice(r,s).map(((t,e)=>{const n={},i=1==t.length;return n.y=i?t[0].bits:t.map((t=>t.bits)).reduce(((t,e)=>t+e)),n.x=e,n.position=1+r+e,n})))}catch(t){console.log("error: "+JSON.stringify(t))}this.xAxis=E(this.xScale).ticks(5),this.yAxis=(t=this.yScale,M(4,t)).tickValues([1,2,3,4]),this.x_axis_g.call(this.xAxis),this.y_axis_g.call(this.yAxis),this.bases=this.seq_g.selectAll("path.base").data(o,(t=>t.start)),this.bases.enter().append("path").attr("class","base feature").attr("d",(t=>this.pathmap.get(t.aa))).attr("stroke",(t=>this.colorByChemistry(t.aa))).attr("fill",(t=>this.colorByChemistry(t.aa))).attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)}, ${-this.standardOffset()+(this._height-this.heightFactor*(t.bits+t.yOffset))}) scale(${e/this._height*this._height/100}, ${t.bits/this.maxBits*this._height/100})`)).call(this.bindEvents,this),this.bases.attr("transform",(t=>`translate(${this.getXFromSeqPosition(t.start)}, ${-this.standardOffset()+(this._height-this.heightFactor*(t.bits+t.yOffset))}) scale(${e/this._height*this._height/100}, ${t.bits/this.maxBits*this._height/100})`)).call(this.bindEvents,this),this.bases.exit().remove(),this.line_path.data([a]).attr("d",function(){var t=Ar,e=Lr,n=br(!0),i=null,r=xr,s=null;function o(o){var a,h,l,u=o.length,c=!1;for(null==i&&(s=r(l=_r())),a=0;a<=u;++a)!(a<u&&n(h=o[a],a,o))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+t(h,a,o),+e(h,a,o));if(l)return s=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:br(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:br(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:br(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),o):i},o}().x((t=>this.getXFromSeqPosition(t.position)+e/2)).y((t=>(1-t.y)*this.heightFactor+2))).attr("stroke","black").attr("fill","none"),this.background=this.seq_bg.selectAll("rect.base_bg").data(o,(t=>t.start)),this.background.enter().append("rect").attr("class","base_bg feature").attr("height",this._height).merge(this.background).attr("width",e).attr("fill",(t=>Math.round(t.start)%2?"#ddd":"#eee")).attr("x",(t=>this.getXFromSeqPosition(t.start))).call(this.bindEvents,this),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,n)),this.line_path.style("opacity",Math.min(1,i)),this.seq_bg.style("opacity",Math.min(1,n)),this._updateHighlight()}var t}getXFromSeqPosition(t){return this.margin.left+this.xScale(t)}colorByChemistry(t){switch(t){case"G":case"S":case"T":case"Y":case"C":return"green";case"Q":case"N":return"purple";case"K":case"R":case"H":return"blue";case"D":case"E":return"red";case"A":case"V":case"L":case"I":case"P":case"W":case"F":case"M":return"black"}return"papayawhip"}_updateHighlight(){this.trackHighlighter.updateHighlight()}},wl="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,xl=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},Al=`{{lit-${String(Math.random()).slice(2)}}}`,Ll=`\x3c!--${Al}--\x3e`,Sl=new RegExp(`${Al}|${Ll}`),Ml="$lit$";class El{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],r=document.createTreeWalker(e.content,133,null,!1);let s=0,o=-1,a=0;const{strings:h,values:{length:l}}=t;for(;a<l;){const t=r.nextNode();if(null!==t){if(o++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let i=0;for(let t=0;t<n;t++)kl(e[t].name,Ml)&&i++;for(;i-- >0;){const e=h[a],n=Tl.exec(e)[2],i=n.toLowerCase()+Ml,r=t.getAttribute(i);t.removeAttribute(i);const s=r.split(Sl);this.parts.push({type:"attribute",index:o,name:n,strings:s}),a+=s.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),r.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(Al)>=0){const i=t.parentNode,r=e.split(Sl),s=r.length-1;for(let e=0;e<s;e++){let n,s=r[e];if(""===s)n=Nl();else{const t=Tl.exec(s);null!==t&&kl(t[2],Ml)&&(s=s.slice(0,t.index)+t[1]+t[2].slice(0,-Ml.length)+t[3]),n=document.createTextNode(s)}i.insertBefore(n,t),this.parts.push({type:"node",index:++o})}""===r[s]?(i.insertBefore(Nl(),t),n.push(t)):t.data=r[s],a+=s}}else if(8===t.nodeType)if(t.data===Al){const e=t.parentNode;null!==t.previousSibling&&o!==s||(o++,e.insertBefore(Nl(),t)),s=o,this.parts.push({type:"node",index:o}),null===t.nextSibling?t.data="":(n.push(t),o--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(Al,e+1));)this.parts.push({type:"node",index:-1}),a++}}else r.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const kl=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},Cl=t=>-1!==t.index,Nl=()=>document.createComment(""),Tl=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Ol(t,e){const{element:{content:n},parts:i}=t,r=document.createTreeWalker(n,133,null,!1);let s=Rl(i),o=i[s],a=-1,h=0;const l=[];let u=null;for(;r.nextNode();){a++;const t=r.currentNode;for(t.previousSibling===u&&(u=null),e.has(t)&&(l.push(t),null===u&&(u=t)),null!==u&&h++;void 0!==o&&o.index===a;)o.index=null!==u?-1:o.index-h,s=Rl(i,s),o=i[s]}l.forEach((t=>t.parentNode.removeChild(t)))}const Pl=t=>{let e=11===t.nodeType?0:1;const n=document.createTreeWalker(t,133,null,!1);for(;n.nextNode();)e++;return e},Rl=(t,e=-1)=>{for(let n=e+1;n<t.length;n++){const e=t[n];if(Cl(e))return n}return-1},jl=new WeakMap,zl=t=>"function"==typeof t&&jl.has(t),Fl={},Hl={};class ql{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=wl?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let r,s=0,o=0,a=i.nextNode();for(;s<n.length;)if(r=n[s],Cl(r)){for(;o<r.index;)o++,"TEMPLATE"===a.nodeName&&(e.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=e.pop(),a=i.nextNode());if("node"===r.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,r.name,r.strings,this.options));s++}else this.__parts.push(void 0),s++;return wl&&(document.adoptNode(t),customElements.upgrade(t)),t}}const $l=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),Vl=` ${Al} `;class Ql{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let i=0;i<t;i++){const t=this.strings[i],r=t.lastIndexOf("\x3c!--");n=(r>-1||n)&&-1===t.indexOf("--\x3e",r+1);const s=Tl.exec(t);e+=null===s?t+(n?Vl:Ll):t.substr(0,s.index)+s[1]+s[2]+Ml+s[3]+Al}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==$l&&(e=$l.createHTML(e)),t.innerHTML=e,t}}const Wl=t=>null===t||!("object"==typeof t||"function"==typeof t),Il=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class Ul{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new Dl(this)}_getValue(){const t=this.strings,e=t.length-1,n=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=n[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!Il(t))return t}let i="";for(let r=0;r<e;r++){i+=t[r];const e=n[r];if(void 0!==e){const t=e.value;if(Wl(t)||!Il(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Dl{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===Fl||Wl(t)&&t===this.value||(this.value=t,zl(t)||(this.committer.dirty=!0))}commit(){for(;zl(this.value);){const t=this.value;this.value=Fl,t(this)}this.value!==Fl&&this.committer.commit()}}class Bl{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Nl()),this.endNode=t.appendChild(Nl())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Nl()),t.__insert(this.endNode=Nl())}insertAfterPart(t){t.__insert(this.startNode=Nl()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;zl(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Fl,t(this)}const t=this.__pendingValue;t!==Fl&&(Wl(t)?t!==this.value&&this.__commitText(t):t instanceof Ql?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Il(t)?this.__commitIterable(t):t===Hl?(this.value=Hl,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof ql&&this.value.template===e)this.value.update(t.values);else{const n=new ql(e,t.processor,this.options),i=n._clone();n.update(t.values),this.__commitNode(i),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const r of t)n=e[i],void 0===n&&(n=new Bl(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(r),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){xl(this.startNode.parentNode,t.nextSibling,this.endNode)}}class Zl{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;zl(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Fl,t(this)}if(this.__pendingValue===Fl)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=Fl}}class Xl extends Ul{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new Gl(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Gl extends Dl{}let Yl=!1;(()=>{try{const t={get capture(){return Yl=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class Kl{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;zl(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=Fl,t(this)}if(this.__pendingValue===Fl)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=Jl(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=Fl}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const Jl=t=>t&&(Yl?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);function tu(t){let e=eu.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},eu.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(Al);return n=e.keyString.get(i),void 0===n&&(n=new El(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const eu=new Map,nu=new WeakMap,iu=new class{handleAttributeExpressions(t,e,n,i){const r=e[0];return"."===r?new Xl(t,e.slice(1),n).parts:"@"===r?[new Kl(t,e.slice(1),i.eventContext)]:"?"===r?[new Zl(t,e.slice(1),n)]:new Ul(t,e,n).parts}handleTextExpression(t){return new Bl(t)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const ru=(t,...e)=>new Ql(t,e,"html",iu),su=(t,e)=>`${t}--${e}`;let ou=!0;void 0===window.ShadyCSS?ou=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),ou=!1);const au=t=>e=>{const n=su(e.type,t);let i=eu.get(n);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},eu.set(n,i));let r=i.stringsArray.get(e.strings);if(void 0!==r)return r;const s=e.strings.join(Al);if(r=i.keyString.get(s),void 0===r){const n=e.getTemplateElement();ou&&window.ShadyCSS.prepareTemplateDom(n,t),r=new El(e,n),i.keyString.set(s,r)}return i.stringsArray.set(e.strings,r),r},hu=["html","svg"],lu=new Set;window.JSCompiler_renameProperty=(t,e)=>t;const uu={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},cu=(t,e)=>e!==t&&(e==e||t==t),fu={attribute:!0,type:String,converter:uu,reflect:!1,hasChanged:cu};class pu extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,n)=>{const i=this._attributeNameForProperty(n,e);void 0!==i&&(this._attributeToPropertyMap.set(i,n),t.push(i))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=fu){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const n="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const r=this[t];this[e]=i,this.requestUpdateInternal(t,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||fu}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const n of e)this.createProperty(n,t[n])}}static _attributeNameForProperty(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,n=cu){return n(t,e)}static _propertyValueFromAttribute(t,e){const n=e.type,i=e.converter||uu,r="function"==typeof i?i:i.fromAttribute;return r?r(t,n):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const n=e.type,i=e.converter;return(i&&i.toAttribute||uu.toAttribute)(t,n)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,n){e!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,e,n=fu){const i=this.constructor,r=i._attributeNameForProperty(t,n);if(void 0!==r){const t=i._propertyValueToAttribute(e,n);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(r):this.setAttribute(r,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const n=this.constructor,i=n._attributeToPropertyMap.get(t);if(void 0!==i){const t=n.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=n._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,n){let i=!0;if(void 0!==t){const r=this.constructor;n=n||r.getPropertyOptions(t),r._valueHasChanged(this[t],e,n.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,n))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}pu.finalized=!0;const du=Element.prototype;du.msMatchesSelector||du.webkitMatchesSelector;const gu=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,mu=Symbol();class yu{constructor(t,e){if(e!==mu)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(gu?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const vu=(t,...e)=>{const n=e.reduce(((e,n,i)=>e+(t=>{if(t instanceof yu)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(n)+t[i+1]),t[0]);return new yu(n,mu)};(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const _u={};class bu extends pu{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,n)=>t.reduceRight(((t,n)=>Array.isArray(n)?e(n,t):(t.add(n),t)),n),n=e(t,new Set),i=[];n.forEach((t=>i.unshift(t))),this._styles=i}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>t instanceof CSSStyleSheet&&!gu?(t=>new yu(String(t),mu))(Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"")):t))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?gu?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==_u&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return _u}}bu.finalized=!0,bu.render=(t,e,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const i=n.scopeName,r=nu.has(e),s=ou&&11===e.nodeType&&!!e.host,o=s&&!lu.has(i),a=o?document.createDocumentFragment():e;if(((t,e,n)=>{let i=nu.get(e);void 0===i&&(xl(e,e.firstChild),nu.set(e,i=new Bl(Object.assign({templateFactory:tu},n))),i.appendInto(e)),i.setValue(t),i.commit()})(t,a,Object.assign({templateFactory:au(i)},n)),o){const t=nu.get(a);nu.delete(a);((t,e,n)=>{lu.add(t);const i=n?n.element:document.createElement("template"),r=e.querySelectorAll("style"),{length:s}=r;if(0===s)return void window.ShadyCSS.prepareTemplateStyles(i,t);const o=document.createElement("style");for(let t=0;t<s;t++){const e=r[t];e.parentNode.removeChild(e),o.textContent+=e.textContent}(t=>{hu.forEach((e=>{const n=eu.get(su(e,t));void 0!==n&&n.keyString.forEach((t=>{const{element:{content:e}}=t,n=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{n.add(t)})),Ol(t,n)}))}))})(t);const a=i.content;n?function(t,e,n=null){const{element:{content:i},parts:r}=t;if(null==n)return void i.appendChild(e);const s=document.createTreeWalker(i,133,null,!1);let o=Rl(r),a=0,h=-1;for(;s.nextNode();)for(h++,s.currentNode===n&&(a=Pl(e),n.parentNode.insertBefore(e,n));-1!==o&&r[o].index===h;){if(a>0){for(;-1!==o;)r[o].index+=a,o=Rl(r,o);return}o=Rl(r,o)}}(n,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(i,t);const h=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)e.insertBefore(h.cloneNode(!0),e.firstChild);else if(n){a.insertBefore(o,a.firstChild);const t=new Set;t.add(o),Ol(n,t)}})(i,a,t.value instanceof ql?t.value.template:void 0),xl(e,e.firstChild),e.appendChild(a),nu.set(e,t)}!r&&s&&window.ShadyCSS.styleElement(e.host)};const wu=(t,e=0)=>{const n=(t||"").match(/(\d+\.?\d*)px/);return n?+n[1]:e},xu=class extends bu{static get properties(){return{title:{type:String,reflect:!0},x:{type:Number,reflect:!0},y:{type:Number,reflect:!0},visible:{type:Boolean,reflect:!0},container:{type:String,reflect:!0}}}constructor(){super(),this.title="",this.x=0,this.y=0,this.visible=!1,this.container="html",this._changeHandler=()=>this.requestUpdate(),this._observer=new MutationObserver(this._changeHandler)}connectedCallback(){super.connectedCallback(),this._observer.observe(this,{subtree:!0,characterData:!0,childList:!0}),window.addEventListener("resize",this._changeHandler)}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect(),window.removeEventListener("resize",this._changeHandler)}static get styles(){return vu`
      :host {
        --z-index: 50000;
        --title-color: black;
        --text-color: white;
        --body-color: #616161;
        --triangle-width: ${16}px;
        --triangle-height: ${10}px;
        --triangle-margin: ${10}px;
        --vertical-distance: ${5}px;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        margin: 0;
      }

      h1 {
        background-color: var(--title-color);
        line-height: 2em;
        padding: 0 1ch;
      }

      .tooltip {
        font-family: Roboto, Arial, sans-serif;
        font-size: 0.9rem;
        top: 0;
        left: 0;
        display: block;
        position: absolute;
        min-width: 220px;
        max-width: 50vw;

        /* user overridable through custom properties */
        z-index: var(--z-index);
        color: var(--text-color);

        /* will change those */
        opacity: 0;
        pointer-events: none;
        transform: translate(0, 0);
      }

      .tooltip.visible {
        opacity: 0.9;
        pointer-events: auto;
      }

      .tooltip::before {
        content: "";
        position: absolute;
        pointer-events: none;
        border-style: solid;
        border-color: transparent;
        border-width: 0 calc(var(--triangle-width) / 2);
      }

      .tooltip.arrow-left::before {
        left: var(--triangle-margin);
      }

      .tooltip.arrow-right::before {
        right: var(--triangle-margin);
      }

      .tooltip.arrow-up::before {
        top: calc(-1 * var(--triangle-height));
        border-bottom-color: var(--title-color);
        border-bottom-width: var(--triangle-height);
      }

      .tooltip.arrow-down::before {
        bottom: calc(-1 * var(--triangle-height));
        border-top-color: var(--body-color);
        border-top-width: var(--triangle-height);
      }

      :host a,
      :host a:link,
      :host a:active,
      :host a:hover {
        color: #fff;
      }

      .tooltip-body {
        padding: 1em;
        background: var(--body-color);
        font-weight: normal;
        overflow-y: auto;
        max-height: 40vh;
      }

      ::slotted(h4) {
        font-size: 1.2rem !important;
        margin: 0 0 0.5rem 0 !important;
        font-weight: 600 !important;
        color: #fff !important;
      }

      ::slotted(h5) {
        font-size: 1rem !important;
        margin: 0 !important;
        font-weight: 500 !important;
        color: #fff !important;
      }

      ::slotted(h6) {
        font-size: 1rem !important;
        margin: 0 !important;
        font-weight: 300 !important;
        color: #fff !important;
      }

      ::slotted(p) {
        margin: 0.25rem 0 1rem 0 !important;
      }

      ::slotted(ul) {
        list-style: none !important;
        margin: 0.25rem 0 1rem 0 !important;
        padding: 0 !important;
      }
    `}_getPosition(){if(!this.shadowRoot.firstElementChild)return{};const t=document.querySelector(this.container||"html").getBoundingClientRect(),e=this.shadowRoot.firstElementChild.getBoundingClientRect(),n=getComputedStyle(this),i=wu(n.getPropertyValue("--triangle-width"),16),r=wu(n.getPropertyValue("--triangle-height"),10),s=wu(n.getPropertyValue("--triangle-margin"),10),o=wu(n.getPropertyValue("--vertical-distance"),5);let a=this.x-i/2-s,h="left";a+e.width<=t.right||(h="right",a=this.x-e.width+i/2+s);let l=this.y+r+o,u="up";return l+e.height<=t.height||(u="down",l=this.y-e.height-r-o),{x:a,y:l,horizontal:h,vertical:u}}firstUpdated(){this.requestUpdate()}render(){let t=this.title&&this.visible;const e=t?this._getPosition():{};t=e.x&&t;const n=t&&`transform: translate(${e.x}px, ${e.y}px);`;return ru`
        <section
          class="tooltip arrow-${e.horizontal||"left"} arrow-${e.vertical||"up"} ${t?"visible":""}"
          style="${n}"
        >
          <h1>${this.title}</h1>
          <div class="tooltip-body"><slot></slot></div>
        </sectionclass="tooltip>
      `}};function Au(t,e){const n={type:e.type,accession:e.name,start:e.startResidue,end:e.endResidue,displayName:e.displayName};switch(e.type){case"alpha-helix":n.color="red",n.shape="helix";break;case"alphaC-beta4 Loop":n.color="chartreuse",n.shape="bridge";break;case"beta-strand":n.color="green",n.shape="strand";break;case"Activation Loop":n.color="yellow";break;case"Activation Segment":n.color="red",n.shape="roundRectangle";break;case"Catalytic Loop":n.color="brown",n.shape="bridge";break;case"Glycine Loop":n.color="black",n.shape="bridge";break;case"Subdomain":t.ticktock=!t.ticktock,n.color=t.ticktock?"#ddd":"#eee",n.shape="roundRectangle";break;case"Linker":n.color="cyan",n.shape="bridge";break;case"KeyAA":n.shape="diamond",n.color="orange";break;case"R-Spine":n.shape="diamond",n.color="red";break;case"C-Spine":n.shape="diamond",n.color="blue";break;case"R-Spine Shell":n.color="chartreuse";break;case"N-Lobe":case"C-Lobe":t.ticktock2=!t.ticktock2,n.color=t.ticktock2?"#ddd":"#eee",n.shape="roundRectangle";break;case"Gatekeeper":case"CMGC Insert":case"Motif":n.color="brown"}return n}class Lu extends HTMLElement{constructor(){super()}connectedCallback(){const t=document.createElement("style");t.textContent=".legend {display: flex; flex-wrap: wrap; place-content: space-around;}.entry{display:flex; padding-right:10px;}.label{width:75px; display: flex; align-items: center;}",this.appendChild(t),this.container=document.createElement("div"),this.container.className="legend",this.appendChild(this.container),[Au(this,{type:"Subdomain",name:"A",startResidue:1,endResidue:9}),Au(this,{type:"alpha-helix",name:"B",startResidue:1,endResidue:9}),Au(this,{type:"beta-strand",name:"D",startResidue:1,endResidue:9}),Au(this,{type:"Activation Segment",name:"F",startResidue:1,endResidue:9}),Au(this,{type:"alphaC-beta4 Loop",name:"C",startResidue:1,endResidue:9}),Au(this,{type:"Catalytic Loop",name:"G",startResidue:1,endResidue:9}),Au(this,{type:"Glycine Loop",name:"H",startResidue:1,endResidue:9}),Au(this,{type:"Linker",name:"I",startResidue:1,endResidue:9}),Au(this,{type:"KeyAA",displayName:"Key Amino Acid",name:"J",startResidue:5,endResidue:5}),Au(this,{type:"R-Spine",name:"K",startResidue:5,endResidue:5}),Au(this,{type:"C-Spine",name:"L",startResidue:5,endResidue:5}),Au(this,{type:"R-Spine Shell",name:"M",startResidue:1,endResidue:9}),Au(this,{type:"Motif",name:"R",startResidue:1,endResidue:9})].forEach((t=>{const e=document.createElement("div");e.className="entry",this.container.appendChild(e);const n=document.createElement("span");e.appendChild(n),n.className="label",n.innerText=t.displayName||t.type;const i=document.createElement("protvista-track");i.className="legendTrack",i.setAttribute("width",100),i.setAttribute("length",100),i.setAttribute("displaystart",1),i.setAttribute("displayend",9),e.appendChild(i),i.setAttribute("id","track-"+t.accession),i.style="width:85px",i.style.paddingLeft=0,i.data=[t]}))}}class Su extends HTMLElement{constructor(){super()}createStyle(){const t=document.createElement("style");return t.textContent=".trackLabel{min-width:100px; max-width:100px; align-self:center; text-align:end; font-size:small;} .trackContainer{display:flex;}",t}createManager(){return document.createElement("protvista-manager")}createNavigation(){const t=document.createElement("protvista-navigation");return t.setAttribute("length",this.maxLength),t.margin.left=30,t}createWebLogo(){const t=document.createElement("ncats-sequence-logo");return t.setAttribute("height","100"),t.addEventListener("mouseout",(t=>{if(!this.clicking)return this.hideTooltip()})),t.addEventListener("change",(t=>{if(t.detail.displaystart||t.detail.displayend)return this.clicking=!1,this.hideTooltip();if(t.detail.feature){if("click"==t.detail.eventtype)return this.clicking=!0,this.showLogoTooltip(t);if("mouseover"==t.detail.eventtype&&!this.clicking)return this.showLogoTooltip(t)}})),t}createTooltip(){const t=document.createElement("protvista-tooltip");return t.style.setProperty("--title-color","#616161"),t.style.setProperty("--body-color","#616161"),t}wrapElement(t,e){const n=document.createElement("div");n.className="trackContainer";const i=document.createElement("div");return i.className="trackLabel",t.length>0?i.innerText=t:i.innerHTML="&nbsp;",n.appendChild(i),n.appendChild(e),n}connectedCallback(){this.maxLength=10,this.appendChild(this.createStyle()),this.manager=this.createManager(),this.appendChild(this.manager),this.navigation=this.createNavigation(),this.manager.appendChild(this.wrapElement("",this.navigation)),this.weblogo=this.createWebLogo(),this.manager.appendChild(this.wrapElement("Ortholog Variants",this.weblogo)),this.tooltip=this.createTooltip(),this.manager.appendChild(this.tooltip),this.attributeChangedCallback("sequence","",this.getAttribute("sequence")),this.attributeChangedCallback("annotations","",this.getAttribute("annotations")),document.addEventListener("click",(t=>{t.path.map((t=>t.localName||"")).includes("protvista-manager")||(this.clicking=!1,this.hideTooltip())}))}static get observedAttributes(){return["sequence","annotations"]}updateLength(t){t>this.maxLength&&(this.maxLength=t),this.maxLength>0&&(this.navigation&&this.navigation.setAttribute("length",this.maxLength),this.annotationMap&&this.annotationMap.forEach(((t,e)=>{const n=this.manager.querySelector("#"+this.name2id(e));n&&n.setAttribute("length",this.maxLength)})))}get nameSubdomains(){return"Subdomains"}get nameSecondary(){return"Secondary Structure"}get nameFunctional(){return"Functional Regions"}get nameMotifs(){return"Motifs"}name2id(t){return t.replace(" ","_")}typeToTrack(t){return["Subdomain","N-Lobe","C-Lobe"].includes(t)?"Subdomains":["alpha-helix","beta-strand","alphaC-beta4 Loop","Glycine Loop","Linker"].includes(t)?"Secondary Structure":["KeyAA","Motif"].includes(t)?"Motifs":["Catalytic Loop","Activation Loop","Activation Segment","Gatekeeper","CMGC Insert"].includes(t)?"Functional Regions":["R-Spine","C-Spine","R-Spine Shell"].includes(t)?"temp":"undetermined"}compileAnnotations(t){this.annotationMap=new Map,t.forEach((t=>{const e=this.typeToTrack(t.type);if(e){let n=[];this.annotationMap.has(e)?n=this.annotationMap.get(e):this.annotationMap.set(e,n),n.push(Au(this,t))}}));let e=this.annotationMap.get("temp"),n=this.annotationMap.get(this.nameMotifs);const i=this.convertToDiscontinuousElement(e.filter((t=>"R-Spine"==t.type)),"R-Spine"),r=this.convertToDiscontinuousElement(e.filter((t=>"C-Spine"==t.type)),"C-Spine"),s=this.convertToDiscontinuousElement(e.filter((t=>"R-Spine Shell"==t.type)),"R-Spine Shell");n.push(i),n.push(r),n.push(s),this.annotationMap.delete("temp")}convertToDiscontinuousElement(t,e){return{shape:t[0].shape,color:t[0].color,accession:e,tooltipContent:`Residues: ${t.map((t=>t.start)).join(", ")}`,locations:[{fragments:t.map((t=>({start:t.start,end:t.end})))}]}}convertToCopiedElements(t){return{shape:t[0].shape,color:t[0].color,accession:t[0].accession,start:t[0].start,end:t[0].end,locations:t.map((t=>({fragments:[{start:t.start,end:t.end}]})))}}updateAnnotations(t){this.compileAnnotations(t);let e=0,n=0;if(this.manager){for(const t of[this.nameSubdomains,this.nameSecondary,this.nameFunctional,this.nameMotifs]){const e=this.annotationMap.get(t);if(e&&e.length>0){const n=this.manager.querySelector("#"+this.name2id(t))||document.createElement("protvista-track");n.setAttribute("id",this.name2id(t)),t==this.nameSubdomains&&n.setAttribute("layout","non-overlapping"),this.manager.appendChild(this.wrapElement(t,n)),n.data=e,n.addEventListener("mouseout",(t=>{this.clicking||this.hideTooltip()})),n.addEventListener("change",(t=>{if(t.detail.displaystart||t.detail.displayend)return this.clicking=!1,this.hideTooltip();if(t.detail.feature&&t.detail.feature.accession){if("click"==t.detail.eventtype)return this.clicking=!0,this.showTrackTooltip(t);if("mouseover"==t.detail.eventtype&&!this.clicking)return this.showTrackTooltip(t)}}))}}e=Math.max(...this.annotations.map((t=>t.endResidue))),n=Math.min(...this.annotations.map((t=>t.startResidue))),this.updateLength(e)}return{displayStart:n,displayEnd:e}}hideTooltip(){document.querySelectorAll("protvista-tooltip").forEach((t=>t.visible=!1))}showTrackTooltip(t){const e=t.detail.feature;e&&this.showTooltip(e.accession,e.tooltipContent||`start: ${e.start}<br/>end: ${e.end}`,t)}showLogoTooltip(t){const e=this.sequence[t.detail.feature.start-1].map((t=>`${t.aa}: ${t.bits.toFixed(4)} bits`)).join("<br/>");this.showTooltip(`Residue ${t.detail.feature.start}`,e,t)}showTooltip(t,e,n){const i=n.path.map((t=>t.localName||"")),r=n.detail.target.getBoundingClientRect(),s=r.x+r.width/2;let o=r.y+r.height/2;i.includes("ncats-sequence-logo")&&(o=n.target.getBoundingClientRect().y+85);const a=this.manager.getBoundingClientRect();this.tooltip.title=t,this.tooltip.innerHTML=e,this.tooltip.x=s-a.x,this.tooltip.y=o-a.y,this.tooltip.visible=!0}attributeChangedCallback(t,e,n){let i=75,r=0;if("sequence"==t&&(this.sequence=JSON.parse(n),this.sequence&&(this.updateLength(this.sequence.length),this.weblogo&&this.weblogo.setSequence(this.sequence),i=this.sequence.length)),"annotations"==t&&(this.annotations=JSON.parse(n),this.annotations&&this.annotations.length>0)){const t=this.updateAnnotations(this.annotations);i=t.displayEnd,r=t.displayStart}this.manager&&(this.manager.setAttribute("displayend",i),this.manager.setAttribute("displaystart",r))}}const Mu=()=>{window.customElements.define("protvista-manager",h),window.customElements.define("protvista-navigation",_l),window.customElements.define("protvista-track",yl),window.customElements.define("protvista-tooltip",xu),window.customElements.define("ncats-sequence-logo",bl),window.customElements.define("ncats-protvista-viewer",Su),window.customElements.define("ncats-protvista-legend",Lu)};window.customElements?Mu():document.addEventListener("WebComponentsReady",(()=>{Mu()}))}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(13),n(676)})();