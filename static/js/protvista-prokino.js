/*! For license information please see protvista-prokino.js.LICENSE.txt */
var ProtvistaProkino;(()=>{"use strict";var t={837:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&a[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},423:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},350:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(r," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}return[e].join("\n")}},985:(t,e,n)=>{n.r(e),n.d(e,{AttributeCommitter:()=>x,AttributePart:()=>w,BooleanAttributePart:()=>k,DefaultTemplateProcessor:()=>T,EventPart:()=>S,NodePart:()=>C,PropertyCommitter:()=>B,PropertyPart:()=>I,SVGTemplateResult:()=>y,Template:()=>f,TemplateInstance:()=>b,TemplateResult:()=>m,createMarker:()=>v,defaultTemplateProcessor:()=>L,directive:()=>r,html:()=>z,isDirective:()=>o,isPrimitive:()=>_,isTemplatePartActive:()=>g,noChange:()=>c,parts:()=>P,removeNodes:()=>l,render:()=>j,reparentNodes:()=>s,svg:()=>R,templateCaches:()=>N,templateFactory:()=>q});const i=new WeakMap,r=t=>(...e)=>{const n=t(...e);return i.set(n,!0),n},o=t=>"function"==typeof t&&i.has(t),a=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,s=(t,e,n=null,i=null)=>{let r=e;for(;r!==n;){const e=r.nextSibling;t.insertBefore(r,i),r=e}},l=(t,e,n=null)=>{let i=e;for(;i!==n;){const e=i.nextSibling;t.removeChild(i),i=e}},c={},h=`{{lit-${String(Math.random()).slice(2)}}}`,u=`\x3c!--${h}--\x3e`,p=new RegExp(`${h}|${u}`),d="$lit$";class f{constructor(t,e){this.parts=[],this.element=e;let n=-1,i=0;const r=[],o=e=>{const a=e.content,s=document.createTreeWalker(a,133,null,!1);let l,c;for(;s.nextNode();){n++,l=c;const e=c=s.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const r=e.attributes;let o=0;for(let t=0;t<r.length;t++)r[t].value.indexOf(h)>=0&&o++;for(;o-- >0;){const r=t.strings[i],o=A.exec(r)[2],a=o.toLowerCase()+d,s=e.getAttribute(a).split(p);this.parts.push({type:"attribute",index:n,name:o,strings:s}),e.removeAttribute(a),i+=s.length-1}}"TEMPLATE"===e.tagName&&o(e)}else if(3===e.nodeType){const t=e.nodeValue;if(t.indexOf(h)<0)continue;const o=e.parentNode,a=t.split(p),s=a.length-1;i+=s;for(let t=0;t<s;t++)o.insertBefore(""===a[t]?v():document.createTextNode(a[t]),e),this.parts.push({type:"node",index:n++});o.insertBefore(""===a[s]?v():document.createTextNode(a[s]),e),r.push(e)}else if(8===e.nodeType)if(e.nodeValue===h){const t=e.parentNode,o=e.previousSibling;null===o||o!==l||o.nodeType!==Node.TEXT_NODE?t.insertBefore(v(),e):n--,this.parts.push({type:"node",index:n++}),r.push(e),null===e.nextSibling?t.insertBefore(v(),e):n--,c=l,i++}else{let t=-1;for(;-1!==(t=e.nodeValue.indexOf(h,t+1));)this.parts.push({type:"node",index:-1})}}};o(e);for(const t of r)t.parentNode.removeChild(t)}}const g=t=>-1!==t.index,v=()=>document.createComment(""),A=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class b{constructor(t,e,n){this._parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this._parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const t=a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let n=0,i=0;const r=t=>{const o=document.createTreeWalker(t,133,null,!1);let a=o.nextNode();for(;n<e.length&&null!==a;){const t=e[n];if(g(t))if(i===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a),this._parts.push(t)}else this._parts.push(...this.processor.handleAttributeExpressions(a,t.name,t.strings,this.options));n++}else i++,"TEMPLATE"===a.nodeName&&r(a.content),a=o.nextNode();else this._parts.push(void 0),n++}};return r(t),a&&(document.adoptNode(t),customElements.upgrade(t)),t}}class m{constructor(t,e,n,i){this.strings=t,this.values=e,this.type=n,this.processor=i}getHTML(){const t=this.strings.length-1;let e="";for(let n=0;n<t;n++){const t=this.strings[n];let i=!1;e+=t.replace(A,((t,e,n,r)=>(i=!0,e+n+d+r+h))),i||(e+=u)}return e+this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}class y extends m{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),s(e,n.firstChild),t}}const _=t=>null===t||!("object"==typeof t||"function"==typeof t);class x{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new w(this)}_getValue(){const t=this.strings,e=t.length-1;let n="";for(let i=0;i<e;i++){n+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(null!=t&&(Array.isArray(t)||"string"!=typeof t&&t[Symbol.iterator]))for(const e of t)n+="string"==typeof e?e:String(e);else n+="string"==typeof t?t:String(t)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class w{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===c||_(t)&&t===this.value||(this.value=t,o(t)||(this.committer.dirty=!0))}commit(){for(;o(this.value);){const t=this.value;this.value=c,t(this)}this.value!==c&&this.committer.commit()}}class C{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(v()),this.endNode=t.appendChild(v())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t._insert(this.startNode=v()),t._insert(this.endNode=v())}insertAfterPart(t){t._insert(this.startNode=v()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this._pendingValue=t}commit(){for(;o(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}const t=this._pendingValue;t!==c&&(_(t)?t!==this.value&&this._commitText(t):t instanceof m?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):this._commitText(t))}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value&&this.value.template===e)this.value.update(t.values);else{const n=new b(e,t.processor,this.options),i=n._clone();n.update(t.values),this._commitNode(i),this.value=n}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,i=0;for(const r of t)n=e[i],void 0===n&&(n=new C(this.options),e.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(e[i-1])),n.setValue(r),n.commit(),i++;i<e.length&&(e.length=i,this.clear(n&&n.endNode))}clear(t=this.startNode){l(this.startNode.parentNode,t.nextSibling,this.endNode)}}class k{constructor(t,e,n){if(this.value=void 0,this._pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this._pendingValue=t}commit(){for(;o(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}if(this._pendingValue===c)return;const t=!!this._pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=t,this._pendingValue=c}}class B extends x{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new I(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class I extends w{}let E=!1;try{const t={get capture(){return E=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class S{constructor(t,e,n){this.value=void 0,this._pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this._boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this._pendingValue=t}commit(){for(;o(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}if(this._pendingValue===c)return;const t=this._pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=M(t),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=t,this._pendingValue=c}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const M=t=>t&&(E?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);class T{handleAttributeExpressions(t,e,n,i){const r=e[0];return"."===r?new B(t,e.slice(1),n).parts:"@"===r?[new S(t,e.slice(1),i.eventContext)]:"?"===r?[new k(t,e.slice(1),n)]:new x(t,e,n).parts}handleTextExpression(t){return new C(t)}}const L=new T;function q(t){let e=N.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},N.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(h);return n=e.keyString.get(i),void 0===n&&(n=new f(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const N=new Map,P=new WeakMap,j=(t,e,n)=>{let i=P.get(e);void 0===i&&(l(e,e.firstChild),P.set(e,i=new C(Object.assign({templateFactory:q},n))),i.appendInto(e)),i.setValue(t),i.commit()},z=(t,...e)=>new m(t,e,"html",L),R=(t,...e)=>new y(t,e,"svg",L)},822:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(350),r=n.n(i),o=n(837),a=n.n(o)()(r());a.push([t.id,'protvista-checkbox {\n  font-size: 12px;\n}\n\nprotvista-checkbox[disabled] {\n  opacity: 0.50;\n}\n\n.protvista_checkbox {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n  line-height: 24px;\n  outline: none;\n  font-size: 1em;\n}\n\n.protvista_checkbox_input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n  margin: 0;\n}\n\n.protvista_checkbox_label {\n  display: flex;\n  flex-direction: column;\n  text-indent: 1em;\n  margin-left: 16px;\n}\n\n.protvista_checkbox_input + .protvista_checkbox_label::before {\n  content: "";\n  width:  24px;\n  position: absolute;\n  left: 0;\n  top:  0;\n  bottom: 0;\n  border-radius: 4px;\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #bdc3c7;\n}\n',"",{version:3,sources:["webpack://./node_modules/protvista-filter/src/style.css"],names:[],mappings:"AAAA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,sBAAsB;EACtB,aAAa;EACb,mBAAmB;EACnB,gBAAgB;EAChB,iBAAiB;EACjB,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,UAAU;EACV,QAAQ;EACR,SAAS;EACT,SAAS;AACX;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,OAAO;EACP,OAAO;EACP,SAAS;EACT,kBAAkB;EAClB,cAAc;EACd,sBAAsB;EACtB,yBAAyB;AAC3B",sourcesContent:['protvista-checkbox {\n  font-size: 12px;\n}\n\nprotvista-checkbox[disabled] {\n  opacity: 0.50;\n}\n\n.protvista_checkbox {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n  line-height: 24px;\n  outline: none;\n  font-size: 1em;\n}\n\n.protvista_checkbox_input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n  margin: 0;\n}\n\n.protvista_checkbox_label {\n  display: flex;\n  flex-direction: column;\n  text-indent: 1em;\n  margin-left: 16px;\n}\n\n.protvista_checkbox_input + .protvista_checkbox_label::before {\n  content: "";\n  width:  24px;\n  position: absolute;\n  left: 0;\n  top:  0;\n  bottom: 0;\n  border-radius: 4px;\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #bdc3c7;\n}\n'],sourceRoot:""}]);const s=a},816:(t,e,n)=>{n.d(e,{Z:()=>p});var i=n(350),r=n.n(i),o=n(837),a=n.n(o),s=n(423),l=n.n(s),c=new URL(n(789),n.b),h=a()(r()),u=l()(c);h.push([t.id,'.protvista-pdb {\n    font-family: Helvetica,Arial,FreeSans,"Liberation Sans",sans-serif !important;\n    position: relative;\n    /* width: 100%; */\n    border: 1px solid lightgray;\n    margin-bottom: 20px;\n    padding: 20px 10px;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n\n.protvistaRow {\n    display: table;\n    width: 100%;\n    clear: both;\n}\n\n.protvistaCol1 {\n    display: table-cell;\n    vertical-align: middle;\n    width: 15%;\n    font-size:90%;\n}\n\n.protvistaCol2 {\n    display: table-cell;\n    width: 85%;\n    overflow: hidden;\n    padding-left: 10px;\n}\n\n@media (max-width: 1800px) {\n    .protvistaCol1 {\n        width: 20%;\n        font-size:90%;\n    }\n    .protvistaCol2 {\n        width: 80%;\n    }\n}\n\n@media (max-width: 1400px) {\n    .protvistaCol1 {\n        width: 22%;\n        font-size:90%;\n    }\n    .protvistaCol2 {\n        width: 78%;\n    }\n}\n\n@media (max-width: 1100px) {\n    .protvistaCol1 {\n        width: 25%;\n        font-size:75%;\n    }\n    .protvistaCol2 {\n        width: 75%;\n    }\n}\n\n@media (max-width: 1000px) {\n    .protvistaCol1 {\n        width: 27%;\n        font-size:70%;\n    }\n    .protvistaCol2 {\n        width: 73%;\n    }\n}\n\n@media (max-width: 767px) {\n    .protvistaCol1 {\n        width: 30%;\n        font-size:70%;\n    }\n    .protvistaCol2 {\n        width: 70%;\n    }\n}\n\n.category-label {\n    border-top: 1px solid #fff;\n    border-bottom: 1px solid #fff;\n    background-color: #b2f5ff;\n    cursor: pointer;\n    padding: .8em 1.3em .8em .8em;\n    position: relative;\n}\n\n.category-label:hover {\n    background-color: #80EEFF;\n}\n\n.category-label::before {\n    content: \' \';\n    display: inline-block;\n    width: 0;\n    height: 0;\n    border-top: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-left: 5px solid #333;\n    margin-right: 5px;\n    -webkit-transition: all .1s;\n    /* Safari */\n    transition: all .1s;\n}\n\n.protvistaRow.expanded > .category-label {\n    background-color: #80EEFF;\n}\n\n.protvistaRow.expanded > .category-label::before {\n    content: \' \';\n    display: inline-block;\n    width: 0;\n    height: 0;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-top: 5px solid #333;\n    margin-right: 5px;\n}\n\n.track-label {\n    background-color: #d9faff;\n    padding: 0.5em 1.2em 0.5em 1.8em;\n    cursor:pointer;\n    position: relative;\n}\n\n.category-label.pdbIconsLabel, .track-label.pdbIconsLabel {\n    border-left: 1px solid #b2f5ff;\n    border-right: 1px solid #b2f5ff;\n    background-color: #fff;\n}\n\n.aggregate-track-content, .track-content-single {\n    opacity: 1;\n    -webkit-transition: opacity .1s;\n    /* Safari */\n    transition: opacity .1s;\n    border-bottom: 1px solid #b2f5ff;\n}\n\n.aggregate-track-content{\n    padding-bottom: 5px;\n}\n\n.track-label, .track-content {\n    border-bottom: 1px solid #b2f5ff;\n}\n\n.top-border {\n    border-top: 1px solid #b2f5ff;\n}\n\n.is-hidden{\n    display: none!important;\n}\n\n.pdbIcon {\n    display: inline-block;\n    padding: 5px 4px;\n}\n\n.pdbIcon i {\n    color: #fff;\n    font-size: 21px;\n}\n\n.pdbIcon.rotate i {\n    filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=1);\n    -webkit-transform: rotate(90deg);\n    -moz-transform: rotate(90deg);\n    -ms-transform: rotate(90deg);\n    -o-transform: rotate(90deg);\n    transform: rotate(90deg);\n    display: inline-block;\n}\n\n.legendRow{\n    min-height: 30px;\n    line-height: 30px;\n}\n\n.legendColor {\n    display: inline-block;\n    height:10px;\n    width:26px;\n}\n\n.legendText{\n    /* min-width: 135px; */\n    display: inline-block;\n    font-size: 90%;\n    text-align: left;\n    color:#333;\n    margin-left: 2px;\n}\n\n.protvistaRowGroup{\n    max-height: 210px;\n    overflow-y: auto;\n    clear: both;\n    display: none;\n}\n\n.protvistaRowGroup.noPaddingRight > .protvistaRow > .protvistaCol2 {\n    padding-right: 0 !important;\n}\n\n.labelZoomIcon{\n    position: absolute;\n    left: 5px;\n    cursor: zoom-in;\n    color: #848a86;\n    top: 50%;\n    transform: translateY(-50%);\n    font-size: 12px;\n}\n\n.labelZoomIcon.active{\n    cursor: zoom-out!important;\n    color: #009e38!important;\n}\n\n.hideLabelIcon{\n    position: absolute;\n    right: 5px;\n    cursor: pointer;\n    color: #848a86;\n    top: 10%;\n    transform: translateY(-10%);\n    font-size: 10px;\n}\n\n.protvistaResetSectionIcon{\n    position: absolute;\n    border: 1px solid #828181;\n    background-color: #828181;\n    border-radius: 50%;\n    cursor: pointer;\n    text-align: center;\n    text-align: center;\n    width: 20px;\n    height: 20px;\n    line-height: 19px;\n    right: 10px;\n    display: none;\n}\n\n.protvistaResetSectionIcon i{\n    color: #fff;\n    cursor: pointer;\n    font-size:80%;\n}\n\n.protvistaToolbar{\n    text-align: right;\n}\n\n.protvistaToolbarIcon{\n    display: inline-block;\n    border: 1px solid #828181;\n    background-color: #828181;\n    border-radius: 50%;\n    margin-right: 10px;\n    cursor: pointer;\n    text-align: center;\n    text-align: center;\n    width: 30px;\n    height: 30px;\n    line-height: 28px;\n}\n\n.protvistaToolbar i{\n    color: #fff;\n    cursor: pointer;\n    margin:2px;\n}\n\n.protvistaRangeMenuTitle{\n    position: relative;\n    color: #1b1919;\n}\n\n.protvistaRangeMenuTitle > div{\n    padding: 10px 10px 0 10px;\n}\n\n.protvistaRangeMenuTitle > div:first-child{\n    font-weight: bold;\n    text-align: left;\n}\n\n.protvistaMenuClose{\n    position: absolute;\n    right: 10px;\n    top: 14px;\n    color: #6d6d6d;\n    font-size: 12px;\n    cursor: pointer;\n}\n\n.protvistaForm{\n    padding: 10px;\n    font-size: 12px;\n    max-height: 300px;\n    overflow: auto;\n    text-align: left;\n    font-weight: 600;\n    color: #444;\n}\n\n.divWithScroll {\n    position: relative;\n    clear: both;\n    overflow-y: scroll;\n    height:40px;\n}\n\n.label-tooltip .label-tooltip-text {\n    visibility: hidden;\n    /*white-space: nowrap;*/\n    width: 400px;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    border-radius: 6px;\n    padding: 5px;\n    position: absolute;\n    z-index: 1;\n    top: 5px;\n    left: 100%;\n}\n  \n.label-tooltip .label-tooltip-text::after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    right: 100%;\n    margin-top: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent black transparent transparent;\n}\n  \n.label-tooltip:hover .label-tooltip-text {\n    visibility: visible;\n}\n\n.protvista-pdb protvista-pdb-navigation .handle, \n.protvista-pdb protvista-navigation .handle {\n    fill: darkgray;\n    height: 19px !important;\n    stroke: black;\n}\n\nprotvista-tooltip {\n    z-index: 50000;\n    position: absolute;\n    min-width: 220px;\n    max-width: 350px;\n    margin-top: 20px;\n    margin-left: -20px;\n    -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n    -moz-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);\n    /*opacity: .9;*/\n}\n\nprotvista-tooltip[mirror="H"] {\n    margin-left: 0;\n    margin-right: 20px;\n}\n\nprotvista-tooltip .tooltip-header .tooltip-header-title{\n    color: #ffffff;\n}\n\n/* protvista-tooltip a,\nprotvista-tooltip a:link,\nprotvista-tooltip a:hover,\nprotvista-tooltip a:active,\nprotvista-tooltip a:visited {\n    color: #ffffff;\n} */\n\nprotvista-tooltip .tooltip-body {\n    /* color: #ffffff; */\n    color: #555;\n}\n\nprotvista-tooltip .tooltip-header {\n    background-color: #595959;\n    line-height: 3em;\n}\n\n/* protvista-tooltip .tooltip-header::before {\n    content: " ";\n    position: absolute;\n    bottom: 100%;\n    left: 20px;\n    margin-left: -10px;\n    border-width: 10px;\n    border-style: solid;\n    border-color: transparent transparent black transparent;\n} */\n\nprotvista-tooltip[mirror="H"] .tooltip-header::before {\n    left: initial;\n    right: 20px;\n}\n\nprotvista-tooltip .tooltip-header .tooltip-header-title {\n    /* background-color: #000000;\n    font-weight: 700;\n    line-height: 1em;\n    display: inline-block;\n    vertical-align: middle;\n    padding-left: .4em; */\n    font-weight: 400;\n    white-space: nowrap;\n    letter-spacing: .05em;\n    font-size: 1.1em;\n    background-color: #595959;\n    line-height: 2em;\n    padding: 0 .7em;\n    color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body {\n    padding: 1em;\n    background: #FFF;\n    font-weight: normal;\n    max-height: 160px;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\nprotvista-tooltip .tooltip-close {\n    height: 3em;\n    width: 3em;\n    display: inline-block;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-image: url('+u+');\n    cursor: pointer;\n    vertical-align: middle;\n}\n\nprotvista-tooltip .tooltip-close:hover {\n    background-color: #1a1a1a;\n}\n\nprotvista-tooltip table td {\n    padding: .5em .5em;\n    vertical-align: top;\n}\n\nprotvista-tooltip table td:first-child {\n    font-weight: 600;\n    text-align: right\n}\n\nprotvista-tooltip table td p {\n    margin-top: 0;\n}\n\nprotvista-tooltip table thead, table tbody, table tfoot {\n    /* border: 0px solid #f1f1f1;\n    background-color: #616161; */\n    background-color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body table tbody{\n    font-size: 12px;\n}\n\nprotvista-tooltip table tbody tr:nth-child(even) {\n    border-bottom: 0;\n    /* background-color: #616161; */\n    background-color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body table tbody h4, protvista-tooltip .tooltip-body table tbody h5{\n    text-align: left;\n    font-size: 14px;\n    font-weight: bold;\n    color: #333;\n}\n\nprotvista-tooltip h4, protvista-tooltip h5 {\n    margin: 0;\n}\n\nprotvista-tooltip table {\n    border-spacing: 0;\n    border-collapse: collapse;\n    background-color: #FFF;\n    /* -webkit-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\n    -moz-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\n    box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1); */\n    width: 100%;\n    font-family:Verdana,Arial,sans-serif;\n    font-size: 93%;\n}\n\nprotvista-tooltip  table td {\n    /* border: 1px solid #CCC; */\n    color: #555;\n}\n\nprotvista-tooltip  table tr td:first-child {\n    font-weight: 700;\n}\n\n/* filter */\nul.filter-list {\n    list-style:none;\n    margin:0;\n    padding:0;\n}\nul.filter-list a {\n    cursor:pointer;\n}\n.filter-list li {\n    margin: .4em 0;\n}\n.filter-select-trigger {\n    text-decoration:none;\n}\n.filter-select-wrapper {\n    box-sizing: border-box;\n    display:inline-block;\n    border-radius:.2em;\n    margin-right: .2em;\n    margin-left: .3em;\n    line-height: .2em;\n    padding: .2em;\n    border: .1em solid rgba(255, 0, 0, 0);\n}\n.filter-select {\n    margin:0;\n    box-sizing:border-box;\n    border-radius:.2em;\n    width:1.2em;\n    height:1.2em;\n    display:inline-block;\n    background-color: #333333;\n}\n.filter-select-trigger:hover .filter-select-wrapper {\n    border: .1em solid rgba(255, 0, 0, .5);\n}\n.filter-select-trigger.active .filter-select-wrapper {\n    border: .1em solid rgba(255, 0, 0, .9);\n}\n\n.pdbIconsId {\n    color: #0000EE !important;\n    border-bottom: none !important;\n    min-width: 43px;\n    display: inline-block;\n}\n\n.pdbIconsId:visited {\n    color: #551A8B !important;\n    border-bottom: none !important;\n}\n\n.pdbIconslogoA {\n    border-bottom: none !important;\n}\n\n.pdbIconslogo {\n    display: inline-block;\n    padding: 0px 4px;\n    height: 18px;\n    line-height: 18px;\n}\n@media (max-width: 1000px) {\n    .pdbIconsId{\n        min-width: 25px;\n    }\n    .pdbIconsWrapper{\n        display: block;\n    }\n}\n\n.protvista-pdb a, .protvista-pdb a:visited {\n    border-bottom-width: 1px;\n    border-bottom-style: dotted;\n    border-bottom-color: inherit;\n    text-decoration: none;\n    color: #222;\n}\n\n.protvista-pdb a:hover, .protvista-pdb a:focus, .protvista-pdb a:active {\n    color: rgb(116,179,96);\n}\n\n.labelTooltipBox {\n    max-width: 400px;\n    background-color: #e4e2e2;\n    color: #222;\n    border-radius: 6px;\n    padding: 5px 10px;\n    position: fixed;\n    z-index: 1;\n    font-size: 80%;\n}\n  \n.labelTooltipBox::after {\n    content: "";\n    position: absolute;\n    top: 10px;\n    right: 100%;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent #e4e2e2 transparent transparent;\n}\n\n.viewMenuBox {\n    display: block;\n    position: absolute;\n    z-index: 1;\n    background: #fff;\n    left: 70%;\n    top: 47px;\n    min-width: 150px;\n    max-width: 280px;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    max-height: calc(100vh - 48px);\n    border-radius: 4px;\n    outline: 0;\n    box-shadow: 0 2px 4px -1px rgba(0,0,0,.2), 0 4px 5px 0 rgba(0,0,0,.14), 0 1px 10px 0 rgba(0,0,0,.12);\n}\n\n#filter-disease .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #990000;\nopacity: 0.4;\n}\n\n#filter-disease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-predicted .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: linear-gradient(#002594, #8FE3FF);\nopacity: 0.4;\n}\n\n#filter-predicted .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-nonDisease .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #99cc00;\nopacity: 0.4;\n}\n\n#filter-nonDisease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-uncertain .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #FFCC00;\nopacity: 0.4;\n}\n\n#filter-uncertain .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}',"",{version:3,sources:["webpack://./src/protvista-pdb.css"],names:[],mappings:"AAAA;IACI,6EAA6E;IAC7E,kBAAkB;IAClB,iBAAiB;IACjB,2BAA2B;IAC3B,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;AACpB;;;AAGA;IACI,cAAc;IACd,WAAW;IACX,WAAW;AACf;;AAEA;IACI,mBAAmB;IACnB,sBAAsB;IACtB,UAAU;IACV,aAAa;AACjB;;AAEA;IACI,mBAAmB;IACnB,UAAU;IACV,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI;QACI,UAAU;QACV,aAAa;IACjB;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI;QACI,UAAU;QACV,aAAa;IACjB;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI;QACI,UAAU;QACV,aAAa;IACjB;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI;QACI,UAAU;QACV,aAAa;IACjB;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI;QACI,UAAU;QACV,aAAa;IACjB;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI,0BAA0B;IAC1B,6BAA6B;IAC7B,yBAAyB;IACzB,eAAe;IACf,6BAA6B;IAC7B,kBAAkB;AACtB;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,YAAY;IACZ,qBAAqB;IACrB,QAAQ;IACR,SAAS;IACT,iCAAiC;IACjC,oCAAoC;IACpC,2BAA2B;IAC3B,iBAAiB;IACjB,2BAA2B;IAC3B,WAAW;IACX,mBAAmB;AACvB;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,YAAY;IACZ,qBAAqB;IACrB,QAAQ;IACR,SAAS;IACT,kCAAkC;IAClC,mCAAmC;IACnC,0BAA0B;IAC1B,iBAAiB;AACrB;;AAEA;IACI,yBAAyB;IACzB,gCAAgC;IAChC,cAAc;IACd,kBAAkB;AACtB;;AAEA;IACI,8BAA8B;IAC9B,+BAA+B;IAC/B,sBAAsB;AAC1B;;AAEA;IACI,UAAU;IACV,+BAA+B;IAC/B,WAAW;IACX,uBAAuB;IACvB,gCAAgC;AACpC;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,gCAAgC;AACpC;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,qBAAqB;IACrB,gBAAgB;AACpB;;AAEA;IACI,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,iEAAiE;IACjE,gCAAgC;IAChC,6BAA6B;IAC7B,4BAA4B;IAC5B,2BAA2B;IAC3B,wBAAwB;IACxB,qBAAqB;AACzB;;AAEA;IACI,gBAAgB;IAChB,iBAAiB;AACrB;;AAEA;IACI,qBAAqB;IACrB,WAAW;IACX,UAAU;AACd;;AAEA;IACI,sBAAsB;IACtB,qBAAqB;IACrB,cAAc;IACd,gBAAgB;IAChB,UAAU;IACV,gBAAgB;AACpB;;AAEA;IACI,iBAAiB;IACjB,gBAAgB;IAChB,WAAW;IACX,aAAa;AACjB;;AAEA;IACI,2BAA2B;AAC/B;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,eAAe;IACf,cAAc;IACd,QAAQ;IACR,2BAA2B;IAC3B,eAAe;AACnB;;AAEA;IACI,0BAA0B;IAC1B,wBAAwB;AAC5B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,eAAe;IACf,cAAc;IACd,QAAQ;IACR,2BAA2B;IAC3B,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,yBAAyB;IACzB,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,iBAAiB;IACjB,WAAW;IACX,aAAa;AACjB;;AAEA;IACI,WAAW;IACX,eAAe;IACf,aAAa;AACjB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,qBAAqB;IACrB,yBAAyB;IACzB,yBAAyB;IACzB,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,iBAAiB;AACrB;;AAEA;IACI,WAAW;IACX,eAAe;IACf,UAAU;AACd;;AAEA;IACI,kBAAkB;IAClB,cAAc;AAClB;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,SAAS;IACT,cAAc;IACd,eAAe;IACf,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,eAAe;IACf,iBAAiB;IACjB,cAAc;IACd,gBAAgB;IAChB,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,uBAAuB;IACvB,YAAY;IACZ,uBAAuB;IACvB,WAAW;IACX,kBAAkB;IAClB,kBAAkB;IAClB,YAAY;IACZ,kBAAkB;IAClB,UAAU;IACV,QAAQ;IACR,UAAU;AACd;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,QAAQ;IACR,WAAW;IACX,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,uDAAuD;AAC3D;;AAEA;IACI,mBAAmB;AACvB;;AAEA;;IAEI,cAAc;IACd,uBAAuB;IACvB,aAAa;AACjB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,gBAAgB;IAChB,gBAAgB;IAChB,kBAAkB;IAClB,iDAAiD;IACjD,8CAA8C;IAC9C,2CAA2C;IAC3C,eAAe;AACnB;;AAEA;IACI,cAAc;IACd,kBAAkB;AACtB;;AAEA;IACI,cAAc;AAClB;;AAEA;;;;;;GAMG;;AAEH;IACI,oBAAoB;IACpB,WAAW;AACf;;AAEA;IACI,yBAAyB;IACzB,gBAAgB;AACpB;;AAEA;;;;;;;;;GASG;;AAEH;IACI,aAAa;IACb,WAAW;AACf;;AAEA;IACI;;;;;yBAKqB;IACrB,gBAAgB;IAChB,mBAAmB;IACnB,qBAAqB;IACrB,gBAAgB;IAChB,yBAAyB;IACzB,gBAAgB;IAChB,eAAe;IACf,WAAW;AACf;;AAEA;IACI,YAAY;IACZ,gBAAgB;IAChB,mBAAmB;IACnB,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,WAAW;IACX,UAAU;IACV,qBAAqB;IACrB,4BAA4B;IAC5B,2BAA2B;IAC3B,yDAAuC;IACvC,eAAe;IACf,sBAAsB;AAC1B;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,kBAAkB;IAClB,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;IAChB;AACJ;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI;gCAC4B;IAC5B,sBAAsB;AAC1B;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,gBAAgB;IAChB,+BAA+B;IAC/B,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,WAAW;AACf;;AAEA;IACI,SAAS;AACb;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;IACzB,sBAAsB;IACtB;;+CAE2C;IAC3C,WAAW;IACX,oCAAoC;IACpC,cAAc;AAClB;;AAEA;IACI,4BAA4B;IAC5B,WAAW;AACf;;AAEA;IACI,gBAAgB;AACpB;;AAEA,WAAW;AACX;IACI,eAAe;IACf,QAAQ;IACR,SAAS;AACb;AACA;IACI,cAAc;AAClB;AACA;IACI,cAAc;AAClB;AACA;IACI,oBAAoB;AACxB;AACA;IACI,sBAAsB;IACtB,oBAAoB;IACpB,kBAAkB;IAClB,kBAAkB;IAClB,iBAAiB;IACjB,iBAAiB;IACjB,aAAa;IACb,qCAAqC;AACzC;AACA;IACI,QAAQ;IACR,qBAAqB;IACrB,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,oBAAoB;IACpB,yBAAyB;AAC7B;AACA;IACI,sCAAsC;AAC1C;AACA;IACI,sCAAsC;AAC1C;;AAEA;IACI,yBAAyB;IACzB,8BAA8B;IAC9B,eAAe;IACf,qBAAqB;AACzB;;AAEA;IACI,yBAAyB;IACzB,8BAA8B;AAClC;;AAEA;IACI,8BAA8B;AAClC;;AAEA;IACI,qBAAqB;IACrB,gBAAgB;IAChB,YAAY;IACZ,iBAAiB;AACrB;AACA;IACI;QACI,eAAe;IACnB;IACA;QACI,cAAc;IAClB;AACJ;;AAEA;IACI,wBAAwB;IACxB,2BAA2B;IAC3B,4BAA4B;IAC5B,qBAAqB;IACrB,WAAW;AACf;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,yBAAyB;IACzB,WAAW;IACX,kBAAkB;IAClB,iBAAiB;IACjB,eAAe;IACf,UAAU;IACV,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,iBAAiB;IACjB,mBAAmB;IACnB,yDAAyD;AAC7D;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,SAAS;IACT,SAAS;IACT,gBAAgB;IAChB,gBAAgB;IAChB,cAAc;IACd,iCAAiC;IACjC,8BAA8B;IAC9B,kBAAkB;IAClB,UAAU;IACV,oGAAoG;AACxG;;AAEA;AACA,mBAAmB;AACnB,YAAY;AACZ;;AAEA;AACA,UAAU;AACV;;AAEA;AACA,6CAA6C;AAC7C,YAAY;AACZ;;AAEA;AACA,UAAU;AACV;;AAEA;AACA,mBAAmB;AACnB,YAAY;AACZ;;AAEA;AACA,UAAU;AACV;;AAEA;AACA,mBAAmB;AACnB,YAAY;AACZ;;AAEA;AACA,UAAU;AACV",sourcesContent:['.protvista-pdb {\n    font-family: Helvetica,Arial,FreeSans,"Liberation Sans",sans-serif !important;\n    position: relative;\n    /* width: 100%; */\n    border: 1px solid lightgray;\n    margin-bottom: 20px;\n    padding: 20px 10px;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n\n.protvistaRow {\n    display: table;\n    width: 100%;\n    clear: both;\n}\n\n.protvistaCol1 {\n    display: table-cell;\n    vertical-align: middle;\n    width: 15%;\n    font-size:90%;\n}\n\n.protvistaCol2 {\n    display: table-cell;\n    width: 85%;\n    overflow: hidden;\n    padding-left: 10px;\n}\n\n@media (max-width: 1800px) {\n    .protvistaCol1 {\n        width: 20%;\n        font-size:90%;\n    }\n    .protvistaCol2 {\n        width: 80%;\n    }\n}\n\n@media (max-width: 1400px) {\n    .protvistaCol1 {\n        width: 22%;\n        font-size:90%;\n    }\n    .protvistaCol2 {\n        width: 78%;\n    }\n}\n\n@media (max-width: 1100px) {\n    .protvistaCol1 {\n        width: 25%;\n        font-size:75%;\n    }\n    .protvistaCol2 {\n        width: 75%;\n    }\n}\n\n@media (max-width: 1000px) {\n    .protvistaCol1 {\n        width: 27%;\n        font-size:70%;\n    }\n    .protvistaCol2 {\n        width: 73%;\n    }\n}\n\n@media (max-width: 767px) {\n    .protvistaCol1 {\n        width: 30%;\n        font-size:70%;\n    }\n    .protvistaCol2 {\n        width: 70%;\n    }\n}\n\n.category-label {\n    border-top: 1px solid #fff;\n    border-bottom: 1px solid #fff;\n    background-color: #b2f5ff;\n    cursor: pointer;\n    padding: .8em 1.3em .8em .8em;\n    position: relative;\n}\n\n.category-label:hover {\n    background-color: #80EEFF;\n}\n\n.category-label::before {\n    content: \' \';\n    display: inline-block;\n    width: 0;\n    height: 0;\n    border-top: 5px solid transparent;\n    border-bottom: 5px solid transparent;\n    border-left: 5px solid #333;\n    margin-right: 5px;\n    -webkit-transition: all .1s;\n    /* Safari */\n    transition: all .1s;\n}\n\n.protvistaRow.expanded > .category-label {\n    background-color: #80EEFF;\n}\n\n.protvistaRow.expanded > .category-label::before {\n    content: \' \';\n    display: inline-block;\n    width: 0;\n    height: 0;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-top: 5px solid #333;\n    margin-right: 5px;\n}\n\n.track-label {\n    background-color: #d9faff;\n    padding: 0.5em 1.2em 0.5em 1.8em;\n    cursor:pointer;\n    position: relative;\n}\n\n.category-label.pdbIconsLabel, .track-label.pdbIconsLabel {\n    border-left: 1px solid #b2f5ff;\n    border-right: 1px solid #b2f5ff;\n    background-color: #fff;\n}\n\n.aggregate-track-content, .track-content-single {\n    opacity: 1;\n    -webkit-transition: opacity .1s;\n    /* Safari */\n    transition: opacity .1s;\n    border-bottom: 1px solid #b2f5ff;\n}\n\n.aggregate-track-content{\n    padding-bottom: 5px;\n}\n\n.track-label, .track-content {\n    border-bottom: 1px solid #b2f5ff;\n}\n\n.top-border {\n    border-top: 1px solid #b2f5ff;\n}\n\n.is-hidden{\n    display: none!important;\n}\n\n.pdbIcon {\n    display: inline-block;\n    padding: 5px 4px;\n}\n\n.pdbIcon i {\n    color: #fff;\n    font-size: 21px;\n}\n\n.pdbIcon.rotate i {\n    filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=1);\n    -webkit-transform: rotate(90deg);\n    -moz-transform: rotate(90deg);\n    -ms-transform: rotate(90deg);\n    -o-transform: rotate(90deg);\n    transform: rotate(90deg);\n    display: inline-block;\n}\n\n.legendRow{\n    min-height: 30px;\n    line-height: 30px;\n}\n\n.legendColor {\n    display: inline-block;\n    height:10px;\n    width:26px;\n}\n\n.legendText{\n    /* min-width: 135px; */\n    display: inline-block;\n    font-size: 90%;\n    text-align: left;\n    color:#333;\n    margin-left: 2px;\n}\n\n.protvistaRowGroup{\n    max-height: 210px;\n    overflow-y: auto;\n    clear: both;\n    display: none;\n}\n\n.protvistaRowGroup.noPaddingRight > .protvistaRow > .protvistaCol2 {\n    padding-right: 0 !important;\n}\n\n.labelZoomIcon{\n    position: absolute;\n    left: 5px;\n    cursor: zoom-in;\n    color: #848a86;\n    top: 50%;\n    transform: translateY(-50%);\n    font-size: 12px;\n}\n\n.labelZoomIcon.active{\n    cursor: zoom-out!important;\n    color: #009e38!important;\n}\n\n.hideLabelIcon{\n    position: absolute;\n    right: 5px;\n    cursor: pointer;\n    color: #848a86;\n    top: 10%;\n    transform: translateY(-10%);\n    font-size: 10px;\n}\n\n.protvistaResetSectionIcon{\n    position: absolute;\n    border: 1px solid #828181;\n    background-color: #828181;\n    border-radius: 50%;\n    cursor: pointer;\n    text-align: center;\n    text-align: center;\n    width: 20px;\n    height: 20px;\n    line-height: 19px;\n    right: 10px;\n    display: none;\n}\n\n.protvistaResetSectionIcon i{\n    color: #fff;\n    cursor: pointer;\n    font-size:80%;\n}\n\n.protvistaToolbar{\n    text-align: right;\n}\n\n.protvistaToolbarIcon{\n    display: inline-block;\n    border: 1px solid #828181;\n    background-color: #828181;\n    border-radius: 50%;\n    margin-right: 10px;\n    cursor: pointer;\n    text-align: center;\n    text-align: center;\n    width: 30px;\n    height: 30px;\n    line-height: 28px;\n}\n\n.protvistaToolbar i{\n    color: #fff;\n    cursor: pointer;\n    margin:2px;\n}\n\n.protvistaRangeMenuTitle{\n    position: relative;\n    color: #1b1919;\n}\n\n.protvistaRangeMenuTitle > div{\n    padding: 10px 10px 0 10px;\n}\n\n.protvistaRangeMenuTitle > div:first-child{\n    font-weight: bold;\n    text-align: left;\n}\n\n.protvistaMenuClose{\n    position: absolute;\n    right: 10px;\n    top: 14px;\n    color: #6d6d6d;\n    font-size: 12px;\n    cursor: pointer;\n}\n\n.protvistaForm{\n    padding: 10px;\n    font-size: 12px;\n    max-height: 300px;\n    overflow: auto;\n    text-align: left;\n    font-weight: 600;\n    color: #444;\n}\n\n.divWithScroll {\n    position: relative;\n    clear: both;\n    overflow-y: scroll;\n    height:40px;\n}\n\n.label-tooltip .label-tooltip-text {\n    visibility: hidden;\n    /*white-space: nowrap;*/\n    width: 400px;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    border-radius: 6px;\n    padding: 5px;\n    position: absolute;\n    z-index: 1;\n    top: 5px;\n    left: 100%;\n}\n  \n.label-tooltip .label-tooltip-text::after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    right: 100%;\n    margin-top: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent black transparent transparent;\n}\n  \n.label-tooltip:hover .label-tooltip-text {\n    visibility: visible;\n}\n\n.protvista-pdb protvista-pdb-navigation .handle, \n.protvista-pdb protvista-navigation .handle {\n    fill: darkgray;\n    height: 19px !important;\n    stroke: black;\n}\n\nprotvista-tooltip {\n    z-index: 50000;\n    position: absolute;\n    min-width: 220px;\n    max-width: 350px;\n    margin-top: 20px;\n    margin-left: -20px;\n    -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n    -moz-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);\n    /*opacity: .9;*/\n}\n\nprotvista-tooltip[mirror="H"] {\n    margin-left: 0;\n    margin-right: 20px;\n}\n\nprotvista-tooltip .tooltip-header .tooltip-header-title{\n    color: #ffffff;\n}\n\n/* protvista-tooltip a,\nprotvista-tooltip a:link,\nprotvista-tooltip a:hover,\nprotvista-tooltip a:active,\nprotvista-tooltip a:visited {\n    color: #ffffff;\n} */\n\nprotvista-tooltip .tooltip-body {\n    /* color: #ffffff; */\n    color: #555;\n}\n\nprotvista-tooltip .tooltip-header {\n    background-color: #595959;\n    line-height: 3em;\n}\n\n/* protvista-tooltip .tooltip-header::before {\n    content: " ";\n    position: absolute;\n    bottom: 100%;\n    left: 20px;\n    margin-left: -10px;\n    border-width: 10px;\n    border-style: solid;\n    border-color: transparent transparent black transparent;\n} */\n\nprotvista-tooltip[mirror="H"] .tooltip-header::before {\n    left: initial;\n    right: 20px;\n}\n\nprotvista-tooltip .tooltip-header .tooltip-header-title {\n    /* background-color: #000000;\n    font-weight: 700;\n    line-height: 1em;\n    display: inline-block;\n    vertical-align: middle;\n    padding-left: .4em; */\n    font-weight: 400;\n    white-space: nowrap;\n    letter-spacing: .05em;\n    font-size: 1.1em;\n    background-color: #595959;\n    line-height: 2em;\n    padding: 0 .7em;\n    color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body {\n    padding: 1em;\n    background: #FFF;\n    font-weight: normal;\n    max-height: 160px;\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\nprotvista-tooltip .tooltip-close {\n    height: 3em;\n    width: 3em;\n    display: inline-block;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-image: url("close-icon.svg");\n    cursor: pointer;\n    vertical-align: middle;\n}\n\nprotvista-tooltip .tooltip-close:hover {\n    background-color: #1a1a1a;\n}\n\nprotvista-tooltip table td {\n    padding: .5em .5em;\n    vertical-align: top;\n}\n\nprotvista-tooltip table td:first-child {\n    font-weight: 600;\n    text-align: right\n}\n\nprotvista-tooltip table td p {\n    margin-top: 0;\n}\n\nprotvista-tooltip table thead, table tbody, table tfoot {\n    /* border: 0px solid #f1f1f1;\n    background-color: #616161; */\n    background-color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body table tbody{\n    font-size: 12px;\n}\n\nprotvista-tooltip table tbody tr:nth-child(even) {\n    border-bottom: 0;\n    /* background-color: #616161; */\n    background-color: #FFF;\n}\n\nprotvista-tooltip .tooltip-body table tbody h4, protvista-tooltip .tooltip-body table tbody h5{\n    text-align: left;\n    font-size: 14px;\n    font-weight: bold;\n    color: #333;\n}\n\nprotvista-tooltip h4, protvista-tooltip h5 {\n    margin: 0;\n}\n\nprotvista-tooltip table {\n    border-spacing: 0;\n    border-collapse: collapse;\n    background-color: #FFF;\n    /* -webkit-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\n    -moz-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\n    box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1); */\n    width: 100%;\n    font-family:Verdana,Arial,sans-serif;\n    font-size: 93%;\n}\n\nprotvista-tooltip  table td {\n    /* border: 1px solid #CCC; */\n    color: #555;\n}\n\nprotvista-tooltip  table tr td:first-child {\n    font-weight: 700;\n}\n\n/* filter */\nul.filter-list {\n    list-style:none;\n    margin:0;\n    padding:0;\n}\nul.filter-list a {\n    cursor:pointer;\n}\n.filter-list li {\n    margin: .4em 0;\n}\n.filter-select-trigger {\n    text-decoration:none;\n}\n.filter-select-wrapper {\n    box-sizing: border-box;\n    display:inline-block;\n    border-radius:.2em;\n    margin-right: .2em;\n    margin-left: .3em;\n    line-height: .2em;\n    padding: .2em;\n    border: .1em solid rgba(255, 0, 0, 0);\n}\n.filter-select {\n    margin:0;\n    box-sizing:border-box;\n    border-radius:.2em;\n    width:1.2em;\n    height:1.2em;\n    display:inline-block;\n    background-color: #333333;\n}\n.filter-select-trigger:hover .filter-select-wrapper {\n    border: .1em solid rgba(255, 0, 0, .5);\n}\n.filter-select-trigger.active .filter-select-wrapper {\n    border: .1em solid rgba(255, 0, 0, .9);\n}\n\n.pdbIconsId {\n    color: #0000EE !important;\n    border-bottom: none !important;\n    min-width: 43px;\n    display: inline-block;\n}\n\n.pdbIconsId:visited {\n    color: #551A8B !important;\n    border-bottom: none !important;\n}\n\n.pdbIconslogoA {\n    border-bottom: none !important;\n}\n\n.pdbIconslogo {\n    display: inline-block;\n    padding: 0px 4px;\n    height: 18px;\n    line-height: 18px;\n}\n@media (max-width: 1000px) {\n    .pdbIconsId{\n        min-width: 25px;\n    }\n    .pdbIconsWrapper{\n        display: block;\n    }\n}\n\n.protvista-pdb a, .protvista-pdb a:visited {\n    border-bottom-width: 1px;\n    border-bottom-style: dotted;\n    border-bottom-color: inherit;\n    text-decoration: none;\n    color: #222;\n}\n\n.protvista-pdb a:hover, .protvista-pdb a:focus, .protvista-pdb a:active {\n    color: rgb(116,179,96);\n}\n\n.labelTooltipBox {\n    max-width: 400px;\n    background-color: #e4e2e2;\n    color: #222;\n    border-radius: 6px;\n    padding: 5px 10px;\n    position: fixed;\n    z-index: 1;\n    font-size: 80%;\n}\n  \n.labelTooltipBox::after {\n    content: "";\n    position: absolute;\n    top: 10px;\n    right: 100%;\n    border-width: 5px;\n    border-style: solid;\n    border-color: transparent #e4e2e2 transparent transparent;\n}\n\n.viewMenuBox {\n    display: block;\n    position: absolute;\n    z-index: 1;\n    background: #fff;\n    left: 70%;\n    top: 47px;\n    min-width: 150px;\n    max-width: 280px;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    max-height: calc(100vh - 48px);\n    border-radius: 4px;\n    outline: 0;\n    box-shadow: 0 2px 4px -1px rgba(0,0,0,.2), 0 4px 5px 0 rgba(0,0,0,.14), 0 1px 10px 0 rgba(0,0,0,.12);\n}\n\n#filter-disease .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #990000;\nopacity: 0.4;\n}\n\n#filter-disease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-predicted .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: linear-gradient(#002594, #8FE3FF);\nopacity: 0.4;\n}\n\n#filter-predicted .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-nonDisease .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #99cc00;\nopacity: 0.4;\n}\n\n#filter-nonDisease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}\n\n#filter-uncertain .protvista_checkbox_input + .protvista_checkbox_label::before {\nbackground: #FFCC00;\nopacity: 0.4;\n}\n\n#filter-uncertain .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\nopacity: 1;\n}'],sourceRoot:""}]);const p=h},893:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(350),r=n.n(i),o=n(837),a=n.n(o)()(r());a.push([t.id,"protvista-pdb-variation {\n  display: flex;\n  width: 100%;\n}\n\nprotvista-pdb-variation svg {\n  background-color: #fff;\n}\n\nprotvista-pdb-variation circle {\n  opacity: 0.6;\n}\nprotvista-pdb-variation circle:hover {\n  opacity: 0.9;\n}\nprotvista-pdb-variation .tick line,\nprotvista-pdb-variation .axis path {\n  opacity: 0.1;\n}\n\nprotvista-pdb-variation .protvista-highlight {\n  fill: #ffe999;\n}\n\nprotvista-pdb-variation .variation-y-right line,\nprotvista-pdb-variation .axis path {\n  fill: none;\n  stroke: none;\n}\n\n.pvVariantPlotSection {\n  padding-left: 9px !important;\n}\n","",{version:3,sources:["webpack://./src/protvista-variation.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,WAAW;AACb;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,YAAY;AACd;AACA;EACE,YAAY;AACd;AACA;;EAEE,YAAY;AACd;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE,UAAU;EACV,YAAY;AACd;;AAEA;EACE,4BAA4B;AAC9B",sourcesContent:["protvista-pdb-variation {\n  display: flex;\n  width: 100%;\n}\n\nprotvista-pdb-variation svg {\n  background-color: #fff;\n}\n\nprotvista-pdb-variation circle {\n  opacity: 0.6;\n}\nprotvista-pdb-variation circle:hover {\n  opacity: 0.9;\n}\nprotvista-pdb-variation .tick line,\nprotvista-pdb-variation .axis path {\n  opacity: 0.1;\n}\n\nprotvista-pdb-variation .protvista-highlight {\n  fill: #ffe999;\n}\n\nprotvista-pdb-variation .variation-y-right line,\nprotvista-pdb-variation .axis path {\n  fill: none;\n  stroke: none;\n}\n\n.pvVariantPlotSection {\n  padding-left: 9px !important;\n}\n"],sourceRoot:""}]);const s=a},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],c=i.base?l[0]+i.base:l[0],h=o[c]||0,u="".concat(c," ").concat(h);o[c]=h+1;var p=n(u),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var f=r(d,i);i.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=i(t,r),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},789:(t,e,n)=>{t.exports=n.p+"d72acce713646d7905ab.svg"}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href;var r={};(()=>{i.r(r),i.d(r,{default:()=>ou});class t extends HTMLElement{constructor(){super(),this.protvistaElements=new Set}static get observedAttributes(){return["attributes"]}attributeChangedCallback(t,e,n){if(e!==n&&"attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}_setAttributes(t,e,n){for(const i of t)!1===n?i.removeAttribute(e):i.setAttribute(e,"boolean"==typeof n?"":n)}_registerProtvistaDescendents(t){for(const e of t.children)e.isManaged&&this.protvistaElements.add(e),this._registerProtvistaDescendents(e)}addListeners(){for(const t of this.protvistaElements)t.addEventListener("change",(t=>{-1!==this._attributes.indexOf(t.detail.type)&&this._setAttributes(this.protvistaElements,t.detail.type,t.detail.value);for(let e in t.detail)-1!==this._attributes.indexOf(e)&&this._setAttributes(this.protvistaElements,e,t.detail[e])}))}connectedCallback(){this._registerProtvistaDescendents(this),this.addListeners();var t=this;"MutationObserver"in window&&(this.mutationObserver=new MutationObserver((e=>{t._registerProtvistaDescendents(t),t.addListeners()})),this.mutationObserver.observe(this,{childList:!0}))}disconnectedCallback(){this.mutationObserver&&this.mutationObserver.disconnect()}}const n=t;function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var a,s;const l=(1===(a=o).length&&(s=a,a=function(t,e){return o(s(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)>0?i=r:n=r+1}return n}}).right;function c(t,e){var n,i,r,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(i=r=n;++a<o;)null!=(n=t[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=r=n;++a<o;)null!=(n=e(t[a],a,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}var h=Array.prototype,u=(h.slice,h.map,Math.sqrt(50)),p=Math.sqrt(10),d=Math.sqrt(2);function f(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=u?10:o>=p?5:o>=d?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=u?10:o>=p?5:o>=d?2:1)}function g(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}var v=Array.prototype.slice;function A(t){return t}var b=1e-6;function m(t){return"translate("+(t+.5)+",0)"}function y(t){return"translate(0,"+(t+.5)+")"}function _(t){return function(e){return+t(e)}}function x(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function w(){return!this.__axis}function C(t,e){var n=[],i=null,r=null,o=6,a=6,s=3,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",h=1===t||3===t?m:y;function u(u){var p=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,d=null==r?e.tickFormat?e.tickFormat.apply(e,n):A:r,f=Math.max(o,0)+s,g=e.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,y=(e.bandwidth?x:_)(e.copy()),C=u.selection?u.selection():u,k=C.selectAll(".domain").data([null]),B=C.selectAll(".tick").data(p,e).order(),I=B.exit(),E=B.enter().append("g").attr("class","tick"),S=B.select("line"),M=B.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),M=M.merge(E.append("text").attr("fill","currentColor").attr(c,l*f).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),u!==C&&(k=k.transition(u),B=B.transition(u),S=S.transition(u),M=M.transition(u),I=I.transition(u).attr("opacity",b).attr("transform",(function(t){return isFinite(t=y(t))?h(t):this.getAttribute("transform")})),E.attr("opacity",b).attr("transform",(function(t){var e=this.parentNode.__axis;return h(e&&isFinite(e=e(t))?e:y(t))}))),I.remove(),k.attr("d",4===t||2==t?a?"M"+l*a+","+v+"H0.5V"+m+"H"+l*a:"M0.5,"+v+"V"+m:a?"M"+v+","+l*a+"V0.5H"+m+"V"+l*a:"M"+v+",0.5H"+m),B.attr("opacity",1).attr("transform",(function(t){return h(y(t))})),S.attr(c+"2",l*o),M.attr(c,l*f).text(d),C.filter(w).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),C.each((function(){this.__axis=y}))}return u.scale=function(t){return arguments.length?(e=t,u):e},u.ticks=function(){return n=v.call(arguments),u},u.tickArguments=function(t){return arguments.length?(n=null==t?[]:v.call(t),u):n.slice()},u.tickValues=function(t){return arguments.length?(i=null==t?null:v.call(t),u):i&&i.slice()},u.tickFormat=function(t){return arguments.length?(r=t,u):r},u.tickSize=function(t){return arguments.length?(o=a=+t,u):o},u.tickSizeInner=function(t){return arguments.length?(o=+t,u):o},u.tickSizeOuter=function(t){return arguments.length?(a=+t,u):a},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u}function k(t){return C(3,t)}var B={value:function(){}};function I(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new E(i)}function E(t){this._=t}function S(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function M(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function T(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=B,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}E.prototype=I.prototype={constructor:E,on:function(t,e){var n,i=this._,r=S(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=T(i[n],t.name,e);else if(null==e)for(n in i)i[n]=T(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=M(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new E(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const L=I;function q(){}function N(t){return null==t?q:function(){return this.querySelector(t)}}function P(){return[]}function j(t){return null==t?P:function(){return this.querySelectorAll(t)}}function z(t){return function(){return this.matches(t)}}function R(t){return new Array(t.length)}function F(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function $(t,e,n,i,r,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new F(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function D(t,e,n,i,r,o,a){var s,l,c,h={},u=e.length,p=o.length,d=new Array(u);for(s=0;s<u;++s)(l=e[s])&&(d[s]=c="$"+a.call(l,l.__data__,s,e),c in h?r[s]=l:h[c]=l);for(s=0;s<p;++s)(l=h[c="$"+a.call(t,o[s],s,o)])?(i[s]=l,l.__data__=o[s],h[c]=null):n[s]=new F(t,o[s]);for(s=0;s<u;++s)(l=e[s])&&h[d[s]]===l&&(r[s]=l)}function O(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}F.prototype={constructor:F,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var W="http://www.w3.org/1999/xhtml";const H={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),H.hasOwnProperty(e)?{space:H[e],local:t}:t}function U(t){return function(){this.removeAttribute(t)}}function Z(t){return function(){this.removeAttributeNS(t.space,t.local)}}function X(t,e){return function(){this.setAttribute(t,e)}}function Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Q(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function J(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function K(t){return function(){this.style.removeProperty(t)}}function tt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function et(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function nt(t,e){return t.style.getPropertyValue(e)||J(t).getComputedStyle(t,null).getPropertyValue(e)}function it(t){return function(){delete this[t]}}function rt(t,e){return function(){this[t]=e}}function ot(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function at(t){return t.trim().split(/^|\s+/)}function st(t){return t.classList||new lt(t)}function lt(t){this._node=t,this._names=at(t.getAttribute("class")||"")}function ct(t,e){for(var n=st(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ht(t,e){for(var n=st(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ut(t){return function(){ct(this,t)}}function pt(t){return function(){ht(this,t)}}function dt(t,e){return function(){(e.apply(this,arguments)?ct:ht)(this,t)}}function ft(){this.textContent=""}function gt(t){return function(){this.textContent=t}}function vt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function At(){this.innerHTML=""}function bt(t){return function(){this.innerHTML=t}}function mt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function yt(){this.nextSibling&&this.parentNode.appendChild(this)}function _t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===W&&e.documentElement.namespaceURI===W?e.createElement(t):e.createElementNS(n,t)}}function wt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ct(t){var e=V(t);return(e.local?wt:xt)(e)}function kt(){return null}function Bt(){var t=this.parentNode;t&&t.removeChild(this)}function It(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Et(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var St={},Mt=null;function Tt(t,e,n){return t=Lt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Lt(t,e,n){return function(i){var r=Mt;Mt=i;try{t.call(this,this.__data__,e,n)}finally{Mt=r}}}function qt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Nt(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Pt(t,e,n){var i=St.hasOwnProperty(t.type)?Tt:Lt;return function(r,o,a){var s,l=this.__on,c=i(e,o,a);if(l)for(var h=0,u=l.length;h<u;++h)if((s=l[h]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function jt(t,e,n,i){var r=Mt;t.sourceEvent=Mt,Mt=t;try{return e.apply(n,i)}finally{Mt=r}}function zt(t,e,n){var i=J(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Rt(t,e){return function(){return zt(this,t,e)}}function Ft(t,e){return function(){return zt(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(St={mouseenter:"mouseover",mouseleave:"mouseout"}));var $t=[null];function Dt(t,e){this._groups=t,this._parents=e}function Ot(){return new Dt([[document.documentElement]],$t)}Dt.prototype=Ot.prototype={constructor:Dt,select:function(t){"function"!=typeof t&&(t=N(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,c=i[r]=new Array(l),h=0;h<l;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Dt(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=j(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(i.push(t.call(a,a.__data__,c,s)),r.push(a));return new Dt(i,r)},filter:function(t){"function"!=typeof t&&(t=z(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Dt(i,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),h=-1,this.each((function(t){f[++h]=t})),f;var n,i=e?D:$,r=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),h=0;h<a;++h){var u=r[h],p=o[h],d=p.length,f=t.call(u,u&&u.__data__,h,r),g=f.length,v=l[h]=new Array(g),A=s[h]=new Array(g);i(u,p,v,A,c[h]=new Array(d),f,e);for(var b,m,y=0,_=0;y<g;++y)if(b=v[y]){for(y>=_&&(_=y+1);!(m=A[_])&&++_<g;);b._next=m||null}}return(s=new Dt(s,r))._enter=l,s._exit=c,s},enter:function(){return new Dt(this._enter||this._groups.map(R),this._parents)},exit:function(){return new Dt(this._exit||this._groups.map(R),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],h=n[s],u=c.length,p=a[s]=new Array(u),d=0;d<u;++d)(l=c[d]||h[d])&&(p[d]=l);for(;s<i;++s)a[s]=e[s];return new Dt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=O);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,c=r[o]=new Array(l),h=0;h<l;++h)(a=s[h])&&(c[h]=a);c.sort(e)}return new Dt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=V(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Z:U:"function"==typeof e?n.local?Q:G:n.local?Y:X)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?K:"function"==typeof e?et:tt)(t,e,null==n?"":n)):nt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?it:"function"==typeof e?ot:rt)(t,e)):this.node()[t]},classed:function(t,e){var n=at(t+"");if(arguments.length<2){for(var i=st(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?dt:e?ut:pt)(n,e))},text:function(t){return arguments.length?this.each(null==t?ft:("function"==typeof t?vt:gt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?At:("function"==typeof t?mt:bt)(t)):this.node().innerHTML},raise:function(){return this.each(yt)},lower:function(){return this.each(_t)},append:function(t){var e="function"==typeof t?t:Ct(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Ct(t),i=null==e?kt:"function"==typeof e?e:N(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Bt)},clone:function(t){return this.select(t?Et:It)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=qt(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Pt:Nt,null==n&&(n=!1),i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,h=s.length;c<h;++c)for(i=0,l=s[c];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Ft:Rt)(t,e))}};const Wt=Ot;function Ht(t){return"string"==typeof t?new Dt([[document.querySelector(t)]],[document.documentElement]):new Dt([[t]],$t)}function Vt(){Mt.preventDefault(),Mt.stopImmediatePropagation()}function Ut(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",Vt,!0);"onselectstart"in e?n.on("selectstart.drag",Vt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zt(t,e){var n=t.document.documentElement,i=Ht(t).on("dragstart.drag",null);e&&(i.on("click.drag",Vt,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Xt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Yt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gt(){}var Qt=.7,Jt=1/Qt,Kt="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ne=/^#([0-9a-f]{3,8})$/,ie=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),re=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),oe=new RegExp("^rgba\\("+[Kt,Kt,Kt,te]+"\\)$"),ae=new RegExp("^rgba\\("+[ee,ee,ee,te]+"\\)$"),se=new RegExp("^hsl\\("+[te,ee,ee]+"\\)$"),le=new RegExp("^hsla\\("+[te,ee,ee,te]+"\\)$"),ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function he(){return this.rgb().formatHex()}function ue(){return this.rgb().formatRgb()}function pe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?de(e):3===n?new Ae(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?fe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ie.exec(t))?new Ae(e[1],e[2],e[3],1):(e=re.exec(t))?new Ae(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=oe.exec(t))?fe(e[1],e[2],e[3],e[4]):(e=ae.exec(t))?fe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=se.exec(t))?_e(e[1],e[2]/100,e[3]/100,1):(e=le.exec(t))?_e(e[1],e[2]/100,e[3]/100,e[4]):ce.hasOwnProperty(t)?de(ce[t]):"transparent"===t?new Ae(NaN,NaN,NaN,0):null}function de(t){return new Ae(t>>16&255,t>>8&255,255&t,1)}function fe(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ae(t,e,n,i)}function ge(t){return t instanceof Gt||(t=pe(t)),t?new Ae((t=t.rgb()).r,t.g,t.b,t.opacity):new Ae}function ve(t,e,n,i){return 1===arguments.length?ge(t):new Ae(t,e,n,null==i?1:i)}function Ae(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function be(){return"#"+ye(this.r)+ye(this.g)+ye(this.b)}function me(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ye(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function _e(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new we(t,e,n,i)}function xe(t){if(t instanceof we)return new we(t.h,t.s,t.l,t.opacity);if(t instanceof Gt||(t=pe(t)),!t)return new we;if(t instanceof we)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new we(a,s,l,t.opacity)}function we(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Ce(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ke(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function Be(t){return function(){return t}}function Ie(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Be(isNaN(t)?e:t)}Xt(Gt,pe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:he,formatHex:he,formatHsl:function(){return xe(this).formatHsl()},formatRgb:ue,toString:ue}),Xt(Ae,ve,Yt(Gt,{brighter:function(t){return t=null==t?Jt:Math.pow(Jt,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Qt:Math.pow(Qt,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:be,formatHex:be,formatRgb:me,toString:me})),Xt(we,(function(t,e,n,i){return 1===arguments.length?xe(t):new we(t,e,n,null==i?1:i)}),Yt(Gt,{brighter:function(t){return t=null==t?Jt:Math.pow(Jt,t),new we(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Qt:Math.pow(Qt,t),new we(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ae(Ce(t>=240?t-240:t+120,r,i),Ce(t,r,i),Ce(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ee=function t(e){var n=function(t){return 1==(t=+t)?Ie:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Be(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=ve(t)).r,(e=ve(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=Ie(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function Se(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=ve(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}function Me(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=Re(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}function Te(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Le(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function qe(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Re(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}Se((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return ke((n-i/e)*e,a,r,o,s)}})),Se((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return ke((n-i/e)*e,r,o,a,s)}}));var Ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pe=new RegExp(Ne.source,"g");function je(t,e){var n,i,r,o=Ne.lastIndex=Pe.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Ne.exec(t))&&(i=Pe.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Le(n,i)})),o=Pe.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function ze(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Re(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?Be(e):("number"===r?Le:"string"===r?(n=pe(e))?(e=n,Ee):je:e instanceof pe?Ee:e instanceof Date?Te:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?Me:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?qe:Le:ze))(t,e)}function Fe(){for(var t,e=Mt;t=e.sourceEvent;)e=t;return e}function $e(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function De(t,e,n){arguments.length<3&&(n=e,e=Fe().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return $e(t,i);return null}function Oe(t){var e=Fe();return e.changedTouches&&(e=e.changedTouches[0]),$e(t,e)}var We,He,Ve=0,Ue=0,Ze=0,Xe=0,Ye=0,Ge=0,Qe="object"==typeof performance&&performance.now?performance:Date,Je="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ke(){return Ye||(Je(tn),Ye=Qe.now()+Ge)}function tn(){Ye=0}function en(){this._call=this._time=this._next=null}function nn(t,e,n){var i=new en;return i.restart(t,e,n),i}function rn(){Ye=(Xe=Qe.now())+Ge,Ve=Ue=0;try{!function(){Ke(),++Ve;for(var t,e=We;e;)(t=Ye-e._time)>=0&&e._call.call(null,t),e=e._next;--Ve}()}finally{Ve=0,function(){for(var t,e,n=We,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:We=e);He=t,an(i)}(),Ye=0}}function on(){var t=Qe.now(),e=t-Xe;e>1e3&&(Ge-=e,Xe=t)}function an(t){Ve||(Ue&&(Ue=clearTimeout(Ue)),t-Ye>24?(t<1/0&&(Ue=setTimeout(rn,t-Qe.now()-Ge)),Ze&&(Ze=clearInterval(Ze))):(Ze||(Xe=Qe.now(),Ze=setInterval(on,1e3)),Ve=1,Je(rn)))}function sn(t,e,n){var i=new en;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i}en.prototype=nn.prototype={constructor:en,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ke():+n)+(null==e?0:+e),this._next||He===this||(He?He._next=this:We=this,He=this),this._call=t,this._time=n,an()},stop:function(){this._call&&(this._call=null,this._time=1/0,an())}};var ln=L("start","end","cancel","interrupt"),cn=[];function hn(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(l){var c,h,u,p;if(1!==n.state)return s();for(c in r)if((p=r[c]).name===n.name){if(3===p.state)return sn(o);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=6,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(sn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(u=n.tween.length),c=0,h=-1;c<u;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=nn((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:ln,tween:cn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function un(t,e){var n=dn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function pn(t,e){var n=dn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function dn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fn(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}}var gn,vn,An,bn,mn=180/Math.PI,yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _n(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*mn,skewX:Math.atan(l)*mn,scaleX:a,scaleY:s}}function xn(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Le(t,r)},{i:l-2,x:Le(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Le(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Le(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,l),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Le(t,n)},{i:s-2,x:Le(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var wn=xn((function(t){return"none"===t?yn:(gn||(gn=document.createElement("DIV"),vn=document.documentElement,An=document.defaultView),gn.style.transform=t,t=An.getComputedStyle(vn.appendChild(gn),null).getPropertyValue("transform"),vn.removeChild(gn),_n(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Cn=xn((function(t){return null==t?yn:(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",t),(t=bn.transform.baseVal.consolidate())?_n((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):yn)}),", ",")",")");function kn(t,e){var n,i;return function(){var r=pn(this,t),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function Bn(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=pn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function In(t,e,n){var i=t._id;return t.each((function(){var t=pn(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return dn(t,i).value[e]}}function En(t,e){var n;return("number"==typeof e?Le:e instanceof pe?Ee:(n=pe(e))?(e=n,Ee):je)(t,e)}function Sn(t){return function(){this.removeAttribute(t)}}function Mn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tn(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}}function Ln(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}function qn(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttribute(t)}}function Nn(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}function Pn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function jn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function zn(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&jn(t,r)),n}return r._value=e,r}function Rn(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&Pn(t,r)),n}return r._value=e,r}function Fn(t,e){return function(){un(this,t).delay=+e.apply(this,arguments)}}function $n(t,e){return e=+e,function(){un(this,t).delay=e}}function Dn(t,e){return function(){pn(this,t).duration=+e.apply(this,arguments)}}function On(t,e){return e=+e,function(){pn(this,t).duration=e}}function Wn(t,e){if("function"!=typeof e)throw new Error;return function(){pn(this,t).ease=e}}function Hn(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?un:pn;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(e,n),a.on=r}}var Vn=Wt.prototype.constructor;function Un(t){return function(){this.style.removeProperty(t)}}function Zn(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Xn(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Zn(t,o,n)),i}return o._value=e,o}function Yn(t){return function(e){this.textContent=t.call(this,e)}}function Gn(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Yn(i)),e}return i._value=t,i}var Qn=0;function Jn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Kn(){return++Qn}var ti=Wt.prototype;Jn.prototype=function(t){return Wt().transition(t)}.prototype={constructor:Jn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=N(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,c=i[a],h=c.length,u=o[a]=new Array(h),p=0;p<h;++p)(s=c[p])&&(l=t.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),u[p]=l,hn(u[p],e,n,p,u,dn(s,n)));return new Jn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=j(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,c=i[s],h=c.length,u=0;u<h;++u)if(l=c[u]){for(var p,d=t.call(l,l.__data__,u,c),f=dn(l,n),g=0,v=d.length;g<v;++g)(p=d[g])&&hn(p,e,n,g,d,f);o.push(d),a.push(l)}return new Jn(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=z(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Jn(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],h=n[s],u=c.length,p=a[s]=new Array(u),d=0;d<u;++d)(l=c[d]||h[d])&&(p[d]=l);for(;s<i;++s)a[s]=e[s];return new Jn(a,this._parents,this._name,this._id)},selection:function(){return new Vn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Kn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var h=dn(a,e);hn(a,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Jn(i,this._parents,t,n)},call:ti.call,nodes:ti.nodes,node:ti.node,size:ti.size,empty:ti.empty,each:ti.each,on:function(t,e){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(t):this.each(Hn(n,t,e))},attr:function(t,e){var n=V(t),i="transform"===n?Cn:En;return this.attrTween(t,"function"==typeof e?(n.local?Nn:qn)(n,i,In(this,"attr."+t,e)):null==e?(n.local?Mn:Sn)(n):(n.local?Ln:Tn)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=V(t);return this.tween(n,(i.local?zn:Rn)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?wn:En;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=nt(this,t),a=(this.style.removeProperty(t),nt(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}(t,i)).on("end.style."+t,Un(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var a=nt(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=nt(this,t)),a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,s))}}(t,i,In(this,"style."+t,e))).each(function(t,e){var n,i,r,o,a="style."+e,s="end."+a;return function(){var l=pn(this,t),c=l.on,h=null==l.value[a]?o||(o=Un(e)):void 0;c===n&&r===h||(i=(n=c).copy()).on(s,r=h),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var a=nt(this,t);return a===o?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Xn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(In(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Gn(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=dn(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?kn:Bn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fn:$n)(e,t)):dn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Dn:On)(e,t)):dn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Wn(e,t)):dn(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--r&&o()}};n.each((function(){var n=pn(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}))}))}};var ei={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ni(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ei.time=Ke(),ei;return n}function ii(t){return function(){return t}}function ri(t,e,n){this.target=t,this.type=e,this.selection=n}function oi(){Mt.stopImmediatePropagation()}function ai(){Mt.preventDefault(),Mt.stopImmediatePropagation()}Wt.prototype.interrupt=function(t){return this.each((function(){fn(this,t)}))},Wt.prototype.transition=function(t){var e,n;t instanceof Jn?(e=t._id,t=t._name):(e=Kn(),(n=ei).time=Ke(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&hn(a,t,e,c,s,n||ni(a,e));return new Jn(i,this._parents,t,e)};var si={name:"drag"},li={name:"space"},ci={name:"handle"},hi={name:"center"};function ui(t){return[+t[0],+t[1]]}function pi(t){return[ui(t[0]),ui(t[1])]}function di(t){return function(e){return De(e,Mt.touches,t)}}var fi={name:"x",handles:["w","e"].map(_i),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},gi={name:"y",handles:["n","s"].map(_i),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},vi=(["n","w","e","s","nw","ne","sw","se"].map(_i),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Ai={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},bi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _i(t){return{type:t}}function xi(){return!Mt.ctrlKey&&!Mt.button}function wi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ci(){return navigator.maxTouchPoints||"ontouchstart"in this}function ki(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Bi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ii(){return function(t){var e,n=wi,i=xi,r=Ci,o=!0,a=L("start","brush","end"),s=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([_i("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",vi.overlay).merge(n).each((function(){var t=ki(this).extent;Ht(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([_i("selection")]).enter().append("rect").attr("class","selection").attr("cursor",vi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return vi[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(r).on("touchstart.brush",p).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Ht(this),e=ki(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new u(t,e,n):i}function u(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function p(){if((!e||Mt.touches)&&i.apply(this,arguments)){var n,r,a,s,l,u,p,d,f,g,v,A=this,b=Mt.target.__data__.type,m="selection"===(o&&Mt.metaKey?b="overlay":b)?si:o&&Mt.altKey?hi:ci,y=t===gi?null:mi[b],_=t===fi?null:yi[b],x=ki(A),w=x.extent,C=x.selection,k=w[0][0],B=w[0][1],I=w[1][0],E=w[1][1],S=0,M=0,T=y&&_&&o&&Mt.shiftKey,L=Mt.touches?di(Mt.changedTouches[0].identifier):Oe,q=L(A),N=q,P=h(A,arguments,!0).beforestart();"overlay"===b?(C&&(f=!0),x.selection=C=[[n=t===gi?k:q[0],a=t===fi?B:q[1]],[l=t===gi?I:n,p=t===fi?E:a]]):(n=C[0][0],a=C[0][1],l=C[1][0],p=C[1][1]),r=n,s=a,u=l,d=p;var j=Ht(A).attr("pointer-events","none"),z=j.selectAll(".overlay").attr("cursor",vi[b]);if(Mt.touches)P.moved=F,P.ended=D;else{var R=Ht(Mt.view).on("mousemove.brush",F,!0).on("mouseup.brush",D,!0);o&&R.on("keydown.brush",O,!0).on("keyup.brush",W,!0),Ut(Mt.view)}oi(),fn(A),c.call(A),P.start()}function F(){var t=L(A);!T||g||v||(Math.abs(t[0]-N[0])>Math.abs(t[1]-N[1])?v=!0:g=!0),N=t,f=!0,ai(),$()}function $(){var t;switch(S=N[0]-q[0],M=N[1]-q[1],m){case li:case si:y&&(S=Math.max(k-n,Math.min(I-l,S)),r=n+S,u=l+S),_&&(M=Math.max(B-a,Math.min(E-p,M)),s=a+M,d=p+M);break;case ci:y<0?(S=Math.max(k-n,Math.min(I-n,S)),r=n+S,u=l):y>0&&(S=Math.max(k-l,Math.min(I-l,S)),r=n,u=l+S),_<0?(M=Math.max(B-a,Math.min(E-a,M)),s=a+M,d=p):_>0&&(M=Math.max(B-p,Math.min(E-p,M)),s=a,d=p+M);break;case hi:y&&(r=Math.max(k,Math.min(I,n-S*y)),u=Math.max(k,Math.min(I,l+S*y))),_&&(s=Math.max(B,Math.min(E,a-M*_)),d=Math.max(B,Math.min(E,p+M*_)))}u<r&&(y*=-1,t=n,n=l,l=t,t=r,r=u,u=t,b in Ai&&z.attr("cursor",vi[b=Ai[b]])),d<s&&(_*=-1,t=a,a=p,p=t,t=s,s=d,d=t,b in bi&&z.attr("cursor",vi[b=bi[b]])),x.selection&&(C=x.selection),g&&(r=C[0][0],u=C[1][0]),v&&(s=C[0][1],d=C[1][1]),C[0][0]===r&&C[0][1]===s&&C[1][0]===u&&C[1][1]===d||(x.selection=[[r,s],[u,d]],c.call(A),P.brush())}function D(){if(oi(),Mt.touches){if(Mt.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Zt(Mt.view,f),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),z.attr("cursor",vi.overlay),x.selection&&(C=x.selection),Bi(C)&&(x.selection=null,c.call(A)),P.end()}function O(){switch(Mt.keyCode){case 16:T=y&&_;break;case 18:m===ci&&(y&&(l=u-S*y,n=r+S*y),_&&(p=d-M*_,a=s+M*_),m=hi,$());break;case 32:m!==ci&&m!==hi||(y<0?l=u-S:y>0&&(n=r-S),_<0?p=d-M:_>0&&(a=s-M),m=li,z.attr("cursor",vi.selection),$());break;default:return}ai()}function W(){switch(Mt.keyCode){case 16:T&&(g=v=T=!1,$());break;case 18:m===hi&&(y<0?l=u:y>0&&(n=r),_<0?p=d:_>0&&(a=s),m=ci,$());break;case 32:m===li&&(Mt.altKey?(y&&(l=u-S*y,n=r+S*y),_&&(p=d-M*_,a=s+M*_),m=hi):(y<0?l=u:y>0&&(n=r),_<0?p=d:_>0&&(a=s),m=ci),z.attr("cursor",vi[b]),$());break;default:return}ai()}}function d(){h(this,arguments).moved()}function f(){h(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=pi(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n){e.selection?e.on("start.brush",(function(){h(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){h(this,arguments).end()})).tween("brush",(function(){var e=this,i=e.__brush,r=h(e,arguments),o=i.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=Re(o,a);function l(t){i.selection=1===t&&null===a?null:s(t),c.call(e),r.brush()}return null!==o&&null!==a?l:l(1)})):e.each((function(){var e=this,i=arguments,r=e.__brush,o=t.input("function"==typeof n?n.apply(e,i):n,r.extent),a=h(e,i).beforestart();fn(e),r.selection=null===o?null:o,c.call(e),a.start().brush().end()}))},l.clear=function(t){l.move(t,null)},u.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){jt(new ri(l,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:ii(pi(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:ii(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:ii(!!t),l):r},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(o=!!t,l):o},l.on=function(){var t=a.on.apply(a,arguments);return t===a?l:t},l}(fi)}Math.cos,Math.sin,Math.PI,Math.max,Array.prototype.slice;var Ei="$";function Si(){}function Mi(t,e){var n=new Si;if(t instanceof Si)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}Si.prototype=Mi.prototype={constructor:Si,has:function(t){return Ei+t in this},get:function(t){return this[Ei+t]},set:function(t,e){return this[Ei+t]=e,this},remove:function(t){var e=Ei+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Ei&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Ei&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Ei&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Ei&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Ei&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ei)return!1;return!0},each:function(t){for(var e in this)e[0]===Ei&&t(this[e],e.slice(1),this)}};const Ti=Mi;function Li(){}var qi=Ti.prototype;function Ni(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Pi(t){return(t=Ni(Math.abs(t)))?t[1]:NaN}Li.prototype=function(t,e){var n=new Li;if(t instanceof Li)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:Li,has:qi.has,add:function(t){return this[Ei+(t+="")]=t,this},remove:qi.remove,clear:qi.clear,values:qi.keys,size:qi.size,empty:qi.empty,each:qi.each},Array.prototype.slice,Math.PI,Math.sqrt(5);var ji,zi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ri(t){if(!(e=zi.exec(t)))throw new Error("invalid format: "+t);var e;return new Fi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Fi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function $i(t,e){var n=Ni(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ri.prototype=Fi.prototype,Fi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Di={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return $i(100*t,e)},r:$i,s:function(t,e){var n=Ni(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(ji=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ni(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Oi(t){return t}var Wi,Hi,Vi,Ui=Array.prototype.map,Zi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xi(){return Math.random()}Wi=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Oi:(e=Ui.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Oi:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ui.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=Ri(t)).fill,n=t.align,u=t.sign,p=t.symbol,d=t.zero,f=t.width,g=t.comma,v=t.precision,A=t.trim,b=t.type;"n"===b?(g=!0,b="g"):Di[b]||(void 0===v&&(v=12),A=!0,b="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var m="$"===p?r:"#"===p&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===p?o:/[%p]/.test(b)?l:"",_=Di[b],x=/[defgprs%]/.test(b);function w(t){var r,o,l,p=m,w=y;if("c"===b)w=_(t)+w,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:_(Math.abs(t),v),A&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==u&&(C=!1),p=(C?"("===u?u:c:"-"===u||"("===u?"":u)+p,w=("s"===b?Zi[8+ji/3]:"")+w+(C&&"("===u?")":""),x)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){w=(46===l?a+t.slice(r+1):t.slice(r))+w,t=t.slice(0,r);break}}g&&!d&&(t=i(t,1/0));var k=p.length+t.length+w.length,B=k<f?new Array(f-k+1).join(e):"";switch(g&&d&&(t=i(B+t,B.length?f-w.length:1/0),B=""),n){case"<":t=p+t+w+B;break;case"=":t=p+B+t+w;break;case"^":t=B.slice(0,k=B.length>>1)+p+t+w+B.slice(k);break;default:t=B+p+t+w}return s(t)}return v=void 0===v?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),w.toString=function(){return t+""},w}return{format:u,formatPrefix:function(t,e){var n=u(((t=Ri(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Pi(e)/3))),r=Math.pow(10,-i),o=Zi[8+i/3];return function(t){return n(r*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Hi=Wi.format,Vi=Wi.formatPrefix,function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Xi);const Yi=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do{i=2*e()-1,o=2*e()-1,r=i*i+o*o}while(!r||r>1);return t+n*o*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(Xi),Gi=(function t(e){function n(){var t=Yi.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Xi),function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(Xi));function Qi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}(function t(e){function n(t){var n=Gi.source(e)(t);return function(){return n()/t}}return n.source=t,n})(Xi),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Xi);var Ji=Array.prototype,Ki=Ji.map,tr=Ji.slice,er={name:"implicit"};function nr(){var t=Ti(),e=[],n=[],i=er;function r(r){var o=r+"",a=t.get(o);if(!a){if(i!==er)return i;t.set(o,a=e.push(r))}return n[(a-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Ti();for(var i,o,a=-1,s=n.length;++a<s;)t.has(o=(i=n[a])+"")||t.set(o,e.push(i));return r},r.range=function(t){return arguments.length?(n=tr.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return nr(e,n).unknown(i)},Qi.apply(r,arguments),r}function ir(){var t,e,n=nr().unknown(void 0),i=n.domain,r=n.range,o=[0,1],a=!1,s=0,l=0,c=.5;function h(){var n=i().length,h=o[1]<o[0],u=o[h-0],p=o[1-h];t=(p-u)/Math.max(1,n-s+2*l),a&&(t=Math.floor(t)),u+=(p-u-t*(n-s))*c,e=t*(1-s),a&&(u=Math.round(u),e=Math.round(e));var d=g(n).map((function(e){return u+t*e}));return r(h?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],h()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),h()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),h()):s},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return ir(i(),o).round(a).paddingInner(s).paddingOuter(l).align(c)},Qi.apply(h(),arguments)}function rr(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rr(e())},t}function or(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ar(t){return+t}var sr=[0,1];function lr(t){return t}function cr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function hr(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function ur(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=cr(r,i),o=n(a,o)):(i=cr(i,r),o=n(o,a)),function(t){return o(i(t))}}function pr(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=cr(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=l(t,e,1,i)-1;return o[n](r[n](e))}}function dr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fr(){var t,e,n,i,r,o,a=sr,s=sr,l=Re,c=lr;function h(){return i=Math.min(a.length,s.length)>2?pr:ur,r=o=null,u}function u(e){return isNaN(e=+e)?n:(r||(r=i(a.map(t),s,l)))(t(c(e)))}return u.invert=function(n){return c(e((o||(o=i(s,a.map(t),Le)))(n)))},u.domain=function(t){return arguments.length?(a=Ki.call(t,ar),c===lr||(c=hr(a)),h()):a.slice()},u.range=function(t){return arguments.length?(s=tr.call(t),h()):s.slice()},u.rangeRound=function(t){return s=tr.call(t),l=or,h()},u.clamp=function(t){return arguments.length?(c=t?hr(a):lr,u):c!==lr},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,h()}}function gr(t,e){return fr()(t,e)}function vr(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(a=f(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(t-s)/a;return i&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var r,o=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=u?r*=10:o>=p?r*=5:o>=d&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Ri(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Pi(e)/3)))-Pi(Math.abs(t)))}(o,a))||(i.precision=r),Vi(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pi(e)-Pi(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Pi(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return Hi(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),o=0,a=r.length-1,s=r[o],l=r[a];return l<s&&(i=s,s=l,l=i,i=o,o=a,a=i),(i=f(s,l,n))>0?i=f(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=f(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[o]=Math.floor(s/i)*i,r[a]=Math.ceil(l/i)*i,e(r)):i<0&&(r[o]=Math.ceil(s*i)/i,r[a]=Math.floor(l*i)/i,e(r)),t},t}function Ar(){var t=gr(lr,lr);return t.copy=function(){return dr(t,Ar())},Qi.apply(t,arguments),vr(t)}function br(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function mr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yr(t){return t<0?-t*t:t*t}function _r(t){var e=t(lr,lr),n=1;function i(){return 1===n?t(lr,lr):.5===n?t(mr,yr):t(br(n),br(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},vr(e)}function xr(){var t=_r(fr());return t.copy=function(){return dr(t,xr()).exponent(t.exponent())},Qi.apply(t,arguments),t}var wr=Math.PI,Cr=2*wr,kr=1e-6,Br=Cr-kr;function Ir(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Er(){return new Ir}Ir.prototype=Er.prototype={constructor:Ir,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,c=o-t,h=a-e,u=c*c+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>kr)if(Math.abs(h*s-l*c)>kr&&r){var p=n-o,d=i-a,f=s*s+l*l,g=p*p+d*d,v=Math.sqrt(f),A=Math.sqrt(u),b=r*Math.tan((wr-Math.acos((f+u-g)/(2*v*A)))/2),m=b/A,y=b/v;Math.abs(m-1)>kr&&(this._+="L"+(t+m*c)+","+(e+m*h)),this._+="A"+r+","+r+",0,0,"+ +(h*p>c*d)+","+(this._x1=t+y*s)+","+(this._y1=e+y*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+a,c=e+s,h=1^o,u=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>kr||Math.abs(this._y1-c)>kr)&&(this._+="L"+l+","+c),n&&(u<0&&(u=u%Cr+Cr),u>Br?this._+="A"+n+","+n+",0,1,"+h+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):u>kr&&(this._+="A"+n+","+n+",0,"+ +(u>=wr)+","+h+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const Sr=Er;function Mr(t){return function(){return t}}function Tr(t){this._context=t}function Lr(t){return new Tr(t)}function qr(t){return t[0]}function Nr(t){return t[1]}function Pr(){this._=null}function jr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zr(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Rr(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Fr(t){for(;t.L;)t=t.L;return t}Tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Pr.prototype={constructor:Pr,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Fr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(zr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Rr(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Rr(this,n),n=(t=n).U),n.C=!1,i.C=!0,zr(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Fr(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,zr(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rr(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,zr(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Rr(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zr(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Rr(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};const $r=Pr;function Dr(t,e,n,i){var r=[null,null],o=uo.push(r)-1;return r.left=t,r.right=e,n&&Wr(r,t,e,n),i&&Wr(r,e,t,i),co[t.index].halfedges.push(o),co[e.index].halfedges.push(o),r}function Or(t,e,n){var i=[e,n];return i.left=t,i}function Wr(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Hr(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],c=a[1],h=0,u=1,p=s[0]-l,d=s[1]-c;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<u&&(u=o)}else if(p>0){if(o>u)return;o>h&&(h=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>u)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<u&&(u=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>h&&(h=o)}if(o=r-c,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<u&&(u=o)}return!(h>0||u<1)||(h>0&&(t[0]=[l+h*p,c+h*d]),u<1&&(t[1]=[l+u*p,c+u*d]),!0)}}}}}function Vr(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],c=t.left,h=t.right,u=c[0],p=c[1],d=h[0],f=h[1],g=(u+d)/2,v=(p+f)/2;if(f===p){if(g<e||g>=i)return;if(u>d){if(l){if(l[1]>=r)return}else l=[g,n];o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r];o=[g,n]}}else if(s=v-(a=(u-d)/(f-p))*g,a<-1||a>1)if(u>d){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(p<f){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Ur(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Zr(t,e){return e[+(e.left!==t.site)]}function Xr(t,e){return e[+(e.left===t.site)]}var Yr,Gr=[];function Qr(){jr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,h=o[0]-a,u=o[1]-s,p=2*(l*u-c*h);if(!(p>=-fo)){var d=l*l+c*c,f=h*h+u*u,g=(u*d-c*f)/p,v=(l*f-h*d)/p,A=Gr.pop()||new Qr;A.arc=t,A.site=r,A.x=g+a,A.y=(A.cy=v+s)+Math.sqrt(g*g+v*v),t.circle=A;for(var b=null,m=ho._;m;)if(A.y<m.y||A.y===m.y&&A.x<=m.x){if(!m.L){b=m.P;break}m=m.L}else{if(!m.R){b=m;break}m=m.R}ho.insert(b,A),b||(Yr=A)}}}}function Kr(t){var e=t.circle;e&&(e.P||(Yr=e.N),ho.remove(e),Gr.push(e),jr(e),t.circle=null)}var to=[];function eo(){jr(this),this.edge=this.site=this.circle=null}function no(t){var e=to.pop()||new eo;return e.site=t,e}function io(t){Kr(t),lo.remove(t),to.push(t),jr(t)}function ro(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];io(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<po&&Math.abs(i-l.circle.cy)<po;)o=l.P,s.unshift(l),io(l),l=o;s.unshift(l),Kr(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<po&&Math.abs(i-c.circle.cy)<po;)a=c.N,s.push(c),io(c),c=a;s.push(c),Kr(c);var h,u=s.length;for(h=1;h<u;++h)c=s[h],l=s[h-1],Wr(c.edge,l.site,c.site,r);l=s[0],(c=s[u-1]).edge=Dr(l.site,c.site,null,r),Jr(l),Jr(c)}function oo(t){for(var e,n,i,r,o=t[0],a=t[1],s=lo._;s;)if((i=ao(s,a)-o)>po)s=s.L;else{if(!((r=o-so(s,a))>po)){i>-po?(e=s.P,n=s):r>-po?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){co[t.index]={site:t,halfedges:[]}}(t);var l=no(t);if(lo.insert(e,l),e||n){if(e===n)return Kr(e),n=no(e.site),lo.insert(l,n),l.edge=n.edge=Dr(e.site,l.site),Jr(e),void Jr(n);if(n){Kr(e),Kr(n);var c=e.site,h=c[0],u=c[1],p=t[0]-h,d=t[1]-u,f=n.site,g=f[0]-h,v=f[1]-u,A=2*(p*v-d*g),b=p*p+d*d,m=g*g+v*v,y=[(v*b-d*m)/A+h,(p*m-g*b)/A+u];Wr(n.edge,c,f,y),l.edge=Dr(c,t,null,y),n.edge=Dr(t,f,null,y),Jr(e),Jr(n)}else l.edge=Dr(e.site,l.site)}}function ao(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-e;if(!c)return s;var h=s-i,u=1/o-1/c,p=h/c;return u?(-p+Math.sqrt(p*p-2*u*(h*h/(-2*c)-l+c/2+r-o/2)))/u+i:(i+s)/2}function so(t,e){var n=t.N;if(n)return ao(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var lo,co,ho,uo,po=1e-6,fo=1e-12;function go(t,e){return e[1]-t[1]||e[0]-t[0]}function vo(t,e){var n,i,r,o=t.sort(go).pop();for(uo=[],co=new Array(t.length),lo=new $r,ho=new $r;;)if(r=Yr,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(oo(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;ro(r.arc)}if(function(){for(var t,e,n,i,r=0,o=co.length;r<o;++r)if((t=co[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Ur(t,uo[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,o=uo.length;o--;)Vr(r=uo[o],t,e,n,i)&&Hr(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>po||Math.abs(r[0][1]-r[1][1])>po)||delete uo[o]}(a,s,l,c),function(t,e,n,i){var r,o,a,s,l,c,h,u,p,d,f,g,v=co.length,A=!0;for(r=0;r<v;++r)if(o=co[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)uo[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(d=Xr(o,uo[l[s]]))[0],g=d[1],u=(h=Zr(o,uo[l[++s%c]]))[0],p=h[1],(Math.abs(f-u)>po||Math.abs(g-p)>po)&&(l.splice(s,0,uo.push(Or(a,d,Math.abs(f-t)<po&&i-g>po?[t,Math.abs(u-t)<po?p:i]:Math.abs(g-i)<po&&n-f>po?[Math.abs(p-i)<po?u:n,i]:Math.abs(f-n)<po&&g-e>po?[n,Math.abs(u-n)<po?p:e]:Math.abs(g-e)<po&&f-t>po?[Math.abs(p-e)<po?u:t,e]:null))-1),++c);c&&(A=!1)}if(A){var b,m,y,_=1/0;for(r=0,A=null;r<v;++r)(o=co[r])&&(y=(b=(a=o.site)[0]-t)*b+(m=a[1]-e)*m)<_&&(_=y,A=o);if(A){var x=[t,e],w=[t,i],C=[n,i],k=[n,e];A.halfedges.push(uo.push(Or(a=A.site,x,w))-1,uo.push(Or(a,w,C))-1,uo.push(Or(a,C,k))-1,uo.push(Or(a,k,x))-1)}}for(r=0;r<v;++r)(o=co[r])&&(o.halfedges.length||delete co[r])}(a,s,l,c)}this.edges=uo,this.cells=co,lo=ho=uo=co=null}vo.prototype={constructor:vo,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Zr(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s,l,c,h=n.site,u=-1,p=e[r[o-1]],d=p.left===h?p.right:p.left;++u<o;)a=d,d=(p=e[r[u]]).left===h?p.right:p.left,a&&d&&i<a.index&&i<d.index&&(l=a,c=d,((s=h)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&t.push([h.data,a.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=t-r.site[0],c=e-r.site[1],h=l*l+c*c;do{r=o.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],c=e-s[1],u=l*l+c*c;u<h&&(h=u,a=s.index)}}))}while(null!==a);return o._found=i,null==n||h<=n*n?r.site:null}};var Ao=Math.SQRT2;function bo(t){return((t=Math.exp(t))+1/t)/2}function mo(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],c=e[2],h=s-r,u=l-o,p=h*h+u*u;if(p<1e-12)i=Math.log(c/a)/Ao,n=function(t){return[r+t*h,o+t*u,a*Math.exp(Ao*t*i)]};else{var d=Math.sqrt(p),f=(c*c-a*a+4*p)/(2*a*2*d),g=(c*c-a*a-4*p)/(2*c*2*d),v=Math.log(Math.sqrt(f*f+1)-f),A=Math.log(Math.sqrt(g*g+1)-g);i=(A-v)/Ao,n=function(t){var e,n=t*i,s=bo(v),l=a/(2*d)*(s*(e=Ao*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[r+l*h,o+l*u,a*s/bo(Ao*n+v)]}}return n.duration=1e3*i,n}function yo(t){return function(){return t}}function _o(t,e,n){this.target=t,this.type=e,this.transform=n}function xo(t,e,n){this.k=t,this.x=e,this.y=n}xo.prototype={constructor:xo,scale:function(t){return 1===t?this:new xo(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new xo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wo=new xo(1,0,0);function Co(){Mt.stopImmediatePropagation()}function ko(){Mt.preventDefault(),Mt.stopImmediatePropagation()}function Bo(){return!Mt.ctrlKey&&!Mt.button}function Io(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Eo(){return this.__zoom||wo}function So(){return-Mt.deltaY*(1===Mt.deltaMode?.05:Mt.deltaMode?1:.002)}function Mo(){return navigator.maxTouchPoints||"ontouchstart"in this}function To(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}xo.prototype;const Lo=ResizeObserver;var qo=i.n(Lo);class No extends HTMLElement{constructor(){super(),this._updateScaleDomain=this._updateScaleDomain.bind(this),this._initZoom=this._initZoom.bind(this),this.zoomed=this.zoomed.bind(this),this._applyZoomTranslation=this.applyZoomTranslation.bind(this);let t=!1;this.applyZoomTranslation=()=>{t||(t=!0,requestAnimationFrame((()=>{t=!1,this._applyZoomTranslation()})))},this._onResize=this._onResize.bind(this),this._listenForResize=this._listenForResize.bind(this)}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.width,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",(t=>{throw t}))}disconnectedCallback(){this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize)}get width(){return this._width}set width(t){this._width=t}set length(t){this._length=t}get length(){return this._length}get xScale(){return this._xScale}set xScale(t){this._xScale=t}get zoom(){return this._zoom}set svg(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}get svg(){return this._svg}get isManaged(){return!0}get margin(){return{top:10,right:10,bottom:10,left:10}}getWidthWithMargins(){return this.width?this.width-this.margin.left-this.margin.right:0}_updateScaleDomain(){this.xScale=Ar().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}_initZoom(){this._zoom=function(){var t,e,n=Bo,i=Io,r=To,o=So,a=Mo,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,h=mo,u=L("start","zoom","end"),p=500,d=0;function f(t){t.property("__zoom",Eo).on("wheel.zoom",_).on("mousedown.zoom",x).on("dblclick.zoom",w).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new xo(e,t.x,t.y)}function v(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new xo(t.k,i,r)}function A(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on("start.zoom",(function(){m(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){m(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,o=m(t,r),a=i.apply(t,r),s=null==n?A(a):"function"==typeof n?n.apply(t,r):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,u="function"==typeof e?e.apply(t,r):e,p=h(c.invert(s).concat(l/c.k),u.invert(s).concat(l/u.k));return function(t){if(1===t)t=u;else{var e=p(t),n=l/e[2];t=new xo(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function m(t,e,n){return!n&&t.__zooming||new y(t,e)}function y(t,e){this.that=t,this.args=e,this.active=0,this.extent=i.apply(t,e),this.taps=0}function _(){if(n.apply(this,arguments)){var t=m(this,arguments),e=this.__zoom,i=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),a=Oe(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[a,e.invert(a)],fn(this),t.start()}ko(),t.wheel=setTimeout(c,150),t.zoom("mouse",r(v(g(e,i),t.mouse[0],t.mouse[1]),t.extent,l))}function c(){t.wheel=null,t.end()}}function x(){if(!e&&n.apply(this,arguments)){var t=m(this,arguments,!0),i=Ht(Mt.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",h,!0),o=Oe(this),a=Mt.clientX,s=Mt.clientY;Ut(Mt.view),Co(),t.mouse=[o,this.__zoom.invert(o)],fn(this),t.start()}function c(){if(ko(),!t.moved){var e=Mt.clientX-a,n=Mt.clientY-s;t.moved=e*e+n*n>d}t.zoom("mouse",r(v(t.that.__zoom,t.mouse[0]=Oe(t.that),t.mouse[1]),t.extent,l))}function h(){i.on("mousemove.zoom mouseup.zoom",null),Zt(Mt.view,t.moved),ko(),t.end()}}function w(){if(n.apply(this,arguments)){var t=this.__zoom,e=Oe(this),o=t.invert(e),a=t.k*(Mt.shiftKey?.5:2),s=r(v(g(t,a),e,o),i.apply(this,arguments),l);ko(),c>0?Ht(this).transition().duration(c).call(b,s,e):Ht(this).call(f.transform,s)}}function C(){if(n.apply(this,arguments)){var e,i,r,o,a=Mt.touches,s=a.length,l=m(this,arguments,Mt.changedTouches.length===s);for(Co(),i=0;i<s;++i)o=[o=De(this,a,(r=a[i]).identifier),this.__zoom.invert(o),r.identifier],l.touch0?l.touch1||l.touch0[2]===o[2]||(l.touch1=o,l.taps=0):(l.touch0=o,e=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(l.taps<2&&(t=setTimeout((function(){t=null}),p)),fn(this),l.start())}}function k(){if(this.__zooming){var e,n,i,o,a=m(this,arguments),s=Mt.changedTouches,c=s.length;for(ko(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<c;++e)i=De(this,s,(n=s[e]).identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=i);if(n=a.that.__zoom,a.touch1){var h=a.touch0[0],u=a.touch0[1],p=a.touch1[0],d=a.touch1[1],f=(f=p[0]-h[0])*f+(f=p[1]-h[1])*f,A=(A=d[0]-u[0])*A+(A=d[1]-u[1])*A;n=g(n,Math.sqrt(f/A)),i=[(h[0]+p[0])/2,(h[1]+p[1])/2],o=[(u[0]+d[0])/2,(u[1]+d[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],o=a.touch0[1]}a.zoom("touch",r(v(n,i,o),a.extent,l))}}function B(){if(this.__zooming){var t,n,i=m(this,arguments),r=Mt.changedTouches,o=r.length;for(Co(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),p),t=0;t<o;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var a=Ht(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return f.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",Eo),t!==i?b(t,e,n):i.interrupt().each((function(){m(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},f.scaleBy=function(t,e,n){f.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n)},f.scaleTo=function(t,e,n){f.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,a=null==n?A(t):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),c="function"==typeof e?e.apply(this,arguments):e;return r(v(g(o,c),a,s),t,l)}),n)},f.translateBy=function(t,e,n){f.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}))},f.translateTo=function(t,e,n,o){f.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==o?A(t):"function"==typeof o?o.apply(this,arguments):o;return r(wo.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),o)},y.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){jt(new _o(f,t,this.that.__zoom),u.apply,u,[t,this.that,this.args])}},f.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:yo(+t),f):o},f.filter=function(t){return arguments.length?(n="function"==typeof t?t:yo(!!t),f):n},f.touchable=function(t){return arguments.length?(a="function"==typeof t?t:yo(!!t),f):a},f.extent=function(t){return arguments.length?(i="function"==typeof t?t:yo([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),f):i},f.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],f):[s[0],s[1]]},f.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],f):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},f.constrain=function(t){return arguments.length?(r=t,f):r},f.duration=function(t){return arguments.length?(c=+t,f):c},f.interpolate=function(t){return arguments.length?(h=t,f):h},f.on=function(){var t=u.on.apply(u,arguments);return t===u?f:t},f.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,f):Math.sqrt(d)},f}().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}static get observedAttributes(){return["displaystart","displayend","length"]}attributeChangedCallback(t,e,n){if(e!==n){const e=parseFloat(n);this[`_${t}`]=isNaN(e)?n:e,"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}zoomed(){if(this.xScale=Mt.transform.rescaleX(this._originXScale),this.dontDispatch)return;let[t,e]=this.xScale.domain();e--,this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,t),displayend:Math.min(this.length,e)},bubbles:!0,cancelable:!0}))}applyZoomTranslation(){if(!this.svg||!this._originXScale)return;const t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,wo.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}_onResize(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}_listenForResize(){this._ro=new(qo())(this._onResize),this._ro.observe(this)}getXFromSeqPosition(t){return this.margin.left+this.xScale(t)}getSingleBaseWidth(){return this.xScale(2)-this.xScale(1)}}const Po=No,jo=function(){customElements.define("protvista-zoomable",Po)};window.customElements?jo():document.addEventListener("WebComponentsReady",(function(){jo()}));const zo=Po,Ro=class extends zo{connectedCallback(){super.connectedCallback(),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this.sequence=this.getAttribute("sequence"),this.sequence&&this._createSequence()}static get observedAttributes(){return zo.observedAttributes.concat("highlightstart","highlightend")}get data(){return this.sequence}set data(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!super.svg?this._createSequence():this.refresh()}_createSequence(){super.svg=Ht(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this.seq_bg=super.svg.append("g").attr("class","background"),this.axis=super.svg.append("g").attr("class","x axis"),this.seq_g=super.svg.append("g").attr("class","sequence").attr("transform","translate(0,30)"),this.seq_g.append("text").attr("class","base").text("T"),this.chWidth=.8*this.seq_g.select("text.base").node().getBBox().width,this.seq_g.select("text.base").remove(),this.highlighted=super.svg.append("rect").attr("class","highlighted").attr("fill","yellow").attr("height",40),this.refresh()}refresh(){if(this.axis){const t=this.getSingleBaseWidth(),e=t-this.chWidth,n=t/2,i=Math.round(Math.max(0,this._displaystart-2)),r=Math.round(Math.min(this.sequence.length,this._displayend+1)),o=e<0?[]:this.sequence.slice(i,r).split("").map(((t,e)=>[1+i+e,t]));this.xAxis=k(this.xScale).tickFormat((t=>Number.isInteger(t)?t:"")).ticks(3,"s"),this.axis.call(this.xAxis),this.axis.attr("transform",`translate(${this.margin.left+n},0)`),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(o,(t=>t[0])),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",(([t])=>this.getXFromSeqPosition(t)+n)).text((([t,e])=>e)).attr("style","font-family:monospace"),this.bases.exit().remove(),this.bases.attr("x",(([t])=>this.getXFromSeqPosition(t)+n)),this.background=this.seq_bg.selectAll("rect.base_bg").data(o,(t=>t[0])),this.background.enter().append("rect").attr("class","base_bg").attr("height",40).merge(this.background).attr("width",t).attr("fill",(([t])=>Math.round(t)%2?"#ccc":"#eee")).attr("x",(([t])=>this.getXFromSeqPosition(t))),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,e)),this.background.style("opacity",Math.min(1,e)),Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",super.getXFromSeqPosition(this._highlightstart)).style("opacity",.3).attr("width",t*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}}},Fo=function(){customElements.define("protvista-sequence",Ro)};window.customElements?Fo():document.addEventListener("WebComponentsReady",(function(){Fo()}));const $o=Ro;var Do=i(985);const Oo="object"==typeof global&&global&&global.Object===Object&&global;var Wo="object"==typeof self&&self&&self.Object===Object&&self;const Ho=Oo||Wo||Function("return this")(),Vo=Ho.Symbol;var Uo=Object.prototype,Zo=Uo.hasOwnProperty,Xo=Uo.toString,Yo=Vo?Vo.toStringTag:void 0;var Go=Object.prototype.toString;var Qo=Vo?Vo.toStringTag:void 0;const Jo=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Qo&&Qo in Object(t)?function(t){var e=Zo.call(t,Yo),n=t[Yo];try{t[Yo]=void 0;var i=!0}catch(t){}var r=Xo.call(t);return i&&(e?t[Yo]=n:delete t[Yo]),r}(t):function(t){return Go.call(t)}(t)},Ko=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},ta=function(t){if(!Ko(t))return!1;var e=Jo(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},ea=Ho["__core-js_shared__"];var na,ia=(na=/[^.]+$/.exec(ea&&ea.keys&&ea.keys.IE_PROTO||""))?"Symbol(src)_1."+na:"";var ra=Function.prototype.toString;const oa=function(t){if(null!=t){try{return ra.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var aa=/^\[object .+?Constructor\]$/,sa=Function.prototype,la=Object.prototype,ca=sa.toString,ha=la.hasOwnProperty,ua=RegExp("^"+ca.call(ha).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const pa=function(t){return!(!Ko(t)||(e=t,ia&&ia in e))&&(ta(t)?ua:aa).test(oa(t));var e},da=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pa(n)?n:void 0},fa=function(){try{var t=da(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ga=function(t,e,n){"__proto__"==e&&fa?fa(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},va=function(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i},Aa=function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var s=o[ba?a:++i];if(!1===e(r[s],s,r))break}return t};var ba;const ma=function(t){return null!=t&&"object"==typeof t},ya=function(t){return ma(t)&&"[object Arguments]"==Jo(t)};var _a=Object.prototype,xa=_a.hasOwnProperty,wa=_a.propertyIsEnumerable,Ca=ya(function(){return arguments}())?ya:function(t){return ma(t)&&xa.call(t,"callee")&&!wa.call(t,"callee")};const ka=Ca,Ba=Array.isArray;var Ia="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ea=Ia&&"object"==typeof module&&module&&!module.nodeType&&module,Sa=Ea&&Ea.exports===Ia?Ho.Buffer:void 0;const Ma=(Sa?Sa.isBuffer:void 0)||function(){return!1};var Ta=/^(?:0|[1-9]\d*)$/;const La=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Ta.test(t))&&t>-1&&t%1==0&&t<e},qa=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Na={};Na["[object Float32Array]"]=Na["[object Float64Array]"]=Na["[object Int8Array]"]=Na["[object Int16Array]"]=Na["[object Int32Array]"]=Na["[object Uint8Array]"]=Na["[object Uint8ClampedArray]"]=Na["[object Uint16Array]"]=Na["[object Uint32Array]"]=!0,Na["[object Arguments]"]=Na["[object Array]"]=Na["[object ArrayBuffer]"]=Na["[object Boolean]"]=Na["[object DataView]"]=Na["[object Date]"]=Na["[object Error]"]=Na["[object Function]"]=Na["[object Map]"]=Na["[object Number]"]=Na["[object Object]"]=Na["[object RegExp]"]=Na["[object Set]"]=Na["[object String]"]=Na["[object WeakMap]"]=!1;const Pa=function(t){return function(e){return t(e)}};var ja="object"==typeof exports&&exports&&!exports.nodeType&&exports,za=ja&&"object"==typeof module&&module&&!module.nodeType&&module,Ra=za&&za.exports===ja&&Oo.process;const Fa=function(){try{return za&&za.require&&za.require("util").types||Ra&&Ra.binding&&Ra.binding("util")}catch(t){}}();var $a=Fa&&Fa.isTypedArray;const Da=$a?Pa($a):function(t){return ma(t)&&qa(t.length)&&!!Na[Jo(t)]};var Oa=Object.prototype.hasOwnProperty;const Wa=function(t,e){var n=Ba(t),i=!n&&ka(t),r=!n&&!i&&Ma(t),o=!n&&!i&&!r&&Da(t),a=n||i||r||o,s=a?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var c in t)!e&&!Oa.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||La(c,l))||s.push(c);return s};var Ha=Object.prototype;const Va=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ha)},Ua=function(t,e){return function(n){return t(e(n))}},Za=Ua(Object.keys,Object);var Xa=Object.prototype.hasOwnProperty;const Ya=function(t){return null!=t&&qa(t.length)&&!ta(t)},Ga=function(t){return Ya(t)?Wa(t):function(t){if(!Va(t))return Za(t);var e=[];for(var n in Object(t))Xa.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Qa=function(t,e){return t&&Aa(t,e,Ga)},Ja=function(t,e){return function(n,i){if(null==n)return n;if(!Ya(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Object(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}(Qa),Ka=function(t,e,n,i){return Ja(t,(function(t,r,o){e(i,t,n(t),o)})),i},ts=function(t,e){return t===e||t!=t&&e!=e},es=function(t,e){for(var n=t.length;n--;)if(ts(t[n][0],e))return n;return-1};var ns=Array.prototype.splice;function is(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}is.prototype.clear=function(){this.__data__=[],this.size=0},is.prototype.delete=function(t){var e=this.__data__,n=es(e,t);return!(n<0||(n==e.length-1?e.pop():ns.call(e,n,1),--this.size,0))},is.prototype.get=function(t){var e=this.__data__,n=es(e,t);return n<0?void 0:e[n][1]},is.prototype.has=function(t){return es(this.__data__,t)>-1},is.prototype.set=function(t,e){var n=this.__data__,i=es(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const rs=is,os=da(Ho,"Map"),as=da(Object,"create");var ss=Object.prototype.hasOwnProperty;var ls=Object.prototype.hasOwnProperty;function cs(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}cs.prototype.clear=function(){this.__data__=as?as(null):{},this.size=0},cs.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},cs.prototype.get=function(t){var e=this.__data__;if(as){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ss.call(e,t)?e[t]:void 0},cs.prototype.has=function(t){var e=this.__data__;return as?void 0!==e[t]:ls.call(e,t)},cs.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=as&&void 0===e?"__lodash_hash_undefined__":e,this};const hs=cs,us=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function ps(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ps.prototype.clear=function(){this.size=0,this.__data__={hash:new hs,map:new(os||rs),string:new hs}},ps.prototype.delete=function(t){var e=us(this,t).delete(t);return this.size-=e?1:0,e},ps.prototype.get=function(t){return us(this,t).get(t)},ps.prototype.has=function(t){return us(this,t).has(t)},ps.prototype.set=function(t,e){var n=us(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const ds=ps;function fs(t){var e=this.__data__=new rs(t);this.size=e.size}fs.prototype.clear=function(){this.__data__=new rs,this.size=0},fs.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},fs.prototype.get=function(t){return this.__data__.get(t)},fs.prototype.has=function(t){return this.__data__.has(t)},fs.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rs){var i=n.__data__;if(!os||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ds(i)}return n.set(t,e),this.size=n.size,this};const gs=fs;function vs(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ds;++e<n;)this.add(t[e])}vs.prototype.add=vs.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},vs.prototype.has=function(t){return this.__data__.has(t)};const As=vs,bs=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},ms=function(t,e){return t.has(e)},ys=function(t,e,n,i,r,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var u=-1,p=!0,d=2&n?new As:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var f=t[u],g=e[u];if(i)var v=a?i(g,f,u,e,t,o):i(f,g,u,t,e,o);if(void 0!==v){if(v)continue;p=!1;break}if(d){if(!bs(e,(function(t,e){if(!ms(d,e)&&(f===t||r(f,t,n,i,o)))return d.push(e)}))){p=!1;break}}else if(f!==g&&!r(f,g,n,i,o)){p=!1;break}}return o.delete(t),o.delete(e),p},_s=Ho.Uint8Array,xs=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},ws=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Cs=Vo?Vo.prototype:void 0,ks=Cs?Cs.valueOf:void 0;const Bs=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},Is=function(t,e,n){var i=e(t);return Ba(t)?i:Bs(i,n(t))},Es=function(){return[]};var Ss=Object.prototype.propertyIsEnumerable,Ms=Object.getOwnPropertySymbols,Ts=Ms?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}(Ms(t),(function(e){return Ss.call(t,e)})))}:Es;const Ls=Ts,qs=function(t){return Is(t,Ga,Ls)};var Ns=Object.prototype.hasOwnProperty;const Ps=da(Ho,"DataView"),js=da(Ho,"Promise"),zs=da(Ho,"Set"),Rs=da(Ho,"WeakMap");var Fs="[object Map]",$s="[object Promise]",Ds="[object Set]",Os="[object WeakMap]",Ws="[object DataView]",Hs=oa(Ps),Vs=oa(os),Us=oa(js),Zs=oa(zs),Xs=oa(Rs),Ys=Jo;(Ps&&Ys(new Ps(new ArrayBuffer(1)))!=Ws||os&&Ys(new os)!=Fs||js&&Ys(js.resolve())!=$s||zs&&Ys(new zs)!=Ds||Rs&&Ys(new Rs)!=Os)&&(Ys=function(t){var e=Jo(t),n="[object Object]"==e?t.constructor:void 0,i=n?oa(n):"";if(i)switch(i){case Hs:return Ws;case Vs:return Fs;case Us:return $s;case Zs:return Ds;case Xs:return Os}return e});const Gs=Ys;var Qs="[object Arguments]",Js="[object Array]",Ks="[object Object]",tl=Object.prototype.hasOwnProperty;const el=function(t,e,n,i,r,o){var a=Ba(t),s=Ba(e),l=a?Js:Gs(t),c=s?Js:Gs(e),h=(l=l==Qs?Ks:l)==Ks,u=(c=c==Qs?Ks:c)==Ks,p=l==c;if(p&&Ma(t)){if(!Ma(e))return!1;a=!0,h=!1}if(p&&!h)return o||(o=new gs),a||Da(t)?ys(t,e,n,i,r,o):function(t,e,n,i,r,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new _s(t),new _s(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ts(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=xs;case"[object Set]":var l=1&i;if(s||(s=ws),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=2,a.set(t,e);var h=ys(s(t),s(e),i,r,o,a);return a.delete(t),h;case"[object Symbol]":if(ks)return ks.call(t)==ks.call(e)}return!1}(t,e,l,n,i,r,o);if(!(1&n)){var d=h&&tl.call(t,"__wrapped__"),f=u&&tl.call(e,"__wrapped__");if(d||f){var g=d?t.value():t,v=f?e.value():e;return o||(o=new gs),r(g,v,n,i,o)}}return!!p&&(o||(o=new gs),function(t,e,n,i,r,o){var a=1&n,s=qs(t),l=s.length;if(l!=qs(e).length&&!a)return!1;for(var c=l;c--;){var h=s[c];if(!(a?h in e:Ns.call(e,h)))return!1}var u=o.get(t),p=o.get(e);if(u&&p)return u==e&&p==t;var d=!0;o.set(t,e),o.set(e,t);for(var f=a;++c<l;){var g=t[h=s[c]],v=e[h];if(i)var A=a?i(v,g,h,e,t,o):i(g,v,h,t,e,o);if(!(void 0===A?g===v||r(g,v,n,i,o):A)){d=!1;break}f||(f="constructor"==h)}if(d&&!f){var b=t.constructor,m=e.constructor;b==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,i,r,o))},nl=function t(e,n,i,r,o){return e===n||(null==e||null==n||!ma(e)&&!ma(n)?e!=e&&n!=n:el(e,n,i,r,t,o))},il=function(t){return t==t&&!Ko(t)},rl=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},ol=function(t){var e=function(t){for(var e=Ga(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,il(r)]}return e}(t);return 1==e.length&&e[0][2]?rl(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var l=(s=n[r])[0],c=t[l],h=s[1];if(a&&s[2]){if(void 0===c&&!(l in t))return!1}else{var u=new gs;if(i)var p=i(c,h,l,t,e,u);if(!(void 0===p?nl(h,c,3,i,u):p))return!1}}return!0}(n,t,e)}},al=function(t){return"symbol"==typeof t||ma(t)&&"[object Symbol]"==Jo(t)};var sl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ll=/^\w*$/;const cl=function(t,e){if(Ba(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!al(t))||ll.test(t)||!sl.test(t)||null!=e&&t in Object(e)};function hl(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(hl.Cache||ds),n}hl.Cache=ds;var ul,pl,dl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fl=/\\(\\)?/g,gl=(ul=hl((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(dl,(function(t,n,i,r){e.push(i?r.replace(fl,"$1"):n||t)})),e}),(function(t){return 500===pl.size&&pl.clear(),t})),pl=ul.cache,ul);const vl=gl,Al=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r};var bl=Vo?Vo.prototype:void 0,ml=bl?bl.toString:void 0;const yl=function t(e){if("string"==typeof e)return e;if(Ba(e))return Al(e,t)+"";if(al(e))return ml?ml.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},_l=function(t){return null==t?"":yl(t)},xl=function(t,e){return Ba(t)?t:cl(t,e)?[t]:vl(_l(t))},wl=function(t){if("string"==typeof t||al(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Cl=function(t,e){for(var n=0,i=(e=xl(e,t)).length;null!=t&&n<i;)t=t[wl(e[n++])];return n&&n==i?t:void 0},kl=function(t,e){return null!=t&&e in Object(t)},Bl=function(t,e){return null!=t&&function(t,e,n){for(var i=-1,r=(e=xl(e,t)).length,o=!1;++i<r;){var a=wl(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&qa(r)&&La(a,r)&&(Ba(t)||ka(t))}(t,e,kl)},Il=function(t,e){return cl(t)&&il(e)?rl(wl(t),e):function(n){var i=function(t,e,n){var i=null==t?void 0:Cl(t,e);return void 0===i?n:i}(n,t);return void 0===i&&i===e?Bl(n,t):nl(e,i,3)}},El=function(t){return t},Sl=function(t){return cl(t)?(e=wl(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Cl(e,t)}}(t);var e},Ml=function(t){return"function"==typeof t?t:null==t?El:"object"==typeof t?Ba(t)?Il(t[0],t[1]):ol(t):Sl(t)};var Tl,Ll,ql=Object.prototype.hasOwnProperty,Nl=(Tl=function(t,e,n){ql.call(t,n)?t[n].push(e):ga(t,n,[e])},function(t,e){var n=Ba(t)?va:Ka,i=Ll?Ll():{};return n(t,Tl,Ml(e),i)});const Pl=Nl;var jl=i(379),zl=i.n(jl),Rl=i(795),Fl=i.n(Rl),$l=i(569),Dl=i.n($l),Ol=i(565),Wl=i.n(Ol),Hl=i(216),Vl=i.n(Hl),Ul=i(589),Zl=i.n(Ul),Xl=i(822),Yl={};Yl.styleTagTransform=Zl(),Yl.setAttributes=Wl(),Yl.insert=Dl().bind(null,"head"),Yl.domAPI=Fl(),Yl.insertStyleElement=Vl(),zl()(Xl.Z,Yl),Xl.Z&&Xl.Z.locals&&Xl.Z.locals;class Gl extends HTMLElement{static get tagName(){return"protvista-checkbox"}constructor(){super(),this._toggleChecked=this._toggleChecked.bind(this)}connectedCallback(){this._render()}static get observedAttributes(){return["checked","disabled","value"]}attributeChangedCallback(t,e,n){switch(t){case"checked":this.checked=!0;break;case"disabled":this.disabled=!0;break;case"value":this.value=n}}_render(){let{value:t,options:{labels:e,colors:n},checked:i=!1,disabled:r=!1}=this;null==n.length&&(n=[n]),t=`filter-${t.split(":")[1]}`;const o=n.length>1;(0,Do.render)(Do.html`
      <style>
        #${t} .protvista_checkbox_input + .protvista_checkbox_label::before {
          background: ${o?Do.html`linear-gradient(${n[0]}, ${n[1]})`:n[0]};
          opacity: 0.4;
        }

        #${t} .protvista_checkbox_input:checked + .protvista_checkbox_label::before {
          opacity: 1;
        }
      </style>
      <label id="${t}"
             class="protvista_checkbox ${o?"compound":""}"
             tabindex="0">
        <input type="checkbox"
              class="protvista_checkbox_input"
              ?checked="${i}"
              ?disabled="${r}"
              .value="${t}"
              @change="${this._toggleChecked}">
        <span class="protvista_checkbox_label">
          ${e.map((t=>Do.html`<span>${t}</span>`))}
        </span>
      </label>
    `,this)}_toggleChecked(t){t.stopPropagation(),this.checked=!this.checked,this._fireEvent(),this._render()}_fireEvent(){this.dispatchEvent(new CustomEvent("filterChange",{bubbles:!0,composed:!0,detail:{checked:this.checked,value:this.value}}))}}customElements.define(Gl.tagName,Gl);class Ql extends HTMLElement{static get tagName(){return"protvista-filter"}constructor(){super(),this._filters=[],this._selectedFilters=new Set}get isManaged(){return!0}static get observedAttributes(){return["filters"]}attributeChangedCallback(t,e,n){if(e!==n){if("filters"!==t)return;this._filters=JSON.parse(n),this._filters.forEach((({name:t,type:e,options:n})=>{n.selected&&this._selectedFilters.add(`${e.name}:${t}`)})),this._renderFilters()}}connectedCallback(){this._renderFilters(),this.addEventListener("filterChange",this._onFilterChange)}disconnectedCallback(){this.removeEventListener("filterChange",this._onFilterChange)}_renderFilters(){const t=Pl(this._filters,(t=>t.type.text)),e=t=>Do.html`
      <div style="display: flex; flex-direction: column;">
        ${t}
      </div>
    `,n=Do.html`
      ${e(Object.keys(t).map((n=>{return Do.html`
          ${i=n,Do.html`
      <h5>${i}</h5>
    `}
          ${e(t[n].map((({name:t,type:e,options:n})=>Do.html`
              <protvista-checkbox
                  value="${e.name}:${t}"
                  .options="${n}"
                  ?checked="${n.selected}"></protvista-checkbox>`)))}
        `;var i})))}
    `;var i;(0,Do.render)((i=n,Do.html`
      <div style="display: flex;">
        ${i}
      </div>
    `),this)}_onFilterChange(t){let{detail:{checked:e,value:n}}=t;e?this._selectedFilters.add(n):this._selectedFilters.delete(n),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{type:"activefilters",value:[...this._selectedFilters]}}))}_fireEvent(t){this.dispatchEvent(t)}}const Jl=Ql;class Kl extends HTMLElement{constructor(){super(),this._x=null,this.dontDispatch=!1}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}disconnectedCallback(){this._ro?this._ro.unobserve(this):window.removeEventListener(this._onResize)}static get observedAttributes(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}attributeChangedCallback(t,e,n){e!==n&&(this[`_${t}`]=parseFloat(n),this._updateNavRuler())}get width(){return this._width}set width(t){this._width=t}get isManaged(){return!0}_createNavRuler(){this._x=Ar().range([10,this.width-10]),this._x.domain([1,this._length]),this._svg=Ht(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=k(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",30),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",30).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Ii().extent([[10,0],[this.width-10,20.4]]).on("brush",(()=>{Mt.selection&&(this._displaystart=Hi("d")(this._x.invert(Mt.selection[0])),this._displayend=Hi("d")(this._x.invert(Mt.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:Mt.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}_onResize(){this.width=this.offsetWidth,this._x=this._x.range([10,this.width-10]),this._svg.attr("width",this.width),this._axis.call(this._xAxis),this._viewport.extent([[10,0],[this.width-10,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}_updateNavRuler(){this._x&&(this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}_updateLabels(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}_updatePolygon(){this.polygon&&this.polygon.attr("points",`${this._x(this._displaystart)},20\n        ${this._x(this._displayend)},20\n        ${this.width},40\n        0,40`)}}const tc=Kl,ec=function(){customElements.define("protvista-navigation",tc)};window.customElements?ec():document.addEventListener("WebComponentsReady",(function(){ec()}));const nc=tc,ic=class extends nc{connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._offset=parseFloat(this.getAttribute("offset"))||0,this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||this._offset>0?this._offset:1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._offset>0?this._length+this._offset-1:this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}_createNavRuler(){let t=this._offset>0?this._offset:1,e=this._offset>0?this._length+this._offset-1:this._length;this._x=Ar().range([10,this.width-10]),this._x.domain([t,e]),this._svg=Ht(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=k(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",30),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",30).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Ii().extent([[10,0],[this.width-10,20.4]]).on("brush",(()=>{Mt.selection&&(this._displaystart=Hi("d")(this._x.invert(Mt.selection[0])),this._displayend=Hi("d")(this._x.invert(Mt.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:Mt.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())})),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},rc=function(t){return t!=t},oc=function(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):function(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}(t,rc,n)};var ac=/\s/;var sc=/^\s+/;const lc=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&ac.test(t.charAt(e)););return e}(t)+1).replace(sc,""):t};var cc=/^[-+]0x[0-9a-f]+$/i,hc=/^0b[01]+$/i,uc=/^0o[0-7]+$/i,pc=parseInt;const dc=function(t){return t?Infinity===(t=function(t){if("number"==typeof t)return t;if(al(t))return NaN;if(Ko(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ko(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=lc(t);var n=hc.test(t);return n||uc.test(t)?pc(t.slice(2),n?2:8):cc.test(t)?NaN:+t}(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},fc=function(t){return null==t?[]:function(t,e){return Al(e,(function(e){return t[e]}))}(t,Ga(t))};var gc=Math.max;const vc=function(t,e,n,i){t=Ya(t)?t:fc(t),n=n&&!i?function(t){var e=dc(t),n=e%1;return e==e?n?e-n:e:0}(n):0;var r=t.length;return n<0&&(n=gc(r+n,0)),function(t){return"string"==typeof t||!Ba(t)&&ma(t)&&"[object String]"==Jo(t)}(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&oc(t,e,n)>-1};class Ac{getFeatureShape(t,e,n,i){return i=i||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+i]&&(i="rectangle"),this["_"+i]()}static isContinuous(t){return"bridge"!==type.toLowerCase()}_rectangle(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}_roundRectangle(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 -6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 -6,-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,-6Z"}_bridge(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}_getMiddleLine(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}_diamond(){const t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}_chevron(){const t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_catFace(){const t=this._ftWidth/2;var e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_triangle(){const t=this._ftWidth/2;var e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_wave(){const t=this._ftWidth/2;var e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getPolygon(t){let e="M ";const n=this._ftWidth/2;for(var i=0;i<t;i++)e+=5*Math.cos(2*Math.PI*i/t)+n+","+(5*Math.sin(2*Math.PI*i/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_hexagon(){return this._getPolygon(6)}_pentagon(){return this._getPolygon(5)}_circle(){const t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}_arrow(){const t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_doubleBar(){const t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getBrokenEnd(){const t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}_getBrokenStart(){const t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}_discontinuosStart(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuos(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuosEnd(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}}const bc=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t},mc=function(t){return"function"==typeof t?t:El},yc=function(t,e){return(Ba(t)?bc:Ja)(t,mc(e))},_c=function(t,e){var n;return Ja(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n},xc=function(t,e,n){var i=Ba(t)?bs:_c;return n&&function(t,e,n){if(!Ko(n))return!1;var i=typeof e;return!!("number"==i?Ya(n)&&La(e,n.length):"string"==i&&e in n)&&ts(n[e],t)}(t,e,n)&&(e=void 0),i(t,Ml(e))};class wc{constructor({features:t,layoutHeight:e,padding:n=1,minHeight:i=17}){this._padding=n,this._minHeight=i,this._layoutHeight=e}init(t){this._features=t}getFeatureYPos(t){return Math.min(this._layoutHeight,this._minHeight)}getFeatureHeight(t){return Math.min(this._layoutHeight,this._minHeight)}}class Cc{constructor(){this._rowFeatures=[]}_featureOverlap(t,e,n,i){const r=Number(t.start)>=Number(e.start)&&Number(t.start)<=Number(i),o=Number(n)>=Number(e.start)&&Number(n)<=Number(i);return r||o}_dOverlap(t,e,n,i){const r=Number(e.start)>=Number(t.start)&&Number(e.start)<=Number(n),o=Number(i)>=Number(t.start)&&Number(i)<=Number(n);return r||o}_addAbsoluteLimits(t){const e=t.locations.reduce(((t,e)=>t.concat(e.fragments)),[]).reduce(((t,e)=>({start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)})),{start:Number.POSITIVE_INFINITY,end:Number.NEGATIVE_INFINITY});t.start=e.start,t.end=e.end}containsOverlap(t){return this._addAbsoluteLimits(Object.assign(t)),xc(this._rowFeatures,(e=>{this._addAbsoluteLimits(Object.assign(e));const n=t.end?t.end:t.start,i=e.end?e.end:e.start;return this._featureOverlap(t,e,n,i)||this._dOverlap(t,e,n,i)}))}addFeature(t){this._rowFeatures.push(t)}}class kc extends wc{constructor(t){super(t),this._rowHeight=0,this._rows=[],this._minHeight=15}init(t){this._features=t,yc(this._features,(t=>{if(!xc(this._rows,(e=>{if(!e.containsOverlap(t))return e.addFeature(t),!0}))){let e=new Cc;e.addFeature(t),this._rows.push(e)}})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)-2*this._padding}getFeatureYPos(t){let e;const n=this._layoutHeight/this._rows.length>this._minHeight?(this._layoutHeight-this._rows.length*this._minHeight)/2:0;return yc(this._rows,((i,r)=>{yc(i._rowFeatures,(i=>{i===t&&(e=r*(this._rowHeight+2*this._padding)+n)}))})),e}getFeatureHeight(){return this._rowHeight}}const Bc={chain:{label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},transit:{label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},init_met:{label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},propep:{label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},peptide:{label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},signal:{label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},helix:{label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},strand:{label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},turn:{label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},disulfid:{label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},crosslnk:{label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},region:{label:"Region",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},coiled:{label:"Coiled coil",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},motif:{label:"Motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},repeat:{label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},ca_bind:{label:"Calcium binding",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},dna_bind:{label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},domain:{label:"Domain",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},zn_fing:{label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},np_bind:{label:"Nucleotide binding",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},metal:{label:"Metal binding",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},site:{label:"Site",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},binding:{label:"Binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},act_site:{label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},mod_res:{label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},lipid:{label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},carbohyd:{label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},compbias:{label:"Compositional bias",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},conflict:{label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},non_cons:{label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},non_ter:{label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},unsure:{label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},non_std:{label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},mutagen:{label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},topo_dom:{label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},transmem:{label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},intramem:{label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},variant:{label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},unique:{label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},non_unique:{label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},antigen:{label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},pdbe_cover:{label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}};class Ic{constructor(t){this._config=t}getShapeByType(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].shape:"rectangle"}getColorByType(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].color:"black"}}const Ec=class extends zo{getLayout(t){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new kc({layoutHeight:this._height}):new wc({layoutHeight:this._height})}set height(t){this._height=t}get height(){return this._height}connectedCallback(){super.connectedCallback(),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this._height=this.getAttribute("height")?parseInt(this.getAttribute("height")):44,this._tooltipEvent=this.getAttribute("tooltip-event")?this.getAttribute("tooltip-event"):"mouseover",this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new Ac,this._layoutObj=this.getLayout(),this._config=new Ic(Bc),this.createTooltip=this.createTooltip.bind(this),this._data&&this._createTrack(),this.addEventListener("load",(t=>{vc(this.children,t.target)&&(this.data=t.detail.payload)}))}normalizeLocations(t){return t.map((t=>{const{locations:e,start:n,end:i}=t;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:i}]}]})}))}set data(t){this._data=this.normalizeLocations(t),this._createTrack()}static get observedAttributes(){return["length","displaystart","displayend","highlightstart","highlightend","color","shape","layout"]}_getFeatureColor(t){return t.color?t.color:this._color?this._color:t.type?this._config.getColorByType(t.type):"black"}_getShape(t){return t.shape?t.shape:this._shape?this._shape:t.type?this._config.getShapeByType(t.type):"rectangle"}_createTrack(){this._layoutObj.init(this._data),Ht(this).selectAll("svg").remove(),this.svg=Ht(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0 ,"+this.margin.top+")"),this._createFeatures(),this.refresh()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(t=>`g_${t.accession}`)).selectAll("g.location-group").data((t=>t.locations.map((e=>Object.assign({},e,{feature:t}))))).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data((t=>t.fragments.map((e=>Object.assign({},e,{feature:t.feature}))))).enter().append("path").attr("class","feature").attr("tooltip-trigger","true").attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t.feature)))).attr("transform",(t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")")).attr("fill",(t=>this._getFeatureColor(t.feature))).attr("stroke",(t=>this._getFeatureColor(t.feature))).on("mouseover",(t=>{var e=this,n=Mt;"mouseover"===this._tooltipEvent&&window.setTimeout((function(){e.createTooltip(n,t)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{var t=this;"mouseover"===this._tooltipEvent&&window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0}))})).on("click",(t=>{"click"===this._tooltipEvent&&this.createTooltip(Mt,t,!0)}))}createTooltip(t,e,n=!1){if(!e.feature||!e.feature.tooltipContent)return;this.removeAllTooltips();const i=document.createElement("protvista-tooltip");i.top=t.clientY+3,i.left=t.clientX+2,i.title=`${e.feature.type} ${e.start}-${e.end}`,i.closeable=n,i.content=e.feature.tooltipContent,this.appendChild(i);const r=this.svg._groups[0][0].clientWidth,o=Ht(i).node().getBoundingClientRect();o.width+o.x>r&&(this.removeChild(i),i.left=r-o.width,i.mirror="H",this.appendChild(i))}removeAllTooltips(){document.querySelectorAll("protvista-tooltip").forEach((t=>t.remove()))}refresh(){this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce(((t,e)=>t.concat(e.locations.reduce(((t,n)=>t.concat(n.fragments.map((t=>Object.assign({},t,{feature:e}))))),[]))),[])),this.features.attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t.feature)))).attr("transform",(t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")")),this._updateHighlight())}_updateHighlight(){Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",this.getXFromSeqPosition(this._highlightstart)).style("opacity",.3).attr("width",this.getSingleBaseWidth()*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}},Sc=function(){customElements.define("protvista-track",Ec)};window.customElements?Sc():document.addEventListener("WebComponentsReady",(function(){Sc()}));const Mc=Ec,Tc=class extends Mc{connectedCallback(){super.connectedCallback()}_createTrack(){this._layoutObj.init(this._data),Ht(this).selectAll("svg").remove(),this.svg=Ht(this).append("div").style("line-height",0).append("svg").style("width","100%").attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("stroke","black").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0,-5)"),this._createFeatures(),this.refresh()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(t=>`g_${t.accession}`)).selectAll("g.location-group").data((t=>t.locations.map((e=>Object.assign({},e,{feature:t}))))).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data((t=>t.fragments.map((e=>Object.assign({},e,{feature:t.feature}))))).enter().append("path").attr("class","feature").attr("tooltip-trigger","true").attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t)))).attr("transform",(t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")")).attr("fill",((t,e)=>{let n=t.feature;return t.feature.color&&(n={color:t.feature.color}),t.feature.locations&&t.feature.locations[0].fragments[e]&&t.feature.locations[0].fragments[e].color&&(n={color:t.feature.locations[0].fragments[e].color}),this._getFeatureColor(n)})).attr("stroke",((t,e)=>{let n=t.feature;t.feature.color&&(n={color:t.feature.color}),t.feature.locations&&t.feature.locations[0].fragments[e]&&t.feature.locations[0].fragments[e].color&&(n={color:t.feature.locations[0].fragments[e].color});let i=this._getFeatureColor(n);return this.colorMixer(-.3,i)})).on("mouseover",((t,e)=>{const n=this,i=Mt,r=document.querySelectorAll("protvista-tooltip");r&&r[0]&&"click-open"==r[0].className||window.setTimeout((function(){n.createTooltip(i,t)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0})),t.trackIndex=e,this.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),this.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))})).on("click",((t,e)=>{t.trackIndex=e,this.createTooltip(Mt,t,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:t,bubbles:!0,cancelable:!0}))}))}_getShape(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:"rectangle"}createTooltip(t,e,n=!1){this.removeAllTooltips();const i=document.createElement("protvista-tooltip");i.left=t.pageX+15,i.top=t.pageY+5,i.style.marginLeft=0,i.style.marginTop=0,i.title=`${e.feature.type} ${e.start}-${e.end}`,e.start==e.end&&(i.title=`${e.feature.type} residue ${e.start}`),i.closeable=n,i.content=e.feature.tooltipContent,e.tooltipContent&&(i.content=e.tooltipContent),"click"==t.type&&i.classList.add("click-open"),document.body.appendChild(i);const r=Ht(i).node(),o=r.getBoundingClientRect(),a=window.innerHeight-t.clientY,s=window.innerWidth-t.clientX;a<130&&(r.style.top=t.pageY-(o.height+20)+"px"),s<300&&(r.style.left="",r.style.right=s-10+"px")}colorMixer(t,e,n,i){let r,o,a,s,l,c,h,u=parseInt,p=Math.round,d="string"==typeof n;return"number"!=typeof t||t<-1||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||n&&!d?null:(this.pSBCr||(this.pSBCr=t=>{let e=t.length,n={};if(e>9){if([r,o,a,d]=t=t.split(","),e=t.length,e<3||e>4)return null;n.r=u("a"==r[3]?r.slice(5):r.slice(4)),n.g=u(o),n.b=u(a),n.a=d?parseFloat(d):-1}else{if(8==e||6==e||e<4)return null;e<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+t[4]:"")),t=u(t.slice(1),16),9==e||5==e?(n.r=t>>24&255,n.g=t>>16&255,n.b=t>>8&255,n.a=p((255&t)/.255)/1e3):(n.r=t>>16,n.g=t>>8&255,n.b=255&t,n.a=-1)}return n}),h=e.length>9,h=d?n.length>9||"c"==n&&!h:h,l=this.pSBCr(e),s=t<0,c=n&&"c"!=n?this.pSBCr(n):s?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},s=1-(t=s?-1*t:t),l&&c?(i?(r=p(s*l.r+t*c.r),o=p(s*l.g+t*c.g),a=p(s*l.b+t*c.b)):(r=p((s*l.r**2+t*c.r**2)**.5),o=p((s*l.g**2+t*c.g**2)**.5),a=p((s*l.b**2+t*c.b**2)**.5)),d=l.a,c=c.a,l=d>=0||c>=0,d=l?d<0?c:c<0?d:d*s+c*t:0,h?"rgb"+(l?"a(":"(")+r+","+o+","+a+(l?","+p(1e3*d)/1e3:"")+")":"#"+(4294967296+16777216*r+65536*o+256*a+(l?p(255*d):0)).toString(16).slice(1,l?void 0:-2)):null)}},Lc=class extends Tc{constructor(){super()}connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||44}set data(t){this._data=this._accession&&"null"!==this._accession?t[this._accession].data:t,this._createTrack()}getFeatureShape(t,e,n){return"M0,"+t+"L0,"+(t-n)+"L"+e+","+(t-n)+"L"+e+","+t+"Z"}_createFeatures(){this._yScale=Ar().domain([0,10]).range([0,30]),this.getSingleBaseWidth(),this.featuresG=this.seq_g.selectAll("g.location-group").data(this._data),this.locations=this.featuresG.enter().filter((t=>t.conservation_score>0)).append("g").attr("class","location-group"),this.locations.append("path").attr("class","feature").attr("tooltip-trigger","true").attr("id",(t=>"hsc_"+t.start)).attr("fill","rgb(128, 128, 128)").on("mouseover",(t=>{const e=this,n=Mt,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"===i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Sequence conservation"}};e.createTooltip(n,i)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),t.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),t.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))})).on("click",(t=>{const e={start:t.start,end:t.end,feature:{...t,type:"Sequence conservation"}};this.createTooltip(Mt,e,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:e,bubbles:!0,cancelable:!0}))}))}refresh(){if(this.xScale&&this.seq_g){let t=this.getSingleBaseWidth();this.features=this.seq_g.selectAll("path.feature").data(this._data.filter((t=>t.conservation_score>0))),this.features.attr("d",(e=>this.getFeatureShape(this._height,t,this._yScale(e.conservation_score)))).attr("transform",(t=>"translate("+this.getXFromSeqPosition(t.start)+",0)")).attr("fill","rgb(128, 128, 128)"),this._updateHighlight()}}},qc=class extends Tc{constructor(){super()}connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||430,document.addEventListener("sc-change",(t=>{this.filterData(t.detail.type)}))}set data(t){this._data=this._accession&&"null"!==this._accession?t[this._accession].data:t,this._createTrack()}_createTrack(){this._layoutObj.init(this._data),Ht(this).selectAll("svg").remove(),this.svg=Ht(this).append("div").append("svg").style("width","100%").attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0,-5)"),this.filterData("property"),this._createFeatures(),this.refresh()}_createFeatures(){this._yScale=Ar().domain([0,1]).range([0,400]),this._data.forEach((t=>{let e=20;t.amino.forEach((t=>{t.ypos=e,e+=this._yScale(t.probability)}))}))}refresh(){this.xScale&&this.seq_g&&(this.svg.selectAll("foreignObject").remove(),this.seq_g.selectAll("g.location-group").remove(),this.getSingleBaseWidth()<9.4?(this.foreign=this.svg.append("foreignObject").attr("width","100%").attr("height",this._height),this.commentdiv=this.foreign.append("xhtml:div").attr("class","zoomout").attr("style","text-align: center; height: "+this._height+"px"),this.span=this.commentdiv.append("span").attr("style","line-height:"+this._height+"px"),this.span.append("i").attr("class","icon icon-functional").attr("data-icon","3"),this.span.append("text").text("Please zoom in (until 150 or fewer residues are shown) to see the probabilities")):(this.featuresG=this.seq_g.selectAll("g.location-group").data(this._data),this.svg.attr("height",this._height),this.locations=this.featuresG.enter().filter((t=>t.start>this._displaystart-3&&t.start<this._displayend+3)).append("g").attr("class","location-group").attr("height",this._height),this.aminorect=this.locations.selectAll(".aminogroup").data((t=>t.amino)).enter().filter((t=>t.probability>0)).append("g").attr("class","aminogroup").append("rect").attr("class","rectamino").style("fill",(t=>t.color)).attr("y",(t=>t.ypos)).attr("height",(t=>this._yScale(t.probability))).attr("width",this.getSingleBaseWidth()).style("stroke-width","0.5").style("stroke","rgb(211,211,211)").attr("x",(t=>this.getXFromSeqPosition(t.start))),this.locations.selectAll(".aminogroup").append("text").attr("class","textamino").attr("y",(t=>t.ypos+(this._yScale(t.probability)/2+5))).attr("color","black").text((t=>t.oneLetterCode)).attr("text-anchor","middle").attr("x",(t=>this.getXFromSeqPosition(t.start)+this.getSingleBaseWidth()/2)).attr("font-size",(t=>this.adaptLabelFontSize(this.getSingleBaseWidth(),this._yScale(t.probability)))),this.locations.on("mouseover",(t=>{this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0}))})),this.aminorect.attr("tooltip-trigger","true").on("mouseover",(t=>{const e=this,n=Mt,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"==i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Amino acid probability"}};e.createTooltip(n,i)}),50),this.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))})).on("click",(t=>{const e={start:t.start,end:t.start,feature:{...t,type:"Sequence conservation"}};this.createTooltip(Mt,e,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:e,bubbles:!0,cancelable:!0}))}))),this._updateHighlight())}adaptLabelFontSize(t,e){return 9.4>t||9.4>e?"0em":"10px"}filterData(t){"probability"==t?this._data.forEach((t=>{t.amino=t.amino.sort((function(t,e){return e.probability-t.probability}))})):this._data.forEach((t=>{t.amino=t.amino.sort((function(t,e){return t.color.localeCompare(e.color)}))})),this._createFeatures(),this.refresh()}disconnectedCallback(){super.disconnectedCallback(),this.manager&&this.manager.unregister(this),document.removeEventListener("sc-change")}},Nc=class extends Tc{constructor(){super(),this._line=function(){var t=qr,e=Nr,n=Mr(!0),i=null,r=Lr,o=null;function a(a){var s,l,c,h=a.length,u=!1;for(null==i&&(o=r(c=Sr())),s=0;s<=h;++s)!(s<h&&n(l=a[s],s,a))===u&&((u=!u)?o.lineStart():o.lineEnd()),u&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:Mr(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Mr(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Mr(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),a):i},a}().x((t=>this.xScale(t.x))).y((t=>this._yScale(t.y)))}init(){this._totals_dataset={},this._totals_feature=void 0,this._disease_dataset={},this._disease_feature=void 0}connectedCallback(){super.connectedCallback(),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||40,this._yScale=Ar(),this._xExtent,this._yExtent,this.init()}set data(t){if(this._data=t,this.init(),this._data.variants.length<=0)return;let e={},n={};this._data.variants.forEach((t=>{void 0===e[t.start]&&(e[t.start]=0),void 0===n[t.start]&&(n[t.start]=0),e[t.start]++,void 0!==t.association&&t.association.forEach((e=>{!0===e.disease&&n[t.start]++}))})),this._totals_dataset=Object.keys(e).map((t=>({x:t,y:e[t]}))),this._disease_dataset=Object.keys(n).map((t=>({x:t,y:n[t]}))),this._createTrack()}_createTrack(){Ht(this).selectAll("svg").remove(),this.svg=Ht(this).append("svg").style("width","100%").attr("height",50),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("stroke","black").attr("height",50),this._createFeatures(),this.refresh()}_createFeatures(){this._xExtent=c(this._totals_dataset,(t=>parseInt(t.x))),this._yExtent=c(this._totals_dataset,(t=>t.y)),this._yExtent[1]+=2,this.xScale.domain(this._xExtent).range([0,this._width]),this._yScale.domain(this._yExtent).range([this._height,0])}refresh(){this.svg&&(this.svg.selectAll("path").remove(),this._disease_feature=this.svg.append("path").attr("d",this._line(this._disease_dataset)).attr("fill","none").attr("stroke","red").attr("stroke-width","1.5px").attr("stroke-dasharray","0").attr("transform","translate(0,0)"),this._totals_feature=this.svg.append("path").attr("d",this._line(this._totals_dataset)).attr("fill","none").attr("stroke","darkgrey").attr("stroke-width","1px").attr("stroke-dasharray",".5").attr("transform","translate(0,0)"),this._updateHighlight())}};var Pc=i(893),jc={};jc.styleTagTransform=Zl(),jc.setAttributes=Wl(),jc.insert=Dl().bind(null,"head"),jc.domAPI=Fl(),jc.insertStyleElement=Vl(),zl()(Pc.Z,jc),Pc.Z&&Pc.Z.locals&&Pc.Z.locals;var zc=Object.prototype.hasOwnProperty;const Rc=function(t,e,n){var i=t[e];zc.call(t,e)&&ts(i,n)&&(void 0!==n||e in t)||ga(t,e,n)},Fc=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),r?ga(n,s,l):Rc(n,s,l)}return n};var $c=Object.prototype.hasOwnProperty;const Dc=function(t){if(!Ko(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Va(t),n=[];for(var i in t)("constructor"!=i||!e&&$c.call(t,i))&&n.push(i);return n},Oc=function(t){return Ya(t)?Wa(t,!0):Dc(t)};var Wc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hc=Wc&&"object"==typeof module&&module&&!module.nodeType&&module,Vc=Hc&&Hc.exports===Wc?Ho.Buffer:void 0,Uc=Vc?Vc.allocUnsafe:void 0;const Zc=Ua(Object.getPrototypeOf,Object);var Xc=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Bs(e,Ls(t)),t=Zc(t);return e}:Es;const Yc=Xc,Gc=function(t){return Is(t,Oc,Yc)};var Qc=Object.prototype.hasOwnProperty;const Jc=function(t){var e=new t.constructor(t.byteLength);return new _s(e).set(new _s(t)),e};var Kc=/\w*$/;var th=Vo?Vo.prototype:void 0,eh=th?th.valueOf:void 0;const nh=function(t,e,n){var i,r=t.constructor;switch(e){case"[object ArrayBuffer]":return Jc(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?Jc(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?Jc(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,Kc.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return i=t,eh?Object(eh.call(i)):{}}};var ih=Object.create,rh=function(){function t(){}return function(e){if(!Ko(e))return{};if(ih)return ih(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const oh=rh;var ah=Fa&&Fa.isMap;const sh=ah?Pa(ah):function(t){return ma(t)&&"[object Map]"==Gs(t)};var lh=Fa&&Fa.isSet;const ch=lh?Pa(lh):function(t){return ma(t)&&"[object Set]"==Gs(t)};var hh="[object Arguments]",uh="[object Function]",ph={};ph[hh]=ph["[object Array]"]=ph["[object ArrayBuffer]"]=ph["[object DataView]"]=ph["[object Boolean]"]=ph["[object Date]"]=ph["[object Float32Array]"]=ph["[object Float64Array]"]=ph["[object Int8Array]"]=ph["[object Int16Array]"]=ph["[object Int32Array]"]=ph["[object Map]"]=ph["[object Number]"]=ph["[object Object]"]=ph["[object RegExp]"]=ph["[object Set]"]=ph["[object String]"]=ph["[object Symbol]"]=ph["[object Uint8Array]"]=ph["[object Uint8ClampedArray]"]=ph["[object Uint16Array]"]=ph["[object Uint32Array]"]=!0,ph["[object Error]"]=ph[uh]=ph["[object WeakMap]"]=!1;const dh=function t(e,n,i,r,o,a){var s,l=1&n,c=2&n,h=4&n;if(i&&(s=o?i(e,r,o,a):i(e)),void 0!==s)return s;if(!Ko(e))return e;var u=Ba(e);if(u){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Qc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(e,s)}else{var p=Gs(e),d=p==uh||"[object GeneratorFunction]"==p;if(Ma(e))return function(t,e){if(e)return t.slice();var n=t.length,i=Uc?Uc(n):new t.constructor(n);return t.copy(i),i}(e,l);if("[object Object]"==p||p==hh||d&&!o){if(s=c||d?{}:function(t){return"function"!=typeof t.constructor||Va(t)?{}:oh(Zc(t))}(e),!l)return c?function(t,e){return Fc(t,Yc(t),e)}(e,function(t,e){return t&&Fc(e,Oc(e),t)}(s,e)):function(t,e){return Fc(t,Ls(t),e)}(e,function(t,e){return t&&Fc(e,Ga(e),t)}(s,e))}else{if(!ph[p])return o?e:{};s=nh(e,p,l)}}a||(a=new gs);var f=a.get(e);if(f)return f;a.set(e,s),ch(e)?e.forEach((function(r){s.add(t(r,n,i,r,e,a))})):sh(e)&&e.forEach((function(r,o){s.set(o,t(r,n,i,o,e,a))}));var g=u?void 0:(h?c?Gc:qs:c?Oc:Ga)(e);return bc(g||e,(function(r,o){g&&(r=e[o=r]),Rc(s,o,t(r,n,i,o,e,a))})),s};var fh=Vo?Vo.isConcatSpreadable:void 0;const gh=function(t){return Ba(t)||ka(t)||!!(fh&&t&&t[fh])},vh=function t(e,n,i,r,o){var a=-1,s=e.length;for(i||(i=gh),o||(o=[]);++a<s;){var l=e[a];n>0&&i(l)?n>1?t(l,n-1,i,r,o):Bs(o,l):r||(o[o.length]=l)}return o},Ah=function(t){return null!=t&&t.length?vh(t,1):[]},bh=function(t,e){return!(null==t||!t.length)&&oc(t,e,0)>-1},mh=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1};const yh=zs&&1/ws(new zs([,-0]))[1]==1/0?function(t){return new zs(t)}:function(){},_h=function(t,e){return t&&t.length?function(t,e,n){var i=-1,r=bh,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=mh;else if(o>=200){var c=e?null:yh(t);if(c)return ws(c);a=!1,r=ms,l=new As}else l=e?[]:s;t:for(;++i<o;){var h=t[i],u=e?e(h):h;if(h=n||0!==h?h:0,a&&u==u){for(var p=l.length;p--;)if(l[p]===u)continue t;e&&l.push(u),s.push(h)}else r(l,u,n)||(l!==s&&l.push(u),s.push(h))}return s}(t,Ml(e)):[]};var xh=Math.min;const wh=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Ch=Math.max;const kh=function(t){return function(){return t}};var Bh=fa?function(t,e){return fa(t,"toString",{configurable:!0,enumerable:!1,value:kh(e),writable:!0})}:El;const Ih=Bh;var Eh=Date.now;const Sh=(Mh=Ih,Th=0,Lh=0,function(){var t=Eh(),e=16-(t-Lh);if(Lh=t,e>0){if(++Th>=800)return arguments[0]}else Th=0;return Mh.apply(void 0,arguments)});var Mh,Th,Lh;const qh=function(t){return function(t){return ma(t)&&Ya(t)}(t)?t:[]},Nh=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},Ph=function(t,e){return Sh(function(t,e,n){return e=Ch(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Ch(i.length-e,0),a=Array(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=i[r];return s[e]=n(a),wh(t,this,s)}}(t,e,El),t+"")}((function(t){var e=Nh(t),n=Al(t,qh);return e===Nh(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?function(t,e,n){for(var i=n?mh:bh,r=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,c=[];a--;){var h=t[a];a&&e&&(h=Al(h,Pa(e))),l=xh(h.length,l),s[a]=!n&&(e||r>=120&&h.length>=120)?new As(a&&h):void 0}h=t[0];var u=-1,p=s[0];t:for(;++u<r&&c.length<l;){var d=h[u],f=e?e(d):d;if(d=n||0!==d?d:0,!(p?ms(p,f):i(c,f,n))){for(a=o;--a;){var g=s[a];if(!(g?ms(g,f):i(t[a],f,n)))continue t}p&&p.push(f),c.push(d)}}return c}(n,Ml(e)):[]})),jh={disease:"likely_disease",predicted:"predicted",nonDisease:"likely_benign",uncertain:"uncertain",UniProt:"uniprot_reviewed",ClinVar:"clinvar_reviewed",LSS:"large_scale_studies",FoldX:"foldx",PDB:"pdb",missense3d:"missense3d"},zh=(t,e)=>((t,e=[])=>{const n=function(t){return dh(t,5)}(e)||[],i=jh[t];return n.filter((t=>t.keywords&&t.keywords.indexOf(i)>-1))})(t,e),Rh=(t,e,n,i)=>{const{sequence:r,variants:o}=i;if(!(n=n.trim()))return{sequence:r,variants:o};const a=n.split(","),s=Pl(a,(t=>t.split(":")[0]));let l=[];return function(t,e){t&&Qa(t,mc(e))}(s,(t=>{const e=((t,e,n)=>_h(Ah(e.map((t=>t.split(":")[1])).map((e=>zh(e,t)))),(t=>t.accession)))(o,t);l.push(e)})),l=Ah(Ph(...l,(t=>t.accession))),l=_h(l,"accession"),{sequence:r,variants:l}},Fh=[{name:"disease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely disease"],colors:["#990000"]}},{name:"predicted",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Predicted deleterious","Predicted benign"],colors:["#002594","#8FE3FF"]}},{name:"nonDisease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely benign"],colors:["#99cc00"]}},{name:"uncertain",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Uncertain"],colors:["#009e73"]}},{name:"UniProt",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["UniProt reviewed"],colors:["#e5e5e5"]}},{name:"ClinVar",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["ClinVar reviewed"],colors:["#e5e5e5"]}},{name:"LSS",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Large scale studies"],colors:["#e5e5e5"]}},{name:"FoldX",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["FoldX analysis"],colors:["#e5e5e5"]}},{name:"missense3d",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Missense3D"],colors:["#e5e5e5"]}},{name:"PDB",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Observed in PDB"],colors:["#e5e5e5"]}}],$h=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],Dh=class extends Tc{connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._height=parseInt(this.getAttribute("height"))?parseInt(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Ar(),this._yScale=function(){return rr(ir.apply(null,arguments).paddingInner(1))}().domain($h).range([0,this._height-this.margin.top-this.margin.bottom])}static get observedAttributes(){return super.observedAttributes.concat("activefilters")}attributeChangedCallback(t,e,n){if(e!==n&&"activefilters"==t)this.data=Rh(0,0,n,this._completeDataSet);else if(super.attributeChangedCallback(t,e,n),!super.svg)return}_fireEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}))}set data(t){void 0===this._completeDataSet&&(this._completeDataSet=t),this._data=function(t){const{variants:e,sequence:n}=t;if(!n||!e)return;const i=[],r=n.split("");for(let t in r)i.push({type:"VARIANT",normal:r[t],pos:t+1,variants:[]});return e.forEach((t=>{i[t.start-1]&&i[t.start-1].variants.push(t)})),i}(t),this._createTrack()}_createTrack(){this._layoutObj.init(this._data),Ht(this).selectAll("svg").remove(),this.svg=Ht(this).append("div").style("line-height",0).append("svg").style("width","100%").attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("stroke","black").attr("height",this._height).attr("transform","translate(1.5,0)"),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(1.5,30)"),this._createFeatures(),this.refresh()}_createFeatures(){this._variationPlot=new class{constructor(){this._frequency=xr().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}drawVariationPlot(t,e){const n=e.getSingleBaseWidth()/2;t.each(((t,i,r)=>{const o=Ht(r[i]),a=t.filter((t=>0!==t.variants.length)),s=o.selectAll("g").data(a,(t=>t.pos));s.exit().remove();const l=s.enter().append("g").merge(s).selectAll("circle").data((t=>t.variants));l.exit().remove(),l.enter().append("circle").merge(l).attr("class",(function(t){})).attr("title",(t=>t.start)).attr("r",(t=>t.size?t.size:5)).attr("cx",(t=>e.getXFromSeqPosition(t.start)+n)).attr("cy",(t=>e._yScale(t.variant.charAt(0)))).attr("name",(t=>{let e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_"+t.wildType+t.start+e,t.internalId})).attr("fill",(t=>t.color)).attr("tooltip-trigger","true").on("mouseover",(t=>{const n=Mt,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"==i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Variant"}};e.createTooltip(n,i)}),50),e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))})).on("mouseout",(()=>{const t=document.querySelectorAll("protvista-tooltip");t&&t[0]&&"click-open"==t[0].className||window.setTimeout((function(){e.removeAllTooltips()}),50),e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))})).on("click",(t=>{const n={start:t.start,end:t.end,feature:{...t,type:"Variant"}};e.createTooltip(Mt,n,!0),e.dispatchEvent(new CustomEvent("protvista-click",{detail:n,bubbles:!0,cancelable:!0}))}))}))}};const t=super.svg.select("g.sequence-features");this._axisLeft=t.append("g"),this._axisRight=t.append("g");const e=t.append("g").attr("clip-path","url(#plotAreaClip)");let n=this.getWidthWithMargins();if(0==n)try{n=this.parentElement.parentElement.parentElement.previousElementSibling.lastElementChild.clientWidth}catch(t){}this._clipPath=t.append("clipPath").attr("id","plotAreaClip").append("rect").attr("width","100%").attr("height",this._height).attr("transform",`translate(0, -${this.margin.top})`),this._series=e.datum(this._data),this.updateScale()}refresh(){this._series&&(this._clipPath.style("width","100%"),this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}updateScale(){this._yAxisLScale=C(4,undefined).scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=C(2,void 0).scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform",`translate(${this.margin.left},0)`).call(this._yAxisLScale),this._axisRight.attr("transform",`translate(${this.getWidthWithMargins()-this.margin.right+10}, 0)`).attr("class","variation-y-right axis").call(this._yAxisRScale)}updateData(t){this._series&&this._series.datum(t)}reset(){}};class Oh extends HTMLElement{constructor(){super(),this._top=parseInt(this.getAttribute("top")),this._left=parseInt(this.getAttribute("left")),this._content=this.getAttribute("content"),this._title=this.getAttribute("title"),this._mirror=void 0}set top(t){this._top=t}get top(){return this._top}set left(t){this._left=t}get left(){return this._left}set content(t){this._content=t}get content(){return this._content}set title(t){this._title=t}get title(){return this._title}set closeable(t){t?this.setAttribute("closeable",""):this.removeAttribute("closeable")}get closeable(){return this.hasAttribute("closeable")}get mirror(){return this._mirror}set mirror(t){this.setAttribute("mirror",t)}static get observedAttributes(){return["top","left","mirror"]}attributeChangedCallback(t,e,n){e!=n&&("top"===t||"left"===t?(this[`_${t}`]=this.getAttribute(t),this._updatePosition()):this.render())}connectedCallback(){this.render(),document.getElementsByTagName("body")[0].addEventListener("click",(t=>{this.hasTooltipParent(t.target)&&!t.target.classList.contains("tooltip-close")||null!==t.target.getAttribute("tooltip-trigger")||this.remove()}))}hasTooltipParent(t){return!(!t.parentElement||"body"===t.parentElement.tagName)&&("PROTVISTA-TOOLTIP"===t.parentElement.tagName||this.hasTooltipParent(t.parentElement))}_updatePosition(){this.top=`${this._top}px`,this.left=`${this._left}px`}render(){this._updatePosition(),void 0!==this.mirror&&(this.mirror=this.mirror);let t=`<div class="tooltip-header"><span class="tooltip-header-title">${this._title}</span>`;this.closeable&&(t=`${t}<span class="tooltip-close" style="float:right"></span>`),t=`${t}</div><div class="tooltip-body">${this._content}</div>`,this.innerHTML=t}}const Wh=Oh;var Hh=i(816),Vh={};Vh.styleTagTransform=Zl(),Vh.setAttributes=Wl(),Vh.insert=Dl().bind(null,"head"),Vh.domAPI=Fl(),Vh.insertStyleElement=Vl(),zl()(Hh.Z,Vh),Hh.Z&&Hh.Z.locals&&Hh.Z.locals;const{html:Uh}=i(985),{html:Zh}=i(985),Xh=new WeakMap,Yh=new WeakMap,Gh=(0,Do.directive)((t=>e=>{if(!(e instanceof Do.AttributePart)||e instanceof Do.PropertyPart||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");Yh.has(e)||(e.committer.element.style.cssText=e.committer.strings.join(" "),Yh.set(e,!0));const n=e.committer.element.style,i=Xh.get(e);for(const e in i)e in t||(-1===e.indexOf("-")?n[e]=null:n.removeProperty(e));for(const e in t)-1===e.indexOf("-")?n[e]=t[e]:n.setProperty(e,t[e]);Xh.set(e,t)})),{html:Qh}=i(985),{html:Jh}=i(985),{html:Kh}=i(985),{html:tu}=i(985);class eu extends HTMLElement{constructor(){super(),this.viewerData={displayNavigation:!0,displaySequence:!0,displayConservation:!1,displayVariants:!1,sequence:void 0,length:void 0,tracks:[],legends:{alignment:"right",data:{}}},this.layoutHelper=new class{constructor(t){this.ctx=t}postProcessLayout(){this.getScrollbarWidth();let t=this.ctx.querySelectorAll(".pvNavSection")[0];t&&(t.style.paddingRight=this.ctx.scrollbarWidth+"px",setTimeout((()=>{let t=this.ctx.querySelectorAll("protvista-navigation")[0];t&&(t.firstElementChild.firstElementChild.style.width="100%")}),100));let e=this.ctx.querySelectorAll(".pvSeqSection")[0];e&&(e.style.paddingRight=this.ctx.scrollbarWidth+"px",setTimeout((()=>{let t=this.ctx.querySelectorAll("protvista-sequence")[0];t&&(t.firstElementChild.firstElementChild.style.width="100%")}),100));let n=this.ctx.querySelectorAll(".pvLineGraphSection")[0];if(n&&(n.style.paddingRight=this.ctx.scrollbarWidth+"px"),this.bindTrackData("track",void 0,this.ctx.scrollbarWidth),this.ctx.viewerData.displayVariants)if(this.ctx.viewerData.variants){const t={key:"variationOption",index:this.ctx.viewerData.tracks.length+1,label:"Variation"};this.addDynamicTrackSection(this.ctx.viewerData.variants,".pvVariantGraphRow",".pvVariantGraphSection",".pvVariantPlotSection",t)}else this.ctx.dataHelper.getPDBeApiDataByName("variation").then((t=>{const e={key:"variationOption",index:this.ctx.viewerData.tracks.length+1,label:"Variation"};this.addDynamicTrackSection(t,".pvVariantGraphRow",".pvVariantGraphSection",".pvVariantPlotSection",e)}));if(this.ctx.viewerData.displayConservation)if(this.ctx.viewerData.sequenceConservation){const t={key:"scOption",index:this.ctx.viewerData.tracks.length,label:"Sequence conservation"};this.addDynamicTrackSection(this.ctx.viewerData.sequenceConservation,".pvConsHistoRow",".pvConservationHistoSection",".pvConservationPlotSection",t,!0)}else this.ctx.dataHelper.getPDBeApiDataByName("sequence_conservation").then((t=>{const e={key:"scOption",index:this.ctx.viewerData.tracks.length,label:"Sequence conservation"};this.addDynamicTrackSection(t,".pvConsHistoRow",".pvConservationHistoSection",".pvConservationPlotSection",e,!0)}));this.ctx.subscribeEvents&&this.addEventSubscription()}addDynamicTrackSection(t,e,n,i,r,o){if(t&&Object.keys(t).length>0){this.ctx.querySelector(e).style.display="table";let a=this.ctx.querySelectorAll(n)[0];a&&(a.style.paddingRight=this.ctx.scrollbarWidth+"px",o&&(a.style.borderBottom="1px solid lightgrey"),a.firstElementChild.data=t);let s=this.ctx.querySelectorAll(i)[0];s&&(s.style.paddingRight=this.ctx.scrollbarWidth+"px",o&&(s.style.borderBottom="1px solid lightgrey"),s.firstElementChild.data=t),this.addHideOptions(r.key,r.index,r.label)}}getScrollbarWidth(){let t=this.ctx.querySelectorAll(".divWithScroll")[0],e=this.ctx.querySelectorAll(".divWithoutScroll")[0];this.ctx.scrollbarWidth=e.clientWidth-t.clientWidth,t.remove(),e.remove()}getTrackLayout(t){return t?"overlapping":"non-overlapping"}getTrackHeight(t,e){return t>1?60:44}showSubtracks(t){let e=this.ctx.querySelectorAll(".pvSubtracks_"+t)[0],n=this.ctx.querySelectorAll(".pvTracks_"+t)[0];n.classList.contains("expanded")?(e.style.display="none",n.querySelectorAll(".pvTrack")[0].style.display="block",n.classList.remove("expanded")):(n.querySelectorAll(".pvTrack")[0].style.display="none",e.style.display="block",-1==this.ctx.formattedSubTracks.indexOf(t)&&(this.bindTrackData("subtrack",t,this.ctx.scrollbarWidth),this.ctx.formattedSubTracks.push(t)),n.classList.add("expanded"))}hideSubtracks(t){this.ctx.querySelectorAll(".pvSubtracks_"+t)[0].style.display="none",this.ctx.querySelectorAll(".pvTracks_"+t)[0].style.display="table"}addHideOptions(t,e,n){let i=this.ctx.querySelector("."+t);i.innerHTML=`<tr>\n            <td style="width:10%;vertical-align:top;"><input type="checkbox" class="pvSectionChkBox" name="cb_${e}" style="margin:0" /></td>\n            <td style="padding-bottom:5px;">${n}</td>\n        </tr>`,i.style.display="table-row"}handleExtEvents(t){if(void 0!==t.eventData&&void 0!==t.eventData.residueNumber){let e={start:t.eventData.residueNumber,end:t.eventData.residueNumber,highlight:!0};this.resetZoom(e)}}bindTrackData(t,e,n){let i=".pvTrack";"subtrack"==t&&(i=".pvSubtrack_"+e);let r=this.ctx.querySelectorAll(i);r&&r.length>0&&r.forEach(((i,r)=>{let o=this.ctx.viewerData.tracks[r],a=".pvTrackLabel_"+r;"subtrack"==t&&(a=".pvSubtrackLabel_"+e+"_"+r,o=this.ctx.viewerData.tracks[e].data[r]);let s=this.getLabel(o.labelType,o.label);this.ctx.querySelectorAll(a)[0].innerHTML=s;let l=o.data;"subtrack"==t&&(l=[o]),i.data=l,"subtrack"==t&&this.ctx.viewerData.tracks[e].data.length>4?i.parentNode.style.paddingRight="0px":i.parentNode.style.paddingRight=n+"px","track"==t&&0==r&&(this.ctx.querySelectorAll(".pvTracks_0")[0].classList.add("expanded"),this.ctx.querySelectorAll(".pvTracks_0")[0].querySelectorAll(".pvTrack")[0].style.display="none",this.ctx.querySelectorAll(".pvSubtracks_0")[0].style.display="block",this.bindTrackData("subtrack",0,n),this.ctx.formattedSubTracks.push(r))}))}getLabel(t,e){if("pdbIcons"!==t)return e;{let t={experiments:{class:"icon icon-generic",dataIcon:";"},complex:{class:"icon icon-conceptual",dataIcon:"y"},nucleicAcids:{class:"icon icon-conceptual",dataIcon:"d"},ligands:{class:"icon icon-conceptual",dataIcon:"b"},literature:{class:"icon icon-generic",dataIcon:"P"}},n=[];return n.push('<strong><a class="pdbIconsId" href="'+e.url+'" target="_blank">'+e.id+'</a></strong><span class="pdbIconsWrapper">'),e.icons.forEach((e=>{e.type;let i='<span class="pdbIconslogo" style="background-color:'+e.background+'" title="'+e.tooltipContent+'" ><i class="'+t[e.type].class+'" data-icon="'+t[e.type].dataIcon+'" style="color: #fff;"></i></span>';void 0!==e.url&&""!=e.url&&(i='<a class="pdbIconslogoA" href="'+e.url+'" target="_blank">'+i+"</a>"),n.push(i)})),e.resolution&&n.push('<strong style="color:#555">'+e.resolution+"&Aring;</strong></span>"),n.join(" ")}}resetSection(t){this.ctx.querySelector(`.pvResetSection_${t}`).style.display="none",this.ctx.hiddenSubtracks[t].forEach((e=>{this.ctx.querySelector(`.pvSubtrackRow_${t}_${e}`).style.display="table"})),delete this.ctx.hiddenSubtracks[t]}hideSection(t){let e=this.ctx.viewerData.tracks.length,n=[];t<e?n.push(`.pvTracks_${t}`,`.pvSubtracks_${t}`):t==e?n.push(".pvConsHistoRow",".pvConservationPlotRow"):n.push(".pvVariantGraphRow",".pvVariantPlotRow");for(let t of n){let e=this.ctx.querySelector(t);e&&(e.style.display="none")}this.ctx.hiddenSections.push(t)}showSection(t){let e=this.ctx.viewerData.tracks.length;if(t<e){let e=this.ctx.querySelector(`.pvTracks_${t}`);if(e.style.display="table",e.classList.contains("expanded")){let e=this.ctx.querySelector(`.pvSubtracks_${t}`);e.style.display="block",void 0!==this.ctx.hiddenSubtracks[t]&&this.ctx.hiddenSubtracks[t].length==e.children.length&&this.resetSection(t)}}else if(t==e){let t=this.ctx.querySelector(".pvConsHistoRow");if(t&&(t.style.display="table"),t.classList.contains("expanded")){let t=this.ctx.querySelector(".pvConservationPlotRow");t&&(t.style.display="block")}}else{let t=this.ctx.querySelector(".pvVariantGraphRow");if(t&&(t.style.display="table"),t.classList.contains("expanded")){let t=this.ctx.querySelector(".pvVariantPlotRow");t&&(t.style.display="block")}}this.ctx.hiddenSections.splice(this.ctx.hiddenSections.indexOf(t),1)}hideSubTrack(t,e){void 0===this.ctx.hiddenSubtracks[t]?this.ctx.hiddenSubtracks[t]=[e]:this.ctx.hiddenSubtracks[t].push(e),this.ctx.querySelector(`.pvSubtrackRow_${t}_${e}`).style.display="none",this.ctx.querySelector(`.pvResetSection_${t}`).style.display="inline-block",this.ctx.hiddenSubtracks[t].length==this.ctx.viewerData.tracks[t].data.length&&this.hideSection(t)}resetZoom(t){let e=null,n=null,i=this.ctx.querySelectorAll(".pvTrack")[0];if(i){if(void 0===t)e=i.getAttribute("displaystart"),n=i.getAttribute("displayend");else if(void 0!==t.trackData){if(t.trackData.start&&t.trackData.end)e=t.trackData.start,n=t.trackData.end;else if(t.trackData.locations&&t.trackData.locations.length>0){e=t.trackData.locations[0].fragments[0].start;let i=t.trackData.locations.length-1,r=t.trackData.locations[i].fragments.length-1;n=t.trackData.locations[i].fragments[r].end}}else e=t.start,n=t.end;t&&null==t.start&&null==t.end||(null==e&&(e="1"),null==n&&(n=this.ctx.viewerData.length)),void 0!==t&&void 0!==t.highlight&&t.highlight?i.dispatchEvent(new CustomEvent("change",{detail:{highlightstart:e,highlightend:n},bubbles:!0,cancelable:!0})):(i.dispatchEvent(new CustomEvent("change",{detail:{displaystart:e,displayend:n},bubbles:!0,cancelable:!0})),i.dispatchEvent(new CustomEvent("change",{detail:{highlightstart:null,highlightend:null},bubbles:!0,cancelable:!0})))}}zoomTrack(t,e){""!=this.ctx.zoomedTrack&&this.ctx.querySelector(".pvZoomIcon_"+this.ctx.zoomedTrack).classList.remove("active"),this.ctx.zoomedTrack!=e?(this.ctx.querySelector(".pvZoomIcon_"+e).classList.add("active"),this.ctx.zoomedTrack=e,this.resetZoom(t)):(this.ctx.zoomedTrack="",this.resetZoom({start:1,end:null}))}resetView(){this.ctx.querySelector(".settingsMenu").style.display="none",this.ctx.querySelector(".rangeMenu").style.display="none",""!=this.ctx.zoomedTrack&&this.ctx.querySelector(".pvZoomIcon_"+this.ctx.zoomedTrack).classList.remove("active"),this.ctx.zoomedTrack="",this.resetZoom({start:1,end:null}),this.ctx.querySelectorAll(".expanded").forEach((t=>{t.classList.remove("expanded");let e=t.querySelector(".pvTrack");e&&(e.style.display="block")}));let t=this.ctx.querySelector(".pvTracks_0");t.style.display="table",t.classList.contains("expanded")||t.classList.add("expanded"),t.querySelector(".pvTrack").style.display="none",this.ctx.querySelectorAll(".protvistaRowGroup").forEach(((t,e)=>{t.style.display="none",void 0!==this.ctx.hiddenSubtracks[e]&&this.resetSection(e)})),this.ctx.querySelector(".pvSubtracks_0").style.display="block",this.ctx.querySelector(".pvResetSection_0").style.display="none";let e=this.ctx.querySelector(".pvVariantPlotRow");e&&(e.style.display="none");let n=this.ctx.querySelector(".pvConservationPlotRow");if(n&&(n.style.display="none"),this.ctx.hiddenSections.length>0){let t=this.ctx.viewerData.tracks.length;this.ctx.hiddenSections.forEach((e=>{if(e>0&&e<t){let t=this.ctx.querySelector(`.pvTracks_${e}`);t.style.display="table",t.classList.contains("expanded")&&t.classList.remove("expanded"),t.querySelector(".pvTrack").style.display="block"}else if(e>=t)if(e==t){let t=this.ctx.querySelector(".pvConsHistoRow");t&&(t.style.display="table"),t.classList.contains("expanded")&&t.classList.remove("expanded");let e=this.ctx.querySelector(".pvConservationPlotRow");e&&(e.style.display="none")}else{let t=this.ctx.querySelector(".pvVariantGraphRow");t&&(t.style.display="table"),t.classList.contains("expanded")&&t.classList.remove("expanded");let e=this.ctx.querySelector(".pvVariantPlotRow");e&&(e.style.display="none")}}))}this.ctx.hiddenSections=[],this.ctx.hiddenSubtracks=Object.assign({},{})}openRangeMenu(){this.ctx.querySelector(".settingsMenu").style.display="none";let t=this.ctx.querySelector(".rangeMenu");if("none"==t.style.display){let e=this.ctx.querySelector(".pvRangeMenuStart"),n=this.ctx.querySelector(".pvRangeMenuEnd");if(0==e.value||0==n.value){let t=1,i=this.ctx.viewerData.length,r=this.ctx.querySelectorAll(".pvTrack")[0];r&&(t=r.getAttribute("displaystart"),i=r.getAttribute("displayend")),e.value=Math.round(t),n.value=Math.round(i)}t.style.display="block"}else t.style.display="none"}openCategorySettingsMenu(){this.ctx.querySelector(".rangeMenu").style.display="none";let t=this.ctx.querySelector(".settingsMenu");"none"==t.style.display?(t.querySelectorAll(".pvSectionChkBox").forEach(((t,e)=>{this.ctx.hiddenSections.indexOf(e)>-1?t.checked=!0:t.checked=!1})),t.style.display="block"):t.style.display="none"}pvRangeMenuSubmit(){let t=this.ctx.querySelector(".pvRangeMenuStart").value,e=this.ctx.querySelector(".pvRangeMenuEnd").value;if(""!=t&&""!=e&&(t=parseFloat(t),e=parseFloat(e),e>=t)){e>this.ctx.viewerData.length&&(e=this.ctx.viewerData.length);let n={start:Math.round(t),end:Math.round(e)};this.ctx.querySelector(".pvRangeMenuHighlight").checked&&(n.highlight=!0),this.resetZoom(n),this.openRangeMenu()}}pvCategorySettingsMenuSubmit(){this.ctx.querySelectorAll(".pvSectionChkBox").forEach(((t,e)=>{t.checked?-1==this.ctx.hiddenSections.indexOf(e)&&this.hideSection(e):this.ctx.hiddenSections.indexOf(e)>-1&&this.showSection(e)})),this.openCategorySettingsMenu()}showLabelTooltip(t){let e=t.currentTarget.lastElementChild;if(!e||"labelTooltipContent"!=e.className)return;let n=e.innerText,i=this.ctx.querySelector(".labelTooltipBox");i.innerHTML=n;let r=t.currentTarget.getBoundingClientRect();i.style.left=r.x+r.width+5+"px",i.style.top=r.y+10+"px",i.style.display="block"}hideLabelTooltip(){this.ctx.querySelector(".labelTooltipBox").style.display="none"}showVariantPlot(){let t=this.ctx.querySelector(".pvVariantPlotRow");"none"==t.style.display?(t.style.display="block",t.previousElementSibling.classList.add("expanded")):(t.style.display="none",t.previousElementSibling.classList.remove("expanded"))}showConservationPlot(){let t=this.ctx.querySelector(".pvConservationPlotRow");"none"==t.style.display?(t.style.display="block",t.previousElementSibling.classList.add("expanded")):(t.style.display="none",t.previousElementSibling.classList.remove("expanded"))}filterSc(t){this.ctx.querySelector(".sc_radio").dispatchEvent(new CustomEvent("sc-change",{detail:{type:t},bubbles:!0,cancelable:!0}))}getMSADownloadUrl(){return this.ctx._accession?"https://www.ebi.ac.uk/pdbe/static/alignments/"+this.ctx._accession+".sto.gz":""}addEventSubscription(){document.addEventListener("PDB.topologyViewer.click",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.topologyViewer.mouseover",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.topologyViewer.mouseout",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.litemol.click",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.litemol.mouseover",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.molstar.click",(t=>{this.handleExtEvents(t)})),document.addEventListener("PDB.molstar.mouseover",(t=>{this.handleExtEvents(t)}))}removeEventSubscription(){function t(){console.log("removed")}this.ctx.subscribeEvents&&(document.removeEventListener("PDB.topologyViewer.click",t),document.removeEventListener("PDB.topologyViewer.mouseover",t),document.removeEventListener("PDB.topologyViewer.mouseout",t),document.removeEventListener("PDB.litemol.click",t),document.removeEventListener("PDB.litemol.mouseover",t),document.removeEventListener("PDB.molstar.click",t),document.removeEventListener("PDB.molstar.mouseover",t))}}(this)}set viewerdata(t){t&&(this.displayLoadingMessage(),this.viewerData=t,this.viewerData.displayNavigation=void 0===t.displayNavigation||t.displayNavigation,this.viewerData.displaySequence=void 0===t.displaySequence||t.displaySequence,void 0!==this.viewerData.sequenceConservation&&(this.viewerData.displayConservation=!0),void 0!==this.viewerData.variants&&(this.viewerData.displayVariants=!0),this._render())}async connectedCallback(){this._accession=this.getAttribute("accession"),this._entityId=this.getAttribute("entity-id"),this._entryId=this.getAttribute("entry-id"),this.customData=this.getAttribute("custom-data"),this.pageSection=this.getAttribute("page-section");let t=this.getAttribute("env");this.subscribeEvents="false"!==this.getAttribute("subscribe-events"),this.showLegends="false"!==this.getAttribute("legends"),this.hiddenSubtracks={},this.hiddenSections=[],this.scrollbarWidth=0,this.formattedSubTracks=[],this.zoomedTrack="",this.variantFilterAttr=JSON.stringify(Fh),this.displayLoadingMessage(),this.dataHelper=new class{constructor(t,e,n,i,r){this.appUrlEnv=t||(new RegExp("wwwdev").test(window.location.href)?"dev":new RegExp("wwwint").test(window.location.href)?"int":""),this.accession=e,this.entryId=n,this.entityId=i,this.pageSection=r,this.viewerData={displayNavigation:!0,displaySequence:!0,displayConservation:!0,displayVariants:!0,sequence:void 0,length:void 0,tracks:[],legends:{alignment:"right",data:{}}}}getPDBePVApiUrls(){let t={uniport:[`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/unipdb/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/domains/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/secondary_structures/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/ligand_sites/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/interface_residues/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/annotations/${this.accession}`],entry:[`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/uniprot_mapping/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/chains/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/domains/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/rfam/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/secondary_structure/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/binding_sites/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/interfaces/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/annotations/${this.entryId}/${this.entityId}`]},e=[];return this.accession?e=t.uniport:this.entryId&&this.entityId&&!this.pageSection?e=t.entry:this.entryId&&this.entityId&&this.pageSection&&(e="2"===this.pageSection?[t.entry.pop()]:t.entry.slice(0,-1)),e}async processMutlplePDBeApiData(){let t=this.getPDBePVApiUrls();return await Promise.all(t.map((t=>fetch(t)))).then((t=>Promise.all(t.map((t=>t.json()))))).then((e=>{e.forEach(((e,n)=>{if(void 0===e||null==e||0===Object.keys(e).length);else{let i=this.entryId?this.entryId:this.accession;if(t[n].split("/").indexOf("uniprot_mapping")>-1&&e[i].tracks&&1==e[i].tracks.length&&(this.accession=e[i].tracks[0].data[0].label),!e[i])return;if(e[i].displayNavigation&&0==e[i].displayNavigation&&(this.viewerData.displayNavigation=!1),e[i].displaySequence&&0==e[i].displaySequence&&(this.viewerData.displaySequence=!1),e[i].sequence&&(this.viewerData.sequence=e[i].sequence),e[i].length&&(this.viewerData.length=e[i].length),e[i].tracks&&(this.viewerData.tracks=this.viewerData.tracks.concat(e[i].tracks)),e[i].legends&&(e[i].legends.alignment&&(this.viewerData.legends.alignment=e[i].legends.alignment),e[i].legends.data))for(let t in e[i].legends.data)this.viewerData.legends.data[t]=e[i].legends.data[t]}}))}),(t=>{console.log("API unavailable!",e)})),this.viewerData}async getPDBeApiDataByName(t){try{let e=`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/${"sequence_conservation"===t?"":"protvista/"}${t}/${this.accession}`;return this.entryId&&this.entityId&&(e=`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/${"sequence_conservation"===t?"pdb":"pdbe_pages/protvista"}/${t}/${this.entryId}/${this.entityId}`),await(await fetch(e)).json()}catch(e){console.log(`API ${t} unavailable!`,e)}}}(t,this._accession,this._entryId,this._entityId,this.pageSection),void 0!==this.customData&&null!==this.customData||(this.viewerData=await this.dataHelper.processMutlplePDBeApiData(),this.viewerData.displayConservation=!this.pageSection||"2"!=this.pageSection,this.viewerData.displayVariants=!this.pageSection||"2"!=this.pageSection,this._render())}_render(){this.viewerData.length&&0!=this.viewerData.tracks.length?(this.showLegends||delete this.viewerData.legends,(0,Do.render)((()=>{return Do.html`
        <div class="protvista-pdb">
            <span class="labelTooltipBox" style="display:none"></span>
            <protvista-manager attributes="length displaystart displayend highlightstart highlightend activefilters filters">
                
                <!-- Navigation section -->
                ${this.viewerData.displayNavigation?Do.html`${t=this,Uh`<div class="protvistaRow">
                    
        <!-- Top Menu Toolbar -->
        <div class="protvistaCol1 protvistaToolbar" style="position:relative">
            <span class="protvistaToolbarIcon" @click=${e=>t.layoutHelper.resetView()} title="Reset view">
                <i class="icon icon-functional" data-icon="R"></i>
            </span>

            <!-- View / highlight menu -->
            <span class="protvistaToolbarIcon" title="View / highlight region" @click=${e=>t.layoutHelper.openRangeMenu()}>
                <i class="icon icon-generic" data-icon="["></i>
            </span>
            <div class="rangeMenu viewMenuBox" style="display:none">
                <div class="protvistaRangeMenuTitle">
                    <div>View region</div>
                    <span class="icon icon-functional protvistaMenuClose" data-icon="x" title="close" @click=${e=>{e.stopPropagation(),t.layoutHelper.openRangeMenu()}}></span>
                </div>
                <div class="protvistaForm rangeForm" style="width:170px;">
                    <div style="float:left;width:48%;">
                        From <br>
                        <input type="number" class="pvRangeMenuStart" value="0" style="display:inline-block;margin:0;" min="1" max="${t.viewerData.length}" step="1" />
                    </div>
                    <div style="float:right;width:48%;">
                        To <br>
                        <input type="number" class="pvRangeMenuEnd" value="0" style="display:inline-block;margin:0;" min="1" max="${t.viewerData.length}" step="1" /> <br><br>
                    </div>
                    <div style="margin:0 0 10px 0;clear:both;">
                        <input type="checkbox" class="pvRangeMenuHighlight" /> highlight-only
                    </div>                                
                    <button class="button tiny" style="margin:0; letter-spacing: 1px;" @click=${e=>t.layoutHelper.pvRangeMenuSubmit()}>Submit</button>
                </div>
            </div>
            <!-- View / highlight menu -->

            <!-- Track categories settings menu -->
            <span class="protvistaToolbarIcon" title="Hide sections" @click=${e=>t.layoutHelper.openCategorySettingsMenu()}>
                <i class="icon icon-functional" data-icon="M"></i>
            </span>
            <div class="settingsMenu viewMenuBox" style="display:none">
                <div class="protvistaRangeMenuTitle">
                    <div>Hide sections</div>
                    <span class="icon icon-functional protvistaMenuClose" data-icon="x" title="close" @click=${e=>{e.stopPropagation(),t.layoutHelper.openCategorySettingsMenu()}}></span>
                </div>
                <div class="protvistaForm rangeForm" style="width:215px;max-height:400px;">
                    <table style="font-size:inherit;margin-bottom:0" class="pvHideOptionsTable">
                        <tbody>
                        ${t.viewerData.tracks.map(((t,e)=>Uh`
                            <tr>
                            <td style="width:10%;vertical-align:top;">
                                <input type="checkbox" class="pvSectionChkBox" name="cb_${e}" style="margin:0" />
                            </td>
                            <td style="padding-bottom:5px;">
                                ${t.label}
                            </td>
                            </tr>
                        `))}
                        <tr style="display:none" class="scOption"></tr>
                        <tr style="display:none" class="variationOption"></tr>
                        </tbody>
                    </table>
                    <br>
                    <button class="button tiny" style="margin:0; letter-spacing: 1px;" @click=${e=>t.layoutHelper.pvCategorySettingsMenuSubmit()}>Submit</button>
                </div>
            </div>
            <!-- Track categories settings menu -->
        </div>

        <!-- Navigation Component -->
        <div class="protvistaCol2 pvNavSection">
            <protvista-pdb-navigation length="${t.viewerData.length}" offset="${t.viewerData.offset}" ></protvista-pdb-navigation>
        </div>

    </div>`}`:""}
                
                <!-- Sequence section -->
                ${this.viewerData.displaySequence?Do.html`${function(t){return Zh`<div class="protvistaRow">
                    
        <!-- Top Menu Toolbar -->
        <div class="protvistaCol1">&nbsp;</div>

        <!-- Navigation Component -->
        <div class="protvistaCol2 pvSeqSection">
            <protvista-sequence length="${t.viewerData.length}" sequence="${t.viewerData.sequence}"></protvista-sequence>
        </div>

    </div>`}(this)}`:""}
                
                <!-- Tracks section -->
                ${function(t){return Qh`${t.viewerData.tracks.map(((e,n)=>Qh`
        <div class="protvistaRow pvTrackRow pvTracks_${n}">
            <div class="protvistaCol1 category-label" data-label-index="${n}" @click=${e=>t.layoutHelper.showSubtracks(n)} 
            style=${Gh(e.labelColor?{backgroundColor:e.labelColor,borderBottom:"1px solid lightgrey"}:{})}>
                <span class="pvTrackLabel_${n}"></span>
                <span class="protvistaResetSectionIcon pvResetSection_${n}" @click=${e=>{e.stopPropagation(),t.layoutHelper.resetSection(n)}} title="Reset section">
                <i class="icon icon-functional" data-icon="R"></i>
                </span>
            </div>
            <div class="protvistaCol2 aggregate-track-content" style=${Gh(e.labelColor?{borderBottom:"1px solid lightgrey"}:{})}>
                <protvista-pdb-track class="pvTrack" length="${t.viewerData.length}" layout="${t.layoutHelper.getTrackLayout(e.overlapping)}" height="${t.layoutHelper.getTrackHeight(e.length,e.overlapping)}"></protvista-pdb-track>
            </div>
        </div>
        <!-- Subtrack Rows Start -->
        <div class="protvistaRowGroup pvSubtracks_${n}">
            ${e.data.map(((i,r)=>Qh`
                <div class="protvistaRow pvSubtrackRow_${n}_${r}">
                    <div class="protvistaCol1 track-label" style=${Gh(i.labelColor?{backgroundColor:i.labelColor,borderBottom:"1px solid lightgrey"}:{})}
                    @mouseover=${e=>{e.stopPropagation(),t.layoutHelper.showLabelTooltip(e)}} @mouseout=${e=>{e.stopPropagation(),t.layoutHelper.hideLabelTooltip()}}>
                        <span class="icon icon-functional hideLabelIcon" data-icon="x" @click=${e=>{e.stopPropagation(),t.layoutHelper.hideSubTrack(n,r)}} 
                        title="Hide this section"></span> 
                        <div class="pvSubtrackLabel_${n}_${r}" style="word-break: break-all;"></div>
                        <span class="icon icon-functional labelZoomIcon pvZoomIcon_${n}_${r}" data-icon="T" @click="${e=>{t.layoutHelper.zoomTrack({start:1,end:null,trackData:i},n+"_"+r)}}
                        title="Click to zoom-out this section"></span>

                        ${i.labelTooltip?Qh`
                            <span class="labelTooltipContent" style="display:none;">${i.labelTooltip}</span>
                        `:""}
                    </div>
                    <div class="protvistaCol2 track-content" style=${Gh(e.labelColor?{borderBottom:"1px solid lightgrey"}:{})}>
                        <protvista-pdb-track class="pvSubtrack_${n}" length="${t.viewerData.length}" layout="${t.layoutHelper.getTrackLayout(i.overlapping)}" height="${t.layoutHelper.getTrackHeight(i.length,i.overlapping)}"></protvista-pdb-track>
                    </div>
                </div>`))}
        </div>
        <!-- Subrack Rows End -->
    `))}`}(this)}
                
                <!-- Sequence conservation section -->
                ${this.viewerData.displayConservation?Do.html`${function(t){return Jh`<div class="protvistaRow pvConsHistoRow" style="display:none">
                    
                    <div class="protvistaCol1 category-label" @click=${e=>t.layoutHelper.showConservationPlot()} style="background-color:rgb(128,128,128); borderBottom:1px solid lightgrey">Sequence conservation</div>

                    <div class="protvistaCol2 aggregate-track-content pvConservationHistoSection">
                        <protvista-pdb-sc-histogram accession="${t._entryId?t._entryId:t._accession}" length="${t.viewerData.length}"></protvista-pdb-sc-histogram>
                    </div>
                </div>
                <div class="pvConservationPlotRow" style="display:none">
                    <div class="protvistaRow">
                        <div class="protvistaCol1 track-label" style="background-color:rgb(211,211,211); borderBottom:1px solid lightgrey">
                            <div style="height:30px;">
                                <b>Amino acid probabilities</b>
                                <span style="float: right" @mouseover=${e=>{e.stopPropagation(),t.layoutHelper.showLabelTooltip(e)}} @mouseout=${e=>{e.stopPropagation(),t.layoutHelper.hideLabelTooltip()}}>
                                    <a href="https://github.com/PDBe-KB/pdbe-kb-manual/wiki/Sequence-conservation-scores" target="_blank"
                                    style="border-bottom: none">
                                        <i class="icon icon-generic" data-icon="?"></i>
                                    </a>
                                    <span class="labelTooltipContent" style="display:none;">
                                        The amino acid probabilities are calculated using HMM profiles based on multiple sequence alignments. Click to see more details...
                                    </span>
                                </span>
                            </div>
                            <div class="control" style="height:90px;">
                                <p>Data displayed by</p>
                                <div>
                                    <label class="legendText">
                                        <input type="radio" class="sc_radio" name="sc_display_radio" value="property" checked @change=${e=>t.layoutHelper.filterSc("property")}>Property
                                    </label>
                                </div>
                                <div>
                                    <label class="legendText">
                                        <input type="radio" class="sc_radio" name="sc_display_radio" value="probability" @change=${e=>t.layoutHelper.filterSc("probability")}>Probability
                                    </label>
                                </div>
                            </div>

                            <!-- Note: Display is set to none until we expose MSA files per PDB entity -->
                            <div @mouseover=${e=>{e.stopPropagation(),t.layoutHelper.showLabelTooltip(e)}} @mouseout=${e=>{e.stopPropagation(),t.layoutHelper.hideLabelTooltip()}}
                            style = "${t._entryId?"display: none":""}"
                            >
                                <a class="button" style="padding: 2px 4px 2px 4px; background-color: #ececec; border: solid 1px dimgrey; border-radius: 3px; margin-top: 10px;"
                                    href="${t.layoutHelper.getMSADownloadUrl()}">
                                    Download MSA <i class="icon icon-functional" data-icon="="></i>
                                </a>
                                <span class="labelTooltipContent" style="display:none;">
                                    Click to download the multiple sequence alignment (MSA) file
                                </span>
                            </div>

                            <div class="legend" style="height:200px;">
                                <p>Amino acid properties</p>
                                <div class="protvista-sc-legend">
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#15a4a4"></span>
                                        <span class="legendText">Aromatic</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#15c015"></span>
                                        <span class="legendText">Polar</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#80a0f0"></span>
                                        <span class="legendText">Hydrophobic</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#c048c0"></span>
                                        <span class="legendText">Negative charge</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#c0c000"></span>
                                        <span class="legendText">Proline</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f01505"></span>
                                        <span class="legendText">Positive charge</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f08080"></span>
                                        <span class="legendText">Cysteine</span>
                                    </div>                                  
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f09048"></span>
                                        <span class="legendText">Glycine</span>
                                    </div>
                                </div>
                            </div>

                            <div class="download-sc-align">
                            </div>
                        </div>

                        <div class="protvistaCol2 track-content pvConservationPlotSection">
                            <protvista-pdb-seq-consevation accession="${t._entryId?t._entryId:t._accession}" length="${t.viewerData.length}"></protvista-pdb-seq-consevation>
                        </div>
                    </div>
                </div>`}(this)}`:""}
                
                <!-- Variations section -->
                ${this.viewerData.displayVariants?Do.html`${function(t){return Kh`<div class="protvistaRow pvVariantGraphRow" style="display:none">
                    
                    <div class="protvistaCol1 category-label" @click=${e=>t.layoutHelper.showVariantPlot()}>Variants</div>

                    <div class="protvistaCol2 aggregate-track-content pvVariantGraphSection">
                        <protvista-pdb-variation-graph length="${t.viewerData.length}"></protvista-pdb-variation-graph>
                    </div>
                </div>

                <div class="pvVariantPlotRow" style="display:none">

                    <div class="protvistaRow">
                        
                        <div class="protvistaCol1 track-label">
                            <protvista-filter filters='${t.variantFilterAttr}'></protvista-filter>
                        </div>

                        <div class="protvistaCol2 track-content pvVariantPlotSection">
                            <protvista-pdb-variation length="${t.viewerData.length}"></protvista-pdb-variation>
                        </div>
                    </div>

                </div>`}(this)}`:""}
                
                <!-- Legends section -->
                ${this.viewerData.legends?Do.html`${function(t){return tu`<div></div>
                <div>
                    ${Object.keys(t.viewerData.legends.data).map((e=>tu`
                            <div class="legendRow" style=${Gh({textAlign:t.viewerData.legends.alignment})}>
                                ${isNaN(parseInt(e))?tu`<span class="legendText"><strong>${e} : </strong></span>`:""}
                                ${t.viewerData.legends.data[e].map((t=>{Array.isArray(t.color)||(t.color=[t.color]);const e=t.color.length,n=100/e;let i="";if(1==e)i="background:"+t.color[0];else{let r=["to right"];t.color.forEach(((t,i)=>{0==i?r.push(t+" "+n+"%"):i==e-1?r.push(t+" "+(n*i-1)+"%"):r.push(t+" "+n*i+"% "+n*(i+1)+"%")})),i="background:linear-gradient("+r.join(", ")+")"}return tu`
                                    <span class="legendColor" style="${i}"></span>
                                    <span class="legendText">${t.text}</span>
                                `}))}
                            </div>
                            `))}
                </div>`}(this)}`:""}

            </protvista-manager>
        </div>

        <!-- div to measure scrollbar width for padding -->
        <div class="divWithScroll">
            <div style="height: 60px;width:80%"></div>
        </div>
        <div class="divWithoutScroll">&nbsp;</div>`;var t})(),this),this.layoutHelper.postProcessLayout()):this.displayErrorMessage()}displayLoadingMessage(){(0,Do.render)(Do.html`<div class="protvista-pdb" style="text-align:center;">Loading Protvista...</div>`,this)}displayErrorMessage(){(0,Do.render)(Do.html`<div class="protvista-pdb" style="text-align:center;">Invalid data!</div>`,this)}disconnectedCallback(){this.layoutHelper.removeEventSubscription()}}const nu=eu,iu=function(t,e){customElements.get(t)||customElements.define(t,e)},ru=function(){iu("protvista-manager",n),iu("protvista-sequence",$o),iu("protvista-filter",Jl),iu("protvista-pdb-navigation",ic),iu("protvista-pdb-track",Tc),iu("protvista-pdb-sc-histogram",Lc),iu("protvista-pdb-seq-consevation",qc),iu("protvista-pdb-variation-graph",Nc),iu("protvista-pdb-variation",Dh),iu("protvista-tooltip",Wh),iu("protvista-pdb",nu)};window.customElements?ru():document.addEventListener("WebComponentsReady",(function(){ru()}));const ou=ru})(),ProtvistaProkino=r})();
//# sourceMappingURL=protvista-prokino.js.map